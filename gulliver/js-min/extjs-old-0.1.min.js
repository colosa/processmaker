Ext.ux.Portal=Ext.extend(Ext.Panel,{layout:"column",autoScroll:!0,cls:"x-portal",defaultType:"portalcolumn",initComponent:function(){Ext.ux.Portal.superclass.initComponent.call(this);this.addEvents({validatedrop:!0,beforedragover:!0,dragover:!0,beforedrop:!0,drop:!0})},initEvents:function(){Ext.ux.Portal.superclass.initEvents.call(this);this.dd=new Ext.ux.Portal.DropZone(this,this.dropConfig)},beforeDestroy:function(){this.dd&&this.dd.unreg();Ext.ux.Portal.superclass.beforeDestroy.call(this)}});
Ext.reg("portal",Ext.ux.Portal);
Ext.ux.Portal.DropZone=Ext.extend(Ext.dd.DropTarget,{constructor:function(a,b){this.portal=a;Ext.dd.ScrollManager.register(a.body);Ext.ux.Portal.DropZone.superclass.constructor.call(this,a.bwrap.dom,b);a.body.ddScrollConfig=this.ddScrollConfig},ddScrollConfig:{vthresh:50,hthresh:-1,animate:!0,increment:200},createEvent:function(a,b,c,d,f,j){return{portal:this.portal,panel:c.panel,columnIndex:d,column:f,position:j,data:c,source:a,rawEvent:b,status:this.dropAllowed}},notifyOver:function(a,b,c){var d=
b.getXY(),f=this.portal,j=a.proxy;this.grid||(this.grid=this.getGrid());var h=f.body.dom.clientWidth;this.lastCW?this.lastCW!=h&&(this.lastCW=h,f.doLayout(),this.grid=this.getGrid()):this.lastCW=h;for(var h=0,i=this.grid.columnX,g=!1,e=i.length;h<e;h++)if(d[0]<i[h].x+i[h].w){g=!0;break}g||h--;for(var k,i=!1,g=0,l=f.items.itemAt(h),n=l.items.items,m=!1,e=n.length;g<e;g++){k=n[g];var o=k.el.getHeight();if(0===o)m=!0;else if(k.el.getY()+o/2>d[1]){i=!0;break}}g=(i&&k?g:l.items.getCount())+(m?-1:0);a=
this.createEvent(a,b,c,h,l,g);!1!==f.fireEvent("validatedrop",a)&&!1!==f.fireEvent("beforedragover",a)&&(j.getProxy().setWidth("auto"),k?j.moveProxy(k.el.dom.parentNode,i?k.el.dom:null):j.moveProxy(l.el.dom,null),this.lastPos={c:l,col:h,p:m||i&&k?g:!1},this.scrollPos=f.body.getScroll(),f.fireEvent("dragover",a));return a.status},notifyOut:function(){delete this.grid},notifyDrop:function(a,b,c){delete this.grid;if(this.lastPos){var d=this.lastPos.c,f=this.lastPos.p,j=a.panel,b=this.createEvent(a,b,
c,this.lastPos.col,d,!1!==f?f:d.items.getCount());if(!1!==this.portal.fireEvent("validatedrop",b)&&!1!==this.portal.fireEvent("beforedrop",b)){a.proxy.getProxy().remove();j.el.dom.parentNode.removeChild(a.panel.el.dom);!1!==f?d.insert(f,j):d.add(j);d.doLayout();this.portal.fireEvent("drop",b);var h=this.scrollPos.top;if(h){var i=this.portal.body.dom;setTimeout(function(){i.scrollTop=h},10)}}delete this.lastPos}},getGrid:function(){var a=this.portal.bwrap.getBox();a.columnX=[];this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),
w:b.el.getWidth()})});return a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body);Ext.ux.Portal.DropZone.superclass.unreg.call(this)}});Ext.ux.PortalColumn=Ext.extend(Ext.Container,{layout:"anchor",defaultType:"portlet",cls:"x-portal-column"});Ext.reg("portalcolumn",Ext.ux.PortalColumn);Ext.ux.Portlet=Ext.extend(Ext.Panel,{anchor:"100%",frame:!0,collapsible:!1,draggable:!0,cls:"x-portlet"});Ext.reg("portlet",Ext.ux.Portlet);Ext.namespace("Ext.ux.menu");
Ext.ux.menu.StoreMenu=function(a){Ext.ux.menu.StoreMenu.superclass.constructor.call(this,a);this.store||(this.store=new Ext.data.SimpleStore({fields:["config"],url:this.url,baseParams:this.baseParams}));this.on("show",this.onMenuLoad,this);this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this)};
Ext.extend(Ext.ux.menu.StoreMenu,Ext.menu.Menu,{loadingText:Ext.LoadMask.prototype.msg||"Loading...",loaded:!1,onMenuLoad:function(){this.loaded||this.store.load()},updateMenuItems:function(a,b){this.removeAll();this.el.sync();if(a)for(var c=0,d=b.length;c<d;c++)b[c].json.handler&&eval("records[i].json.handler = "+b[c].json.handler),b[c].json.menu&&eval("records[i].json.menu = "+b[c].json.menu),this.add(b[c].json);else this.add('<span class="loading-indicator">'+this.loadingText+"</span>");this.loaded=
a},onBeforeLoad:function(){this.store.baseParams=this.baseParams;this.updateMenuItems(!1)},onLoad:function(a,b){this.updateMenuItems(!0,b)}});Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.VirtualKeyboard=Ext.extend(Ext.util.Observable,{events:{},init:function(a){this.addEvents({expand:!0,collapse:!0});"textfield"!=a.getXType()&&"textarea"!=a.getXType()||(this.component=a,a.virtualKeyboardPlugin=this,a.enableKeyEvents=!0,a.on({destroy:this.destroy,focus:function(a){this.activeTarget=a},keypress:function(a,c){c.getKey()==c.ESC&&a.collapseKeyboard()},scope:this}),Ext.apply(a,{onRender:a.onRender.createSequence(function(){this.wrap=this.el.wrap({cls:"x-form-field-wrap"});
this.fieldLabel&&this.keyboardConfig.showIcon&&(this.virtualKeyboardIcon=(this.el.findParent(".x-form-element",5,!0)||this.el.findParent(".x-form-field-wrap",5,!0)).createChild({cls:this.keyboardIconCls||"ux-virtualkeyboard-icon",style:"width:16px; height:18px; position:absolute; left:0; top:0; display:block; background:transparent no-repeat scroll 0 2px;"}),this.alignKeyboardIcon=function(){this.virtualKeyboardIcon.alignTo(this.el,"tl-tr",[2,0])},this.alignErrorIcon&&(this.alignErrorIcon=function(){this.errorIcon.alignTo(this.virtualKeyboardIcon,
"tl-tr",[2,0])}),this.on("resize",this.alignKeyboardIcon,this),this.virtualKeyboardIcon.on("click",function(){if(!this.disabled){this.expandKeyboard();this.el.focus()}},this))}),initKeyboard:function(){this.keyboardContainer=new Ext.Layer({shadow:!0,cls:["x-keyboard-container",this.virtualKeyboardClass].join(" "),constrain:!1});this.keyboardContainer.setWidth(370);var a=this.keyboardConfig||{};a.showCloseButton=!0;a.keyboardTarget=this;this.keyboard=new Ext.ux.VirtualKeyboard(a);this.keyboard.render(this.keyboardContainer);
this.keyboard.getTBar().add("-",new Ext.Button({text:this.keyboardConfig.closeButtonText||"Close",listeners:{click:this.collapseKeyboard,scope:this},scope:this}))},collapseKeyboardIf:function(a){!a.within(this.wrap)&&(!a.within(this.keyboardContainer)&&!this.keyboard.selectingLanguage)&&this.collapseKeyboard()},expandKeyboard:function(){this.isKeyboardExpanded()||(this.keyboard||this.initKeyboard(),this.keyboardContainer.alignTo(this.wrap,this.keyboardAlign||"tl-bl?"),this.keyboardContainer.show(),
Ext.getDoc().on("mousewheel",this.collapseKeyboardIf,this),Ext.getDoc().on("mousedown",this.collapseKeyboardIf,this),this.virtualKeyboardPlugin.fireEvent("expand",this))},collapseKeyboard:function(){this.isKeyboardExpanded()&&(this.keyboardContainer.hide(),Ext.getDoc().un("mousewheel",this.collapseKeyboardIf,this),Ext.getDoc().un("mousedown",this.collapseKeyboardIf,this),this.virtualKeyboardPlugin.fireEvent("collapse",this))},isKeyboardExpanded:function(){return this.keyboardContainer&&this.keyboardContainer.isVisible()}}))},
destroy:function(a){if(a&&(a.keyboard&&(a.keyboard.keyboard.remove(),delete a.keyboard),a.keyboardContainer))a.keyboardContainer.remove(),delete a.keyboardContainer},expand:function(){this.activeTarget&&this.activeTarget.expandKeyboard()}});Ext.ns("Ext.ux");
Ext.ux.VirtualKeyboard=Ext.extend(Ext.Component,{keyboardTarget:null,languageSelection:!1,numpad:!0,keyCenter:3,layoutDDK:{},shift:!1,capslock:!1,alternate:!1,dead:!1,deadKeysOn:!1,Languages:{Arabic:[[["\u0630","\u0651 "],["1","!","\u00a1","\u00b9"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a4","\u00a3"],["5","%","\u20ac"],["6","^","\u00bc"],["7","&","\u00bd"],["8","*","\u00be"],["9","(","\u2018"],["0",")","\u2019"],["-","_","\u00a5"],["=","+","\u00d7","\u00f7"],["Bksp","Bksp"]],[["Tab",
"Tab"],["\u0636","\u064e"],["\u0635","\u064b"],["\u062b","\u064f"],["\u0642","\u064c"],["\u0641","\u0644"],["\u063a","\u0625"],["\u0639","\u2018"],["\u0647","\u00f7"],["\u062e","\u00d7"],["\u062d","\u061b"],["\u062c","<"],["\u062f",">"],["\\","|"]],[["Caps","Caps"],["\u0634","\u0650"],["\u0633","\u064d"],["\u064a","]"],["\u0628","["],["\u0644","\u0644"],["\u0627","\u0623"],["\u062a","\u0640"],["\u0646","\u060c"],["\u0645","/"],["\u0643",":"],["\u0637",'"'],["Enter","Enter"]],[["Shift","Shift"],["\u0626",
"~"],["\u0621","\u0652"],["\u0624","}"],["\u0631","{"],["\u0644","\u0644"],["\u0649","\u0622"],["\u0629","\u2019"],["\u0648",","],["\u0632","."],["\u0638","\u061f"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]],Belgian:[[["\u00b2","\u00b3"],["&","1","|"],["\u00e9","2","@"],['"',"3","#"],["'","4"],["(","5"],["\u00a7","6","^"],["\u00e8","7"],["!","8"],["\u00e7","9","{"],["\u00e0","0","}"],[")","\u00b0"],["-","_"],["Bksp","Bksp"]],[["Tab","Tab"],["a","A"],["z","Z"],["e","E","\u20ac"],["r","R"],
["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["^","\u00a8","["],["$","*","]"],["Enter","Enter"]],[["Caps","Caps"],["q","Q"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["m","M"],["\u00f9","%","\u00b4"],["\u03bc","\u00a3","`"]],[["Shift","Shift"],["<",">","\\"],["w","W"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],[",","?"],[";","."],[":","/"],["=","+","~"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Dutch:[[["@","\u00a7","\u00ac"],
["1","!","\u00b9"],["2",'"',"\u00b2"],["3","#","\u00b3"],["4","$","\u00bc"],["5","%","\u00bd"],["6","&","\u00be"],["7","_","\u00a3"],["8","(","{"],["9",")","}"],["0","'"],["/","?","\\"],["\u00b0","~","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R","\u00b6"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00a8","^"],["*","|"],["<",">"]],[["Caps","Caps"],["a","A"],["s","S","\u00df"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],
["l","L"],["+","\u00b1"],["\u00b4","`"],["Enter","Enter"]],[["Shift","Shift"],["]","[","\u00a6"],["z","Z","\u00ab"],["x","X","\u00bb"],["c","C","\u00a2"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",",";"],[".",":","\u00b7"],["-","="],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Dvorak:[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["[","{"],["]","}"],["Bksp","Bksp"]],[["Tab","Tab"],["'",'"'],[",","<"],[".",">"],
["p","P"],["y","Y"],["f","F"],["g","G"],["c","C"],["r","R"],["l","L"],["/","?"],["=","+"],["\\","|"]],[["Caps","Caps"],["a","A"],["o","O"],["e","E"],["u","U"],["i","I"],["d","D"],["h","H"],["t","T"],["n","N"],["s","S"],["-","_"],["Enter","Enter"]],[["Shift","Shift"],[";",":"],["q","Q"],["j","J"],["k","K"],["x","X"],["b","B"],["m","M"],["w","W"],["v","V"],["z","Z"],["Shift","Shift"]],[[" "," "]]],French:[[["\u00b2","\u00b3"],["&","1"],["\u00e9","2","~"],['"',"3","#"],["'","4","{"],["(","5","["],["-",
"6","|"],["\u00e8","7","`"],["_","8","\\"],["\u00e7","9","^"],["\u00e0","0","@"],[")","\u00b0","]"],["=","+","}"],["Bksp","Bksp"]],[["Tab","Tab"],["a","A"],["z","Z"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["^","\u00a8"],["$","\u00a3","\u00a4"],["Enter","Enter"]],[["Caps","Caps"],["q","Q"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["m","M"],["\u00f9","%"],["*","\u03bc"]],[["Shift","Shift"],["<",">"],["w","W"],["x",
"X"],["c","C"],["v","V"],["b","B"],["n","N"],[",","?"],[";","."],[":","/"],["!","\u00a7"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],German:[[["^","\u00b0"],["1","!"],["2",'"',"\u00b2"],["3","\u00a7","\u00b3"],["4","$"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["\u00df","?","\\"],["\u00b4","`"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","@"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00fc",
"\u00dc"],["+","*","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f6","\u00d6"],["\u00e4","\u00c4"],["#","'"]],[["Shift","Shift"],["<",">","\u00a6"],["y","Y"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u00b5"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Greek:[[["`","~"],["1","!"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a3"],["5","%","\u00a7"],
["6","^","\u00b6"],["7","&"],["8","*","\u00a4"],["9","(","\u00a6"],["0",")","\u00ba"],["-","_","\u00b1"],["=","+","\u00bd"],["Bksp","Bksp"]],[["Tab","Tab"],[";",":"],["\u03c2","^"],["\u03b5","\u0395"],["\u03c1","\u03a1"],["\u03c4","\u03a4"],["\u03c5","\u03a5"],["\u03b8","\u0398"],["\u03b9","\u0399"],["\u03bf","\u039f"],["\u03c0","\u03a0"],["[","{","\u201c"],["]","}","\u201d"],["Enter","Enter"]],[["Caps","Caps"],["\u03b1","\u0391"],["\u03c3","\u03a3"],["\u03b4","\u0394"],["\u03c6","\u03a6"],["\u03b3",
"\u0393"],["\u03b7","\u0397"],["\u03be","\u039e"],["\u03ba","\u039a"],["\u03bb","\u039b"],["\u0384","\u00a8","\u0385"],["'",'"'],["\\","|","\u00ac"]],[["Shift","Shift"],["<",">"],["\u03b6","\u0396"],["\u03c7","\u03a7"],["\u03c8","\u03a8"],["\u03c9","\u03a9"],["\u03b2","\u0392"],["\u03bd","\u039d"],["\u03bc","\u039c"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Hebrew:[[["~","`"],["1","!"],["2","@"],["3","#"],["4","$","\u20aa"],["5","%"],["6","^"],["7","&"],
["8","*"],["9",")"],["0","("],["-","_"],["=","+"],["\\","|"],["Bksp","Bksp"]],[["Tab","Tab"],["/","Q"],["'","W"],["\u05e7","E","\u20ac"],["\u05e8","R"],["\u05d0","T"],["\u05d8","Y"],["\u05d5","U","\u05f0"],["\u05df","I"],["\u05dd","O"],["\u05e4","P"],["]","}"],["[","{"]],[["Caps","Caps"],["\u05e9","A"],["\u05d3","S"],["\u05d2","D"],["\u05db","F"],["\u05e2","G"],["\u05d9","H","\u05f2"],["\u05d7","J","\u05f1"],["\u05dc","K"],["\u05da","L"],["\u05e3",":"],[",",'"'],["Enter","Enter"]],[["Shift","Shift"],
["\u05d6","Z"],["\u05e1","X"],["\u05d1","C"],["\u05d4","V"],["\u05e0","B"],["\u05de","N"],["\u05e6","M"],["\u05ea",">"],["\u05e5","<"],[".","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Hungarian:[[["0","\u00a7"],["1","'","~"],["2",'"',"\u02c7"],["3","+","\u02c6"],["4","!","\u02d8"],["5","%","\u00b0"],["6","/","\u02db"],["7","=","`"],["8","(","\u02d9"],["9",")","\u00b4"],["\u00f6","\u00d6","\u02dd"],["\u00fc","\u00dc","\u00a8"],["\u00f3","\u00d3","\u00b8"],["Bksp","Bksp"]],[["Tab",
"Tab"],["q","Q","\\"],["w","W","|"],["e","E","\u00c4"],["r","R"],["t","T"],["z","Z"],["u","U","\u20ac"],["i","I","\u00cd"],["o","O"],["p","P"],["\u0151","\u0150","\u00f7"],["\u00fa","\u00da","\u00d7"],["Enter","Enter"]],[["Caps","Caps"],["a","A","\u00e4"],["s","S","\u0111"],["d","D","\u0110"],["f","F","["],["g","G","]"],["h","H"],["j","J","\u00ed"],["k","K","\u0141"],["l","L","\u0142"],["\u00e9","\u00c9","$"],["\u00e1","\u00c1","\u00df"],["\u0171","\u0170","\u00a4"]],[["Shift","Shift"],["\u00ed",
"\u00cd","<"],["y","Y",">"],["x","X","#"],["c","C","&"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","<"],[",","?",";"],[".",":",">"],["-","_","*"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Italian:[[["\\","|"],["1","!"],["2",'"'],["3","\u00a3"],["4","$","\u20ac"],["5","%"],["6","&"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["\u00ec","^"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],
["p","P"],["\u00e8","\u00e9","[","{"],["+","*","]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f2","\u00e7","@"],["\u00e0","\u00b0","#"],["\u00f9","\u00a7"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Lithuanian:[[["`","~"],["\u0105","\u0104"],["\u010d","\u010c"],
["\u0119","\u0118"],["\u0117","\u0116"],["\u012f","\u012e"],["\u0161","\u0160"],["\u0173","\u0172"],["\u016b","\u016a"],["\u201e","("],["\u201c",")"],["-","_"],["\u017e","\u017d"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["\\","|"]],[["Shift","Shift"],
["\u2013","\u20ac"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]],Norwegian:[[["|","\u00a7"],["1","!"],["2",'"',"@"],["3","#","\u00a3"],["4","\u00a4","$"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?"],["\\","`","\u00b4"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["\u00e5","\u00c5"],
["\u00a8","^","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f8","\u00d8"],["\u00e6","\u00c6"],["'","*"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","\u03bc","\u039c"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Portuguese:[[["`","\u00ac","\u00a6"],["1","!"],["2",'"'],["3","\u00a3"],["4","$","\u20ac"],["5","%"],
["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u00e9","\u00c9"],["r","R"],["t","T"],["y","Y"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O","\u00f3","\u00d3"],["p","P"],["[","{"],["]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00e7","\u00c7"],[";",":"],["'","@"],["#","~"]],[["Shift","Shift"],
["\\","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],Russian:[[["\u0451","\u0401"],["1","!"],["2",'"'],["3","\u2116"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0439","\u0419"],["\u0446","\u0426"],["\u0443","\u0423"],["\u043a","\u041a"],["\u0435","\u0415"],["\u043d","\u041d"],["\u0433","\u0413"],["\u0448",
"\u0428"],["\u0449","\u0429"],["\u0437","\u0417"],["\u0445","\u0425"],["\u044a","\u042a"],["Enter","Enter"]],[["Caps","Caps"],["\u0444","\u0424"],["\u044b","\u042b"],["\u0432","\u0412"],["\u0430","\u0410"],["\u043f","\u041f"],["\u0440","\u0420"],["\u043e","\u041e"],["\u043b","\u041b"],["\u0434","\u0414"],["\u0436","\u0416"],["\u044d","\u042d"],["\\","/"]],[["Shift","Shift"],["/","|"],["\u044f","\u042f"],["\u0447","\u0427"],["\u0441","\u0421"],["\u043c","\u041c"],["\u0438","\u0418"],["\u0442","\u0422"],
["\u044c","\u042c"],["\u0431","\u0411"],["\u044e","\u042e"],[".",","],["Shift","Shift"]],[[" "," "]]],Slovenian:[[["\u00a8","\u00a8","\u00b8"],["1","!","~"],["2",'"',"\u02c7"],["3","#","^"],["4","$","\u02d8"],["5","%","\u00b0"],["6","&","\u02db"],["7","/","`"],["8","(","\u00b7"],["9",")","\u00b4"],["0","=","\u2033"],["'","?","\u00a8"],["+","*","\u00b8"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","\u20ac"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p",
"P"],["\u0161","\u0160","\u00f7"],["\u0111","\u0110","\u00d7"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F","["],["g","G","]"],["h","H"],["j","J"],["k","K","\u0142"],["l","L","\u0141"],["\u010d","\u010c"],["\u0107","\u0106","\u00df"],["\u017e","\u017d","\u00a4"]],[["Shift","Shift"],["<",">"],["y","Y"],["x","X"],["c","C"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","\u00a7"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],
"Spanish-SP":[[["\u00ba","\u00aa","\\"],["1","!","|"],["2",'"',"@"],["3","'","#"],["4","$","~"],["5","%","\u20ac"],["6","&","\u00ac"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["\u00a1","\u00bf"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["`","^","["],["+","*","]"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u00f1","\u00d1"],
["\u00b4","\u00a8","{"],["\u00e7","\u00c7","}"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"Turkish-F":[[["+","*","\u00ac"],["1","!","\u00b9","\u00a1"],["2",'"',"\u00b2"],["3","^","#","\u00b3"],["4","$","\u00bc","\u00a4"],["5","%","\u00bd"],["6","&","\u00be"],["7","'","{"],["8","(","["],["9",")","]"],["0","=","}"],["/","?","\\","\u00bf"],["-","_","|"],["Bksp",
"Bksp"]],[["Tab","Tab"],["f","F","@"],["g","G"],["\u011f","\u011e"],["\u0131","I","\u00b6","\u00ae"],["o","O"],["d","D","\u00a5"],["r","R"],["n","N"],["h","H","\u00f8","\u00d8"],["p","P","\u00a3"],["q","Q","\u00a8"],["w","W","~"],["Enter","Enter"]],[["Caps","Caps"],["u","U","\u00e6","\u00c6"],["i","\u0130","\u00df","\u00a7"],["e","E","\u20ac"],["a","A"," ","\u00aa"],["\u00fc","\u00dc"],["t","T"],["k","K"],["m","M"],["l","L"],["y","Y","\u00b4"],["\u015f","\u015e"],["x","X","`"]],[["Shift","Shift"],
["<",">","|","\u00a6"],["j","J","\u00ab","<"],["\u00f6","\u00d6","\u00bb",">"],["v","V","\u00a2","\u00a9"],["c","C"],["\u00e7","\u00c7"],["z","Z"],["s","S","\u00b5","\u00ba"],["b","B","\u00d7"],[".",":","\u00f7"],[",",";","-"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],"Turkish-Q":[[['"',"\u00e9","<"],["1","!",">"],["2","'","\u00a3"],["3","^","#"],["4","+","$"],["5","%","\u00bd"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["*","?","\\"],["-","_","|"],["Bksp",
"Bksp"]],[["Tab","Tab"],["q","Q","@"],["w","W"],["e","E","\u20ac"],["r","R"],["t","T"],["y","Y"],["u","U"],["\u0131","I","i","\u0130"],["o","O"],["p","P"],["\u011f","\u011e","\u00a8"],["\u00fc","\u00dc","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A","\u00e6","\u00c6"],["s","S","\u00df"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["\u015f","\u015e","\u00b4"],["i","\u0130"],[",",";","`"]],[["Shift","Shift"],["<",">","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],
["n","N"],["m","M"],["\u00f6","\u00d6"],["\u00e7","\u00c7"],[".",":"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],UK:[[["`","\u00ac","\u00a6"],["1","!"],["2",'"'],["3","\u00a3"],["4","$","\u20ac"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","\u00e9","\u00c9"],["r","R"],["t","T"],["y","Y"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O","\u00f3","\u00d3"],["p","P"],["[","{"],
["]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'","@"],["#","~"]],[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]],US:[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=",
"+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]],"US Int'l":[[["`","~"],["1","!","\u00a1",
"\u00b9"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a4","\u00a3"],["5","%","\u20ac"],["6","^","\u00bc"],["7","&","\u00bd"],["8","*","\u00be"],["9","(","\u2018"],["0",")","\u2019"],["-","_","\u00a5"],["=","+","\u00d7","\u00f7"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\u00e4","\u00c4"],["w","W","\u00e5","\u00c5"],["e","E","\u00e9","\u00c9"],["r","R","\u00ae"],["t","T","\u00fe","\u00de"],["y","Y","\u00fc","\u00dc"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O","\u00f3",
"\u00d3"],["p","P","\u00f6","\u00d6"],["[","{","\u00ab"],["]","}","\u00bb"],["\\","|","\u00ac","\u00a6"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S","\u00df","\u00a7"],["d","D","\u00f0","\u00d0"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","\u00f8","\u00d8"],[";",":","\u00b6","\u00b0"],["'",'"',"\u00b4","\u00a8"],["Enter","Enter"]],[["Shift","Shift"],["z","Z","\u00e6","\u00c6"],["x","X"],["c","C","\u00a9","\u00a2"],["v","V"],["b","B"],["n","N","\u00f1","\u00d1"],["m","M",
"\u00b5"],[",","<","\u00e7","\u00c7"],[".",">"],["/","?","\u00bf"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]]},deadKey:{'"':[["a","\u00e4"],["e","\u00eb"],["i","\u00ef"],["o","\u00f6"],["u","\u00fc"],["y","\u00ff"],["\u03b9","\u03ca"],["\u03c5","\u03cb"],["A","\u00c4"],["E","\u00cb"],["I","\u00cf"],["O","\u00d6"],["U","\u00dc"],["Y","\u0178"],["\u0399","\u03aa"],["\u03a5","\u03ab"]],"\u00a8":[["a","\u00e4"],["e","\u00eb"],["i","\u00ef"],["o","\u00f6"],["u","\u00fc"],["y","\u00ff"],["\u03b9",
"\u03ca"],["\u03c5","\u03cb"],["A","\u00c4"],["E","\u00cb"],["I","\u00cf"],["O","\u00d6"],["U","\u00dc"],["Y","\u0178"],["\u0399","\u03aa"],["\u03a5","\u03ab"]],"~":[["a","\u00e3"],["o","\u00f5"],["n","\u00f1"],["A","\u00c3"],["O","\u00d5"],["N","\u00d1"]],"^":[["a","\u00e2"],["e","\u00ea"],["i","\u00ee"],["o","\u00f4"],["u","\u00fb"],["w","\u0175"],["y","\u0177"],["A","\u00c2"],["E","\u00ca"],["I","\u00ce"],["O","\u00d4"],["U","\u00db"],["W","\u0174"],["Y","\u0176"]],"\u02c7":[["c","\u010d"],["s",
"\u0161"],["z","\u017e"],["r","\u0159"],["d","\u010f"],["t","\u0165"],["n","\u0148"],["l","\u013e"],["e","\u011b"],["C","\u010c"],["S","\u0160"],["Z","\u017d"],["R","\u0158"],["D","\u010e"],["T","\u0164"],["N","\u0147"],["L","\u013d"],["E","\u011a"]],"\u02d8":[["a","\u0103"],["g","\u011f"],["A","\u0102"],["G","\u011e"]],"`":[["a","\u00e0"],["e","\u00e8"],["i","\u00ec"],["o","\u00f2"],["u","\u00f9"],["A","\u00c0"],["E","\u00c8"],["I","\u00cc"],["O","\u00d2"],["U","\u00d9"]],"'":[["a","\u00e1"],["e",
"\u00e9"],["i","\u00ed"],["o","\u00f3"],["u","\u00fa"],["\u03b1","\u03ac"],["\u03b5","\u03ad"],["\u03b7","\u03ae"],["\u03b9","\u03af"],["\u03bf","\u03cc"],["\u03c5","\u03cd"],["\u03c9","\u03ce"],["A","\u00c1"],["E","\u00c9"],["I","\u00cd"],["O","\u00d3"],["U","\u00da"],["\u0391","\u0386"],["\u0395","\u0388"],["\u0397","\u0389"],["\u0399","\u038a"],["\u039f","\u038c"],["\u03a5","\u038e"],["\u03a9","\u038f"]],"\u00b4":[["a","\u00e1"],["e","\u00e9"],["i","\u00ed"],["o","\u00f3"],["u","\u00fa"],["\u03b1",
"\u03ac"],["\u03b5","\u03ad"],["\u03b7","\u03ae"],["\u03b9","\u03af"],["\u03bf","\u03cc"],["\u03c5","\u03cd"],["\u03c9","\u03ce"],["A","\u00c1"],["E","\u00c9"],["I","\u00cd"],["O","\u00d3"],["U","\u00da"],["\u0391","\u0386"],["\u0395","\u0388"],["\u0397","\u0389"],["\u0399","\u038a"],["\u039f","\u038c"],["\u03a5","\u038e"],["\u03a9","\u038f"]],"\u0384":[["a","\u00e1"],["e","\u00e9"],["i","\u00ed"],["o","\u00f3"],["u","\u00fa"],["\u03b1","\u03ac"],["\u03b5","\u03ad"],["\u03b7","\u03ae"],["\u03b9",
"\u03af"],["\u03bf","\u03cc"],["\u03c5","\u03cd"],["\u03c9","\u03ce"],["A","\u00c1"],["E","\u00c9"],["I","\u00cd"],["O","\u00d3"],["U","\u00da"],["\u0391","\u0386"],["\u0395","\u0388"],["\u0397","\u0389"],["\u0399","\u038a"],["\u039f","\u038c"],["\u03a5","\u038e"],["\u03a9","\u038f"]],"\u02dd":[["o","\u0151"],["u","\u0171"],["O","\u0150"],["U","\u0170"]],"\u0385":[["\u03b9","\u0390"],["\u03c5","\u03b0"]],"\u00b0":[["a","\u00e5"],["A","\u00c5"]],"\u00ba":[["a","\u00e5"],["A","\u00c5"]]},initComponent:function(a){Ext.ux.VirtualKeyboard.superclass.initComponent.call(this);
Ext.apply(this,{language:this.language||"US",deadKeysButtonText:this.deadKeysButtonText||"Type accented letters",autoDestroy:!0});Ext.apply(this,a);this.addEvents("keypress")},onRender:function(a,b){this.initKeyboard(a);Ext.ux.VirtualKeyboard.superclass.onRender.call(this,a,b)},initKeyboard:function(a){this.keyboardTarget.el.on("click",this.IESel,this);this.keyboardTarget.el.on("keyup",this.IESel,this);this.keyboardTarget.el.on("select",this.IESel,this);this.keyboard=a.createChild({tag:"div",cls:"x-keyboard x-panel"});
this.keyboard.setStyle({width:this.width||370});a=0;for(lang in this.Languages)"object"==typeof this.Languages[lang]&&a++;a=[];if(this.languageSelection){var b=[];for(ktype in this.Languages)"object"==typeof this.Languages[ktype]&&b.push([ktype,ktype]);this.languageSelector=new Ext.form.ComboBox({store:b,forceSelection:!0,triggerAction:"all",editable:!1,readOnly:!0,height:15,width:100,value:this.language,listeners:{select:function(a,b){this.language=b.data.value;this.buildKeys()},expand:function(){this.selectingLanguage=
!0},collapse:function(){this.selectingLanguage=!1},scope:this}});a.push(this.languageSelector)}else a.push(this.language);a.push("-",{text:this.deadKeysButtonText,iconCls:"ux-accented-icon",enableToggle:!0,listeners:{toggle:function(a,b){this.deadKeysOn=b;this.keyModify("")},scope:this}});this.ktbar=new Ext.Toolbar({renderTo:this.keyboard,items:a});this.languageSelection||Ext.fly(this.ktbar.items.items[0].getEl()).setStyle({fontWeight:"bold"});this.keysContainer=this.keyboard.createChild({tag:"div",
cls:"x-panel-bwrap"}).createChild({tag:"div",cls:"x-panel-body"}).createChild({tag:"div"});this.buildKeys()},getTBar:function(){return this.ktbar},buildKeys:function(){this.shift=this.capslock=this.alternate=this.dead=!1;this.keysContainer.update("");for(var a=Ext.DomHelper,b=0,c=!1,d;d=this.Languages[this.language][b++];){var f=a.append(this.keysContainer,{tag:"table",cellSpacing:"1",cellPadding:"0",border:"0",cls:(d.length<=this.keyCenter?"keyboardInputCenter":"")+" keys",align:d.length<=this.keyCenter?
"center":"",html:""});Ext.isIE&&f.firstChild&&f.removeChild(f.firstChild);for(var j=a.append(f,{tag:"tbody"}),h=a.append(j,{tag:"tr"}),i=0,g;g=d[i++];){if(!this.layoutDDK[this.language]&&!c)for(var e=0;e<g.length;e++)if(this.deadKey[g[e]]){c=!0;break}e=!1;if(this.deadKeysOn)for(key in this.deadKey)key===g[0]&&(e=!0);var k=[];e&&k.push("alive");d.length>this.keyCenter&&i==d.length&&k.push("last");e=a.append(h,{tag:"td",cls:k.join(" "),html:" "==g[0]?"&nbsp;":g[0]});" "==g[0]&&(e.id="spacebar");Ext.fly(e).on("mouseover",
function(a,b){!Ext.fly(b).hasClass("dead")&&b.firstChild.nodeValue!="\u00a0"&&Ext.fly(b).addClass("hover")});Ext.fly(e).on("mouseout",function(a,b){Ext.fly(b).hasClass("dead")||Ext.fly(b).removeClass(["hover","pressed"])});Ext.fly(e).on("mousedown",function(a,b){Ext.fly(b).hasClass("dead")||Ext.fly(b).addClass("pressed")});Ext.fly(e).on("mouseup",function(a,b){!Ext.fly(b).hasClass("dead")&&b.firstChild.nodeValue!="\u00a0"&&Ext.fly(b).removeClass("pressed")});Ext.fly(e).swallowEvent("dblclick",!0);
e.modifier=g[1];switch(g[1]){case "Caps":case "Shift":case "Alt":case "AltGr":Ext.fly(e).on("click",function(a,b){this.keyModify(b.modifier)},this,{stopEvent:!0});break;case "Tab":Ext.fly(e).on("click",function(){this.keyInsert("\t")},this,{stopEvent:!0});break;case "Bksp":Ext.fly(e).on("click",function(){this.keyboardTarget.focus();var a=this.keyboardTarget.el.dom;if(a.setSelectionRange){var b=a.selectionStart,c=a.selectionEnd;b<c&&b++;this.keyboardTarget.setValue(a.value.substr(0,b-1)+a.value.substr(c));
a.setSelectionRange(b-1,b-1)}else if(a.createTextRange){try{this.range.select()}catch(e){}this.range=document.selection.createRange();this.range.text.length||this.range.moveStart("character",-1);this.range.text=""}else this.keyboardTarget.setValue(a.value.substr(0,a.value.length-1));this.shift&&this.keyModify("Shift");this.alternate&&this.keyModify("AltGr");return true},this);break;case "Enter":Ext.fly(e).on("click",function(){this.keyInsert("\n")},this,{stopEvent:!0});break;default:Ext.fly(e).on("click",
function(a,b){var c=b.firstChild.nodeValue;c=="\u00a0"&&(c=" ");if(this.deadKeysOn&&this.dead)if(this.dead!=c)for(key in this.deadKey){if(key==this.dead){if(c!=" ")for(var e=0,d=false,f;f=this.deadKey[key][e++];){if(f[0]==c){this.keyInsert(f[1]);d=true;break}}else{this.keyInsert(this.dead);d=true}break}}else d=true;this.dead=false;if(!d&&c!="\u00a0")if(this.deadKeysOn){for(key in this.deadKey)if(key==c){this.dead=key;this.className="dead";this.shift&&this.keyModify("Shift");this.alternate&&this.keyModify("AltGr");
break}this.dead||this.keyInsert(c)}else this.keyInsert(c);this.keyModify("")},this,{stopEvent:!0}),delete e}delete h;for(e=g.length;4>e;e++)g[e]="\u00a0"}delete f;delete j}},keyModify:function(a){switch(a){case "Alt":case "AltGr":this.alternate=!this.alternate;break;case "Caps":this.capslock=!this.capslock;break;case "Shift":this.shift=!this.shift}var b=0;!this.shift!=!this.capslock&&(b+=1);for(var c=this.keyboard.select("table.keys"),d=0;d<c.getCount();d++)for(var f=c.item(d).select("td"),j=0;j<
f.getCount();j++){td=f.item(j);var h=alive=isTarget=!1,i=this.Languages[this.language][d][j];switch(i[1]){case "Alt":case "AltGr":this.alternate&&(h=!0);break;case "Shift":this.shift&&(h=!0);break;case "Caps":this.capslock&&(h=!0);break;case "Tab":case "Enter":case "Bksp":break;default:if(i=i[b+(this.alternate&&4==i.length?2:0)],a&&td.update(i),this.deadKeysOn){if(this.dead){i==this.dead&&(h=!0);for(var g=0;g<this.deadKey[this.dead].length;g++)if(i==this.deadKey[this.dead][g][0]){isTarget=!0;break}}for(key in this.deadKey)if(key===
i){alive=!0;break}}}td.dom.className=h?"dead":isTarget?"target":alive?"alive":"";j==f.getCount()-1&&f.getCount()>this.keyCenter&&td.addClass("last")}},keyInsert:function(a){this.fireEvent("keyPress",this,a);if(this.keyboardTarget){this.keyboardTarget.focus();var b=this.keyboardTarget.el.dom;if(b.setSelectionRange){var c=b.selectionStart,d=b.selectionEnd;b.value=b.value.substr(0,c)+a+b.value.substr(d);"\n"==a&&window.opera&&c++;b.setSelectionRange(c+a.length,c+a.length)}else if(b.createTextRange){try{this.range.select()}catch(f){}this.range=
document.selection.createRange();this.range.text=a;this.range.collapse(!0);this.range.select()}else this.keyboardTarget.setValue(this.keyboardTarget.getValue()+a);this.shift&&this.keyModify("Shift");this.alternate&&this.keyModify("AltGr");this.keyboardTarget.focus()}},getXType:function(){return"virtualkeyboard"},IESel:function(a,b){b.createTextRange&&(this.range=document.selection.createRange())}});Ext.reg("virtualkeyboard",Ext.ux.VirtualKeyboard);Ext.namespace("Ext.ux");
Ext.ux.CodePress=Ext.extend(Ext.form.Field,{sourceEl:!1,code:!1,language:!1,url:!1,height:!1,width:!1,autoResize:!1,initialized:!1,initComponent:function(){Ext.ux.CodePress.superclass.initComponent.call(this);this.sourceEl&&Ext.get(this.sourceEl).hide();this.addEvents({initialize:!0,activate:!0})},adjustSize:Ext.BoxComponent.prototype.adjustSize,resize:function(){var a=(this.height||this.ownerCt.body.dom.clientHeight)+"px",b=(this.width||this.ownerCt.body.dom.clientWidth)+"px";this.editor.body.style.width=
(this.width||this.ownerCt.body.dom.clientWidth)-50+"px";this.iframe.setStyle("height",a);this.iframe.setStyle("width",b)},onRender:function(a,b){Ext.ux.CodePress.superclass.onRender.call(this,a,b);Ext.ux.CodePress.path||this.getCodePath();this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;");this.wrap=this.el.wrap({});this.iframe=Ext.get(document.createElement("iframe"));this.iframe.src=
Ext.SSL_SECURE_URL||"javascript:false";this.textarea=this.sourceEl?Ext.get(this.sourceEl):Ext.get(document.createElement("textarea"));this.textarea.dom.disabled=!0;this.textarea.dom.style.overflow="hidden";this.textarea.dom.style.overflow="auto";this.iframe.dom.frameBorder=0;this.iframe.setStyle("visibility","hidden");this.iframe.setStyle("position","absolute");this.options=this.textarea.dom.className;this.wrap.dom.appendChild(this.textarea.dom);this.textarea.dom.parentNode.insertBefore(this.iframe.dom,
this.textarea.dom);this.edit()},afterRender:function(){Ext.ux.CodePress.superclass.afterRender.call(this)},focus:function(){},getCodePath:function(){s=document.getElementsByTagName("script");for(var a=0,b=s.length;a<b;a++)if(s[a].src.match("Ext.ux.codepress.js")){Ext.ux.CodePress.path=s[a].src.replace("Ext.ux.codepress.js","");break}},initialize:function(){this.doc=Ext.isIE?this.iframe.dom.contentWindow.document:this.iframe.dom.contentDocument;this.win=this.iframe.dom.contentWindow;this.editor=this.win.CodePress;
this.editor.body=this.doc.getElementsByTagName("body")[0];this.url?Ext.Ajax.request({url:this.url,method:"get",success:function(a){this.code=a.responseText;this.editor.setCode(this.code)}.createDelegate(this)}):this.editor.setCode(this.getValue());this.resize();this.setOptions();this.editor.syntaxHighlight("init");this.textarea.dom.style.display="none";this.iframe.dom.style.position="static";this.iframe.dom.style.visibility="visible";this.iframe.dom.style.display="inline";this.initialized=!0;this.fireEvent("initialize",
this)},edit:function(a,b){a&&(this.textarea.dom.value=document.getElementById(a)?document.getElementById(a).value:a);this.textarea.dom.disabled&&(this.language=b?b:this.getLanguage(),this.iframe.dom.src=Ext.ux.CodePress.path+"codepress.html?language="+this.language+"&ts="+(new Date).getTime(),this.iframe.removeListener("load",this.initialize),this.iframe.on("load",this.initialize,this))},getLanguage:function(){if(this.language)return this.language;for(language in Ext.ux.CodePress.languages)if(this.options.match("\\b"+
language+"\\b"))return Ext.ux.CodePress.languages[language]?language:"generic"},setOptions:function(){this.options.match("autocomplete-off")&&this.toggleAutoComplete();this.options.match("readonly-on")&&this.toggleReadOnly();this.options.match("linenumbers-off")&&this.toggleLineNumbers()},getCode:function(){return this.textarea.dom.disabled?this.editor.getCode():this.textarea.dom.value},setCode:function(a){this.textarea.dom.disabled?this.editor.setCode(a):this.textarea.dom.value=a;this.editor.syntaxHighlight()},
toggleAutoComplete:function(){this.editor.autocomplete=this.editor.autocomplete?!1:!0},toggleReadOnly:function(){this.textarea.dom.readOnly=this.textarea.dom.readOnly?!1:!0;"none"!=this.iframe.dom.style.display&&this.editor.readOnly(this.textarea.dom.readOnly?!0:!1)},toggleLineNumbers:function(){var a=this.editor.body.className;this.editor.body.className=""==a||"show-line-numbers"==a?"hide-line-numbers":"show-line-numbers"},toggleEditor:function(){this.textarea.dom.disabled?(this.textarea.dom.value=
this.getCode(),this.textarea.dom.disabled=!1,this.iframe.dom.style.display="none",this.textarea.dom.style.display="inline"):(this.textarea.dom.disabled=!0,this.setCode(this.textarea.dom.value),this.editor.syntaxHighlight("init"),this.iframe.domstyle.display="inline",this.textarea.dom.style.display="none")}});Ext.reg("codepress",Ext.ux.CodePress);
Ext.ux.CodePress.languages={csharp:"C#",css:"CSS",generic:"Generic",html:"HTML",java:"Java",javascript:"JavaScript",perl:"Perl",ruby:"Ruby",php:"PHP",text:"Text",sql:"SQL",vbscript:"VBScript"};Ext.ux.CodePress.path="/js/thirdparty/codepress/";
