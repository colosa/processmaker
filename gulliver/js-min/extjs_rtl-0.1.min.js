Ext.override(Ext.Button,{menuAlign:"tr-br?",iconAlign:"right",subMenuAlign:"tr-tl?"});Ext.override(Ext.menu.Menu,{subMenuAlign:"tr-tl?"});Ext.override(Ext.menu.DateMenu,{subMenuAlign:"tr-tl?"});Ext.override(Ext.menu.ColorMenu,{subMenuAlign:"tr-tl?"});Ext.override(Ext.Tip,{defaultAlign:"tr-bl?"});Ext.override(Ext.SplitButton,{isClickOnArrow:function(a){return"bottom"!=this.arrowAlign?a.getPageX()<this.el.child(this.buttonSelector).getRegion().left:a.getPageY()>this.el.child(this.buttonSelector).getRegion().bottom}});
Ext.override(Ext.layout.HBoxLayout,{onLayout:function(a,c){Ext.layout.HBoxLayout.superclass.onLayout.call(this,a,c);var f=a.items.items,g=f.length,b,e,o=g-1,d,i=this.getLayoutTargetSize(c),k=i.width-c.getPadding("lr")-this.scrollOffset,h=i.height-c.getPadding("tb"),i=this.padding.left,m=this.padding.top;if((!Ext.isIE||Ext.isStrict||!(1>k||1>h))&&!(1>k&&1>h)){var s=h-(this.padding.top+this.padding.bottom),r=0,j=0,p=0;for(e=0;e<g;e++)b=f[e],d=b.margins,r+=b.flex||0,j+=b.getWidth()+d.left+d.right,p=
Math.max(p,b.getHeight()+d.top+d.bottom);b=p+this.padding.top+this.padding.bottom;switch(this.align){case "stretch":this.innerCt.setSize(k,h);break;case "stretchmax":case "top":this.innerCt.setSize(k,b);break;case "middle":this.innerCt.setSize(k,h=Math.max(h,b))}var j=k-j-this.padding.left-this.padding.right,n=0,l,q=h-this.padding.top-this.padding.bottom;"center"==this.pack?i+=j?j/2:0:"end"==this.pack&&(i+=j);for(e=0;e<g;e++)b=f[e],d=b.margins,h=b.getWidth(),l=b.getHeight(),i+=d.right,"middle"!=this.align?
a=m+d.top:(l=q-(l+d.top+d.bottom),a=0==l?m+d.top:m+d.top+l/2),"start"==this.pack&&b.flex&&(l=Math.floor(j*(b.flex/r)),n+=l,e==o&&(l+=j-n),h+=l,b.setWidth(h)),b.setPosition(k-i-h,a),"stretch"==this.align?b.setHeight((s-(d.top+d.bottom)).constrain(b.minHeight||0,b.maxHeight||1E6)):"stretchmax"==this.align&&b.setHeight((p-(d.top+d.bottom)).constrain(b.minHeight||0,b.maxHeight||1E6)),i+=h+d.left}}});
Ext.override(Ext.layout.VBoxLayout,{onLayout:function(a,c){Ext.layout.VBoxLayout.superclass.onLayout.call(this,a,c);var f=a.items.items,g=f.length,b,e,o=g-1,d,i=this.getLayoutTargetSize(c),k=i.width-c.getPadding("lr")-this.scrollOffset,h=i.height-c.getPadding("tb"),i=this.padding.right,m=this.padding.top;if((!Ext.isIE||Ext.isStrict||!(1>k||1>h))&&!(1>k&&1>h)){var s=k-(this.padding.left+this.padding.right),r=0,j=0,p=0;for(e=0;e<g;e++)b=f[e],d=b.margins,r+=b.flex||0,j+=b.getHeight()+d.top+d.bottom,
p=Math.max(p,b.getWidth()+d.left+d.right);b=p+this.padding.left+this.padding.right;switch(this.align){case "stretch":this.innerCt.setSize(k,h);break;case "stretchmax":case "left":case "center":this.innerCt.setSize(k=Math.max(k,b),h)}var h=h-j-this.padding.top-this.padding.bottom,j=0,n,l,q,t=k-this.padding.left-this.padding.right;"center"==this.pack?m+=h?h/2:0:"end"==this.pack&&(m+=h);for(e=0;e<g;e++)b=f[e],d=b.margins,n=b.getWidth(),l=b.getHeight(),m+=d.top,"center"!=this.align?q=i+d.right:(q=t-(n+
d.left+d.right),q=0==q?i+d.right:i+d.right+q/2),b.setPosition(k-q-n,m),"start"==this.pack&&b.flex&&(n=Math.floor(h*(b.flex/r)),j+=n,e==o&&(n+=h-j),l+=n,b.setHeight(l)),"stretch"==this.align?b.setWidth((s-(d.left+d.right)).constrain(b.minWidth||0,b.maxWidth||1E6)):"stretchmax"==this.align&&b.setWidth((p-(d.left+d.right)).constrain(b.minWidth||0,b.maxWidth||1E6)),m+=l+d.bottom}}});
Ext.override(Ext.layout.FormLayout,{setContainer:function(a){Ext.layout.FormLayout.superclass.setContainer.call(this,a);a.labelAlign&&a.addClass("x-form-label-"+a.labelAlign);if(a.hideLabels)Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-right:0;",labelAdjust:0});else{this.labelSeparator=a.labelSeparator||this.labelSeparator;a.labelWidth=a.labelWidth||100;if(Ext.isNumber(a.labelWidth)){var c=Ext.isNumber(a.labelPad)?a.labelPad:5;Ext.apply(this,{labelAdjust:a.labelWidth+c,labelStyle:"width:"+
a.labelWidth+"px;",elementStyle:"padding-right:"+(a.labelWidth+c)+"px"})}"top"==a.labelAlign&&Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-right:0;"})}}});Ext.override(Ext.form.Field,{alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tr-tl",[-2,0])}});Ext.override(Ext.form.TriggerField,{alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tr-tl",[-2,0])}});
Ext.override(Ext.layout.ToolbarLayout,{onLayout:function(a,c){if(!this.leftTr){var f="center"==a.buttonAlign?"center":"right";c.addClass("x-toolbar-layout-ct");c.insertHtml("beforeEnd",'<table cellspacing="0" class="x-toolbar-ct"><tbody><tr><td class="x-toolbar-right" align="'+f+'"><table cellspacing="0"><tbody><tr class="x-toolbar-right-row"></tr></tbody></table></td><td class="x-toolbar-left" align="left"><table cellspacing="0" class="x-toolbar-left-ct"><tbody><tr><td><table cellspacing="0"><tbody><tr class="x-toolbar-left-row"></tr></tbody></table></td><td><table cellspacing="0"><tbody><tr class="x-toolbar-extras-row"></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table>');
this.leftTr=c.child("tr.x-toolbar-right-row",!0);this.rightTr=c.child("tr.x-toolbar-left-row",!0);this.extrasTr=c.child("tr.x-toolbar-extras-row",!0)}for(var f="right"==a.buttonAlign?this.rightTr:this.leftTr,g=0,b=a.items.items,e=0,o=b.length,d;e<o;e++,g++)if(d=b[e],d.isFill)f=this.rightTr,g=-1;else if(d.rendered){if(!d.xtbHidden&&!this.isValidParent(d,f.childNodes[g])){var i=this.insertCell(d,f,g);i.appendChild(d.getPositionEl().dom);d.container=Ext.get(i)}}else d.render(this.insertCell(d,f,g));
this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);this.fitToSize(c)}});Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout;Ext.override(Ext.form.HtmlEditor,{getDocMarkup:function(){return'<html><head><style type="text/css">body{border:0;margin:0;padding:3px;height:98%;cursor:text;direction:rtl;}</style></head><body></body></html>'}});
Ext.override(Ext.form.DateField,{onTriggerClick:function(){this.disabled||(null==this.menu&&(this.menu=new Ext.menu.DateMenu({hideOnClick:!1})),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,
this.formatDate(this.maxValue))}),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tr-br?"),this.menuEvents("on"))}});
Ext.override(Ext.TabPanel,{autoScrollTabs:function(){this.pos="bottom"==this.tabPosition?this.footer:this.header;var a=this.items.length,c=this.pos.dom.clientWidth,f=this.stripWrap,g=f.dom,b=g.offsetWidth,e=this.getScrollPos(),o=b-(this.edge.getOffsetsTo(this.stripWrap)[0]+e);if(this.enableTabScroll&&!(1>a||20>b))if(o<=c){f.setWidth(c);if(this.scrolling&&(this.scrolling=!1,this.pos.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide(),Ext.isAir||Ext.isWebKit))g.style.marginLeft=
"",g.style.marginRight="";g.scrollLeft=0}else{if(!this.scrolling&&(this.pos.addClass("x-tab-scrolling"),Ext.isAir||Ext.isWebKit))g.style.marginLeft="18px",g.style.marginRight="18px";c-=f.getMargins("lr");f.setWidth(20<c?c:20);this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers());this.scrolling=!0;e>o-c?g.scrollLeft=o-c:this.scrollToTab(this.activeTab,!1);this.updateScrollButtons()}},onScrollRight:function(){var a=this.getScrollPos(),c=Math.max(this.getScrollWidth(),
a-this.getScrollIncrement());c!=a&&this.scrollTo(c,this.animScroll)},onScrollLeft:function(){var a=this.getScrollPos(),c=Math.min(0,a+this.getScrollIncrement());c!=a&&this.scrollTo(c,this.animScroll)},updateScrollButtons:function(){var a=this.getScrollPos();this.scrollLeft[0==a?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[a<=this.getScrollWidth()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")}});
Ext.override(Ext.grid.GridView.SplitDragZone,{handleMouseDown:function(a){var c=this.view.findHeaderCell(a.getTarget());if(c&&this.allowHeaderDrag(a)){var f=this.view.fly(c).getXY()[0],g=a.getXY()[0],b=c.offsetWidth,e=!1;g-f<=this.hw?e=0:f+b-g<=this.hw&&(e=-1);if(!1!==e){this.cm=this.grid.colModel;f=this.view.getCellIndex(c);if(-1==e){if(0>f+e)return;for(;this.cm.isHidden(f+e);)if(--e,0>f+e)return}this.cellIndex=f+e;this.split=c.dom;this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&
Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(a)}},endDrag:function(a){this.marker.hide();var c=this.view,a=Math.max(this.minX,a.getPageX()),a=this.startPos-a;c.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+a);setTimeout(function(){c.headersDisabled=!1},50)}});
Ext.override(Ext.grid.GridView,{handleHdMove:function(a){if(this.findHeaderCell(this.activeHdRef)&&!this.headersDisabled){var c=this.splitHandleWidth||5,f=this.activeHdRegion,a=a.getPageX();!1!==this.grid.enableColumnResize&&!(f.right-a<=c&&this.cm.isResizable(this.activeHdIndex-1))&&a-f.left<=(!this.activeHdBtn?c:2)&&this.cm.isResizable(this.activeHdIndex)}},syncFocusEl:function(a,c,f){var g=a;Ext.isArray(g)||(a=Math.min(a,Math.max(0,this.getRows().length-1)),g=this.getResolvedXY(this.resolveCell(a,
c,f)));a=this.scroller.getXY();g||(g=a);this.focusEl.setTop(g[1]-a[1]+this.scroller.getScroll().top);this.focusEl.setRight(g[0]-a[0])},handleHdDown:function(a,c){if(Ext.fly(c).hasClass("x-grid3-hd-btn")){a.stopEvent();var f=this.findHeaderCell(c);Ext.fly(f).addClass("x-grid3-hd-menu-open");var g=this.getCellIndex(f);this.hdCtxIndex=g;var b=this.hmenu.items,e=this.cm;b.get("asc").setDisabled(!e.isSortable(g));b.get("desc").setDisabled(!e.isSortable(g));this.hmenu.on("hide",function(){Ext.fly(f).removeClass("x-grid3-hd-menu-open")},
this,{single:!0});this.hmenu.show(c,"tr-br?")}}});Ext.override(Ext.Layer,{hideAction:function(){this.visible=!1;!0===this.useDisplay?this.setDisplayed(!1):this.setLeftTop(0,-1E4)}});Ext.override(Ext.form.ComboBox,{listAlign:"tr-br?"});
