var maborak=function(b){this.info={version:"0.3",name:"maborak",file:"maborak.js"};this.forceCssLoad=b?!0:!1;this.make=function(d){this.protoCore();this.module={debug:function(d){this.flag=d||!1;this.log=function(h){"undefined"!=typeof console&&!0===this.flag&&console.log(h||"")};return this}}.expand(this);this.options={thisIsNotPM:!1}.concat(d||{});this.report=new this.bitacora;this.loadMethods([this.checkBrowser],this);this.event=this.factory(this.mantis,!0);this.tools=this.factory(this.extended.tools,
!0);this.file=this.factory(this.fileCore,!0);this.dom=this.factory(this.extended.D0M,!0);this.iphone=this.factory(this.iphoneBrowser,!0);this.cookie=this.factory(this.extended.cookie,!0);this.Package=new this.PackageCore(this,this.file.db);this.report.add("Class loaded.");this.info.base=this.tools.baseJS(this.info.file);this.info.images=this.info.base+"images/";this.path_root=this.tools.path_root(this.info.base)+"/";this.options.modules&&this.Package.Load(this.options.modules,{Instance:this,Type:"module"});
this.options.files&&this.Package.Load(this.options.files,{Type:"file"});this.exec(this.fix.memoryLeak);!0===this.forceCssLoad&&(d=$dce("link"),d.rel="stylesheet",d.type="text/css",d.href=this.info.base+"stylesheet/default.css",this.dom.capture("tag.head 0").appendChild(d));this.expand(this);return this};this.factory=function(d,g){var h="function"===typeof d?d:function(){};h.prototype.parent=this;return!0===g?new h:h};this.Class=function(){return new function(){}};this.pattern={observer:function(d){this.event=
d;this.g="aaa";this.db=[];this.register=function(g,h){this.event=d;this.Class=h;this.launch=g;return this.verify()?this.write():!0};this.verify=function(){return"function"===typeof this.launch?!0:!1};this.write=function(){var d={update:this.update,unregister:this.unregister.args(this.db.length)};this.db.push(this.launch);this.Class&&(this.Class.observer=d);delete this.event;delete this.Class;delete this.launch;return this.db.length-1};this.update=function(){var d=this.db.length;for(i=0;i<d;i++)if("function"==
typeof this.db[i])this.db[i]()};this.unregister=function(d){this.db[d]&&(this.db[d]=null)};this.expand(this)}};var f=function(d){for(var g=[],h=0;h<d.length;h++)g.push(d[h]);return g};this.tmp={rpc:{}};this.charset="utf-8";this.protoCore=function(){window.$=function(d){return"string"==typeof d?document.getElementById(d):d};window.$dce=function(d){return document.createElement(d)};window.$n=function(d){return"string"==typeof d?document.getElementsByName(d):d};Array.prototype.isArray=!0;Array.prototype.isObject=
!1;Array.prototype.onlyInt=function(){for(var d=[],g=0;g<this.length;g++)isNaN(this[g])||d.push(parseInt(this[g],10));return d};Array.prototype.inArray=function(d){for(var g=0;g<this.length;g++)if(this[g]===d)return!0;return!1};Array.prototype.fill=function(d,g,h){for(var b=0;b<g;b++)this.splice(d+b,0,h);return this};Array.prototype.toStr=Object.prototype.toStr=function(d){var g,h;h="{";for(var b in this)if(g=this[b],!d&&this.propertyIsEnumerable(b)||!0===d)switch(typeof g){case "object":h="undefined"!=
typeof g.childNodes?h+(b+":[DOM.Object],\n"):g.isArray||g.isObject?h+(b+":"+g.toStr(d)+",\n"):h+(b+": Element||Event,\n\n");break;case "string":h+=b+":'"+g+"',\n";break;case "function":h+=b+":FUNCTION,\n";break;default:h+=b+":"+g+",\n"}return h=h.substring(0,h.length-1)+"}"};Array.prototype.indexOf=function(d){for(var g=0;g<this.length;g++)if(this[g]==d)return g;return-1};Array.prototype.unique=function(){if(2>this.length)return this;var d=[],g,h=this.length;for(g=0;g<h;g++)0>d.indexOf(this[g])&&
d.push(this[g]);return d};Array.prototype.key=function(d){for(var g=0;g<this.length;g++)if(this[g]===d)return g;return!1};Array.prototype.random=function(d){var g=0,h=this.length;d?0<d?d%=h:(g=d,d=h+d%h):d=this.length;return this[Math.floor(d*Math.random()-g)]};Array.prototype.map=function(d){if("function"!==typeof d)return!1;for(var g=0,h=this.length,g=0;g<h;g++)d(this[g]);return!0};Array.prototype.shuffle=function(d){for(var g=this.length,h,b;g;)h=Math.floor(g--*Math.random()),b=d&&"undefined"!==
typeof this[g].shuffle?this[g].shuffle():this[g],this[g]=this[h],this[h]=b;return this};Array.prototype.evalScript=function(){this.map(function(d){d=(d.match(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/im)||["",""])[1];window.execScript?window.execScript(d||" "):window.setTimeout(d,0)});return!0};Array.prototype.clear=function(){return this.splice(0,this.length)};Array.prototype.copy=function(){return this.slice(0,this.length)};Array.prototype.insert=function(d,g){var h=this.copy(),g=!g||!1===g.isArray?
[g]:g;this.clear();for(var b=0;b<h.length;b++){if(b===d)for(var f=0;f<g.length;f++)this.push(g[f]);this.push(h[b])}return this};Array.prototype.toSelect=function(){for(var d=[],g=0;g<this.length;g++)d.push({value:g,text:this[g]});return d};Object.prototype.isObject=!0;Object.prototype.isArray=!1;Object.prototype.propertyIsEnumerable=function(d){return"undefined"===typeof Object.prototype[d]?!0:!1};Object.prototype.concat=function(d){for(var g in d)d.propertyIsEnumerable(g)&&(this[g]=d[g]);return this};
Object.prototype.get_by_key=function(d,g){var h=0,b;for(b in this)if(this.propertyIsEnumerable(b)){if(d===h)return g?b:this[b];h+=1}return!1};Object.prototype.isset_key=function(d){for(var g in this)if(this.propertyIsEnumerable(g)&&d===g)return!0;return!1};Object.prototype.setParent=function(d){for(var g in this)this.propertyIsEnumerable(g)&&"function"===typeof this[g]&&(this[g].prototype.parent=d||!1);return this};Object.prototype.isObjectStrict=function(){return this.appendChild?!1:!0};Object.prototype.expand=
function(d,g){var d=d||this,h;for(h in this)if(this.propertyIsEnumerable(h)&&("function"===typeof this[h]||!0===g&&"object"===typeof this[h]&&this[h].isObjectStrict()))try{this[h]="function"===typeof this[h]?this[h].extend(d):this[h].expand(d,g)}catch(b){this[h]=this[h]}return this};Function.prototype.isObject=!1;Function.prototype.isArray=!1;Function.prototype.extend=function(d){try{var g=this,h=f(arguments);h.splice(0,1);return function(){return g.apply(d,f(arguments).concat(h))}}catch(b){return this}};
Function.prototype.args=function(){var d=this,g=f(arguments);return function(){return d.apply(d,f(arguments).concat(g))}};String.prototype.isAlphaUS=function(){for(var d=this.split(""),g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_".split(""),h=0;h<d.length;h++)if(!g.inArray(d[h]))return!1;return!0};String.prototype.isString=!0;String.prototype.trim=function(){return this.replace(RegExp("^([\\s]+)|([\\s]+)$","gm"),"")};String.prototype.leftTrim=function(){return this.replace(RegExp("^[\\s]+",
"gm"),"")};String.prototype.rightTrim=function(){return this.replace(RegExp("[\\s]+$","gm"),"")};String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"")};String.prototype.escapeHTML=function(){var d=$dce("div"),g=document.createTextNode(this);d.appendChild(g);return d.innerHTML};String.prototype.unescapeHTML=function(){var d=$dce("div");d.innerHTML=this.trim();return d.childNodes[0]?d.childNodes[0].nodeValue:""};String.prototype.sReplace=function(d,g){return this.replace(RegExp(d||
"","g"),g||"")};String.prototype.camelize=function(){var d=this.split("-");if(1==d.length)return d[0];for(var g=0===this.indexOf("-")?d[0].charAt(0).toUpperCase()+d[0].substring(1):d[0],h=1,b=d.length;h<b;h++)var f=d[h],g=g+(f.charAt(0).toUpperCase()+f.substring(1));return g};String.prototype.toArray=function(){return this.split("")};String.prototype.extractScript=function(){return this.match(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)","img"))||[]};String.prototype.evalScript=function(){return(this.match(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)",
"img"))||[]).evalScript()};String.prototype.stripScript=function(){return this.replace(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)","img"),"")};"undefined"===typeof XMLSerializer&&(window.XMLSerializer=function(){this.toString=function(){return"[object XMLSerializer]"};this.serializeToString=function(d){return d.xml||d.outerHTML||"Error XMLSerializer"}})};this.loadMethods=function(d,g){for(var h=[],b,f=0;f<d.length;f++)d[f]&&(d[f].isArray?"function"==typeof d[f][0]&&(b=d[f][1]?d[f][1].isArray?
d[f][1]:[d[f][1]]:!1,b=!1===b?d[f][0].apply(g):d[f][0].apply(g,b),!0===d[f][2]&&h.push(b)):"function"==typeof d[f]&&d[f].apply(g));return 1==h.length?h[0]:h};this.checkBrowser=function(){var d=navigator.userAgent;this.browser={isIE:0<=d.indexOf("MSIE")?!0:!1,isNS:0<=d.indexOf("Netscape6/")?!0:!1,isFF:0<=d.indexOf("Firefox")?!0:!1,isSF:0<=d.indexOf("Safari")?!0:!1,isGK:0<=d.indexOf("Gecko")?!0:!1,isIphone:0<=d.indexOf("iPhone")?!0:!1,isOP:0<=d.indexOf("Opera")?!0:!1};this.browser.isIE=this.browser.isOP?
!1:this.browser.isIE;for(var g="MSIE Netscape/6 Firefox Safari Gecko Opera iPhone".split(" "),h=0;h<g.length;h++){var b=d.indexOf(g[h]);this.browser.version=d+"::::"+d.substr(b+g[h].length)}};this.mantis=function(){this.db=[];this.flush=function(){for(;0<this.db.length;)this.db[0]&&!0===this.db[0].isObject&&this.remove(this.db[0]._object_,this.db[0]._event_,this.db[0]._function_,this.db[0]._bumble_),this.db.splice(0,1)};this.add=function(d,g,h,b){h=h.isObject?this.parent.closure(h):h;d=this.parent.dom.element(d);
d.addEventListener?d.addEventListener(g,h,!0===b?!0:!1):d.attachEvent?d.attachEvent("on"+g,h):this.report("Event registration not supported");this.db.push({_object_:d,_event_:g,_function_:h,_bumble_:!0===b?!0:!1});return this.db.length-1};this.remove=function(d,g,h,b,f){h=h.isObject?this.parent.closure(h):h;d=this.parent.dom.element(d);d.removeEventListener?d.removeEventListener(g,h,!0===b?!0:!1):d.detachEvent&&d.detachEvent("on"+g,h);f&&(f==this.db.length-1?this.db.pop():this.db[f]=null)};this.removeFromUid=
function(d){if(this.db[d]){var g=this.db[d];this.remove(g._object_,g._event_,g._function_,g._bumble_,d)}};this.flushCollection=function(d){var g=d.length;for(i=0;i<g;i++)this.remove(this.db[d[i]]._object_,this.db[d[i]]._event_,this.db[d[i]]._function_,this.db[d[i]]._bumble_,d[i])};this.report=function(d){this.parent&&this.parent.report&&this.parent.report.add(d)};this.dom=function(d){return d.target||window.event.srcElement};this.Null=function(d){d.preventDefault&&d.preventDefault();d.returnValue=
!1};this.expand(this)};this.bitacora=function(){this.db=[];this.add=function(d){this.db.push(d)}};this.fix={memoryLeak:function(){this.event.add(window,"unload",this.event.flush)}};this.exec=function(d,g,h,b){return this.loadMethods([[d,g?g:null,h||!1]],b?b:this)};this.closure=function(d){var g=d.method,h=d.instance,b=d.args||"number"==typeof d.args&&0===d.args?d.args:!1,f=d.Function||!1,k=d.args_is_array||!1,q=d.event||!1,s=d.Return||!1;return function(d){var t=!1===b?!1:b.isArray&&!1===k?b:[b],
d=q?[d||window.event].concat(t):t;!1===f?g.apply(h,d||[null]):f.apply(f,d||[null]);return s}};this.PackageCore=function(d,g){this.parent=d||!1;this.db=g||!1;this.Load=function(h,d){this.options={zip:!1}.concat(d||{});if(2>arguments.length||!this.check())return!1;this.toLoad=(!0===this.options.Absolute?this.options.Path:h).split(",");if("module"===this.type&&(!0===this.options.zip||!0===this.parent.options.zip))for(var g=[],b=this.toLoad.length;0<b;b--)this.name=this.toLoad[this.toLoad.length-b],this.isset()||
(g.push(this.name),this.write(!1));else for(b=this.toLoad.length;0<b;b--)this.name=this.toLoad[this.toLoad.length-b],this.isset()||(this.src=this.source(),g=$dce("script"),this.parent.dom.capture("tag.head 0").appendChild(g),g.src=this.src,g.type="text/javascript",g.charset=this.parent.charset,"module"==this.type&&this.write(g));delete this.Class;delete this.file;delete this.info;delete this.path;delete this.toLoad;delete this.type;delete this.src;return!0};this.source=function(){return"module"==
this.type?this.path+"module."+this.name+".js":"file"==this.type?!0===this.options.Absolute?this.path:this.path+this.name+"/core/"+this.name+".js":!1};this.check=function(){if(!this.db||!this.options.Type)return!1;this.type=this.options.Type.toLowerCase();if("file"==this.type)return this.path=this.options.Path||this.parent.path_root,!0;if("module"==this.type){this.Class=this.options.Instance?this.options.Instance:this.options.Class?this.options.Class.prototype:!1;if(!1===this.Class||!this.Class.info)return!1;
this.Class.module||(this.Class.module={});this.path=this.options.Path||this.Class.info.base||!1;return!1===this.path?!1:!0}return!1};this.isset=function(){if("module"==this.type){for(var h=this.db.length;0<h;h--)if(this.db[this.db.length-h].name==this.Class.info.name){this.file=this.db[this.db.length-h];break}this.file||(this.db.push({name:this.Class.info.name,Class:this.Class,_Package_:[]}),this.file=this.db[this.db.length-1]);for(h=this.file._Package_.length;0<h;h--){var d=this.file._Package_[this.file._Package_.length-
h];if(d.name==this.name&&d.type==this.type)return!0}this.Class.module[this.name]=!0}return!1};this.write=function(h){this.file._Package_.push({type:this.type,loaded:!1,name:this.name,script:h,onLoad:this.options.onLoad||!1})};this.Public=function(h){if(!h||!h.info||!h.info.Class||!h.info.Name||!h.info.Type||!h.content)return!1;for(var d=this.db.length;0<d;d--)if(this.db[this.db.length-d].name==h.info.Class){this._file_=this.db[this.db.length-d];break}if(this._file_){if(this.tmpPgk=this._file_.Class.module[h.info.Name],
!0===this.tmpPgk){"function"==typeof h.content?h.content.prototype.parent=this._file_.Class:"object"==typeof h.content&&h.content.setParent(this._file_.Class);this._file_.Class.module[h.info.Name]=h.content;for(d=this._file_._Package_.length;0<d;d--){var g=this._file_._Package_[this._file_._Package_.length-d];if(g.name==h.info.Name&&g.type==h.info.Type){g.loaded=!0;this.parent.browser.isIE||this.parent.dom.remove(g.script);delete g.script;if(g.onLoad)g.onLoad();break}}delete this._file_}}else return!1;
return!0}};this.fileCore=function(){this.db=[]};this.extended={cookie:function(){this.set=function(d,g,h,b,f,k){var q=-1;"number"==typeof h&&0<=h&&(q=new Date,q.setTime(q.getTime()+864E5*h),q=q.toGMTString());g=escape(g);document.cookie=d+"="+g+";"+(-1!=q?" expires="+q+";":"")+(b?"path="+b:"")+(f?"; domain="+f:"")+(k?"; secure":"")};this.get=function(d){var g=document.cookie.lastIndexOf(d+"=");if(-1==g)return null;d=document.cookie.substring(g+d.length+1);g=d.indexOf(";");-1==g&&(g=d.length);d=d.substring(0,
g);return d=unescape(d)};this.del=function(d){this.set(d,"-",0)}},tools:function(){this.baseURL=function(){return window.location};this.path_root=function(d){if(this.parent.browser.isIE)return d+"../..";d=d.split("/");d.pop();d.pop();d.pop();return d.join("/")};this.baseJS=function(d){for(var g="",h=document.getElementsByTagName("script"),b=h.length-1;0<=b;b--)if(h[b].src&&-1!=h[b].src.indexOf(d)){g=h[b].src;g=g.substring(0,g.lastIndexOf("/"));this.parent.info.domBaseJS=h[b];break}return g+"/"};this.head=
function(){return document.getElementsByTagName("HTML")[0].getElementsByTagName("HEAD")[0]};this.createUID=function(){return Math.random()};this.expand(this)},D0M:function(){this.get_html=function(){return document.getElementsByTagName("html")[0]};this.get_doc=function(){var d=window.document;return!d.compatMode||"CSS1Compat"==d.compatMode?this.get_html():d.body};this.element=function(d){return!d?!1:"object"==typeof d?d:document.getElementById(d)?document.getElementById(d):!1};this.remove=function(d){var d=
d.isArray||d.isObject&&!d.appendChild?d:[d],g;for(g in d)if(d.propertyIsEnumerable(g))if(d[g].isObject&&!d[g].appendChild)this.remove(d[g]);else{var h=this.element(d[g]);h&&h.parentNode&&h.parentNode.removeChild(h)}return!0};this.automateDOMToCollection=function(d){return!d.isArray&&(d.isObject||this.parent.browser.isIE&&!d.isObject)||d.isArray?d:[d]};this.setStyle=function(d,g){for(var d=d.isArray?d:[d],h="width height left top right bottom margin marginLeft marginRight marginTop marginBottom marginLeftWidth marginRightWidth marginTopWidth marginBottomWidth padding paddingLeft paddingRight paddingTop paddingBottom paddingLeftWidth paddingRightWidth paddingTopWidth paddingBottomWidth borderLeftWidth borderRightWidth borderTopWidth borderBopttomWidth".split(" "),
b=0;b<d.length;b++){var f=this.element(d[b]);if(f)for(var k in g)if(g.propertyIsEnumerable(k)){var q="function"==typeof g[k]?g[k]():g[k];try{var q="undefined"!=typeof q?q:" ",s=k.camelize(),q=h.inArray(s)&&"number"===typeof q?q+"px":q;f.style[s]=q}catch(v){}}}};this.setProperties=function(d,g){for(var d=d.isArray?d:[d],h=0;h<d.length;h++){var b=this.element(d[h]);if(b)for(var f in g)if(g.propertyIsEnumerable(f)){var k=g[f];try{b[f]="undefined"!=typeof k?k:" "}catch(q){}}}};this.getStyle=function(d,
g){var h=this.element(d),b;if("string"==typeof g){var f=g.split(",");b=[];for(var k=0;k<f.length;k++){var q=f[k].camelize(),s=h.style[q];s||(document.defaultView&&document.defaultView.getComputedStyle?s=(s=document.defaultView.getComputedStyle(h,null))?s.getPropertyValue(q):null:h.currentStyle&&(s=h.currentStyle[q]));b.push("auto"==s?null:s)}b=2>b.length?b[0]:b}else if(g.isObject)for(k in b={},g)g.propertyIsEnumerable(k)&&(b[k]=this.getStyle(d,k));return b};this.position=function(d,g,h){var d=this.element(d),
b,f=d;if("absolute"==this.parent.dom.getStyle(d,"position"))b={x:parseInt(this.parent.dom.getStyle(d,"left"),10),y:parseInt(this.parent.dom.getStyle(d,"top"),10)};else{b={x:0,y:0};if(!d)return b;b.x=parseInt(d.offsetLeft,10);for(b.y=parseInt(d.offsetTop,10);d.offsetParent&&!(d=d.offsetParent,("string"==typeof h?h==d.id:h)&&("absolute"==this.parent.dom.getStyle(d,"position")||"relative"==this.parent.dom.getStyle(d,"position")));){var k=this.position(d,!1,h);b.x+=k.x;b.y+=k.y}}return!0===g?{x:b.x+parseInt(f.offsetWidth,
10),y:b.y+parseInt(f.offsetHeight,10)}:b};this.CollectionToArray=function(d){for(var b=[],h=0;h<d.length;h++)b.push(d[h]);return b};this.mouse=function(d){return{x:this.parent.browser.isIE?window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft:d.clientX+(window.scrollX||document.body.scrollLeft||0),y:this.parent.browser.isIE?window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop:d.clientY+(window.scrollY||document.body.scrollTop||0)}};this.opacity=
function(d,b){for(var d=d.isArray?d:[d],h=0;h<d.length;h++){var f=this.element(d[h]);this.parent.browser.isIE?this.setStyle(f,{filter:"alpha(opacity="+b+")"}):this.setStyle(f,{opacity:b/100})}return!0};this.getOpacity=function(d){var b,d=this.element(d);return(b=this.getStyle(d,"opacity"))?parseFloat(b):(b=(this.getStyle(d,"filter")||"").match(/alpha\(opacity=(.*)\)/))&&b[1]?parseFloat(b[1])/100:1};this.nullContextMenu=function(d){for(var d=d.isArray?d:[d],b=0;b<d.length;b++)d[b].oncontextmenu=function(){return!1}};
this.positionRange=function(d,b){for(var d=d.isArray?d:[d],h={},f=0;f<d.length;f++){var n=this.position(d[f],!1,b||!1);h.x1=!h.x1||n.x<h.x1?n.x:h.x1;h.y1=!h.y1||n.y<h.y1?n.y:h.y1;n=this.position(d[f],!0,b||!1);h.x2=!h.x2||n.x>h.x2?n.x:h.x2;h.y2=!h.y2||n.y>h.y2?n.y:h.y2}return h};this.positionRangeFix=function(b){for(var b=b.isArray?b:[b],g=0;g<b.length;g++){var h=parseInt(this.parent.dom.getStyle(b[g],"left"),10);parseInt(this.parent.dom.getStyle(b[g],"top"),10);this.parent.dom.setStyle(b[g],{left:h+
1})}return{}};this.capture=function(b){var b=b.trim().split(" "),g=b[0],g=g.split(".");if(2>g.length)return!1;var b=2>b.length?"0":b[b.length-1],h="*"===b?!0:!1,b=b.split(",").onlyInt().unique(),f=g[0];g.splice(0,1);g=g.join(".");switch(f){case "id":return $(g);case "name":f=document.getElementsByName(g);break;case "tag":f=document.getElementsByTagName(g);break;default:return!1}if(h)return this.CollectionToArray(f);if(0===b.length)return!1;if(1==b.length)return f[0];h=[].fill(0,b.length,!1);for(g=
0;g<f.length;g++)b.inArray(g)&&(h[b.key(g)]=f[g]);return h};this.bubble=function(b,g){g=g||window.event||!1;b=!0===b?!0:!1;if(!g)return!1;this.parent.browser.isIE?g.cancelBubble=!b:!1===b&&g.stopPropagation();return!0};this.loadJs=function(b){for(var g=document.getElementsByTagName("script"),h=0;h<g.length;h++)if(-1<g[h].src.indexOf(b))return!1;g=$dce("script");this.capture("tag.head 0").appendChild(g);g.src=b;g.type="text/javascript";g.charset=this.parent.charset;return!0};this.getPageScroll=function(){return[window.pageXOffset||
document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]};this.getPageSize=function(){var b,g;window.innerHeight&&window.scrollMaxY?(b=window.innerWidth+window.scrollMaxX,g=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(b=document.body.scrollWidth,g=document.body.scrollHeight):(b=document.body.offsetWidth,g=document.body.offsetHeight);var h,f;self.innerHeight?(h=document.documentElement.clientWidth?
document.documentElement.clientWidth:self.innerWidth,f=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(h=document.documentElement.clientWidth,f=document.documentElement.clientHeight):document.body&&(h=document.body.clientWidth,f=document.body.clientHeight);pageHeight=g<f?f:g;pageWidth=b<h?b:h;return[pageWidth,pageHeight]};this.serializer=this.parent.factory(function(b,g){this.DOM=b;this.serialized=(this.inObject=!0===g?!0:!1)?{}:"";this.parse=function(){};this.rake=
function(h){if(!h)return h;"object"===typeof h?this.serialized.concat(h):this.serialized+=h;return!0};this.form=function(){var h=this.DOM,b=[];b.push((new this.parent.dom.serializer(h.getElementsByTagName("input"),this.inObject)).input());b.push((new this.parent.dom.serializer(h.getElementsByTagName("select"),this.inObject)).select());b.push((new this.parent.dom.serializer(h.getElementsByTagName("textarea"),this.inObject)).textarea());for(h=0;h<b.length;h++)this.rake(b[h]);return this.serialized};
this.input=function(){for(var h=0;h<this.DOM.length;h++){var b=this.DOM[h];b.name&&(b="text"===b.type?b.name+"="+(b.value?escape(b.value):"")+"&":"radio"===b.type?!0===b.checked?b.name+"="+escape(b.value)+"&":"":"checkbox"===b.type?!0===b.checked?b.name+"="+escape(b.value)+"&":"":b.name+"="+(b.value?escape(b.value):"")+"&",this.rake(b))}return this.serialized};this.select=function(){for(var b=0;b<this.DOM.length;b++){var d=this.DOM[b];if(d.name)if(!0===d.multiple)for(var g=0;g<d.options.length;g++){if(d.options[g].selected){var f=
d.name+"="+escape(d.options[g].value)+"&";this.rake(f)}}else{try{f=d.name+"="+escape(d.options[d.options.selectedIndex].value)+"&"}catch(q){f=d.name+"=&"}this.rake(f)}}return this.serialized};this.textarea=function(){for(var b=0;b<this.DOM.length;b++){var d=this.DOM[b];d.name&&(d=d.name+"="+(d.value?escape(d.value):"")+"&",this.rake(d))}return this.serialized};this.expand(this);return this})}};this.iphoneBrowser=function(){this.make=function(){this.parent.event.add(window,"load",function(){document.body.orient=
"landscape";window.scrollTo(0,1)})}};return this};function get_xmlhttp(){try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP1")}catch(b){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){xmlhttp=!1}}!xmlhttp&&"undefined"!=typeof XMLHttpRequest&&(xmlhttp=new XMLHttpRequest);return xmlhttp}
function ajax_function(b,f,d,g){get_xmlhttp();var h;try{d&&(d="&"+encodeURI(d));g||(g="POST");data="function="+f+d;questionMark=1<b.split("?").length?"&":"?";var o;o=new leimnud.module.rpc.xmlhttp({url:b,async:!1,method:g,args:data});o.make();h=o.xmlhttp.responseText;o.xmlhttp.responseText.extractScript().evalScript();delete o}catch(n){alert("Error: "+n.message+var_dump(n))}return h}
function ajax_message(b,f,d,g,h){var o;o=get_xmlhttp();try{d&&(d="&"+encodeURI(d)),g||(g="POST"),data="function="+f+d,questionMark=1<b.split("?").length?"&":"?",o.open(g,b+("GET"===g?questionMark+data:""),!0),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&h&&h(o.responseText)},"POST"===g&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("GET"===g?null:data)}catch(n){alert("error"+n.message)}}
function ajax_post(b,f,d,g,h){var o;o=get_xmlhttp();try{if("object"===typeof f&&(f=ajax_getForm(f)),d||(d="POST"),"undefined"===typeof h&&(h=!1),data=f,questionMark=1<b.split("?").length?"&":"?","GET/POST"===d?o.open("POST",b+(1024>data.length?questionMark+data:""),h):o.open(d,b+("GET"===d?questionMark+data:""),h),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&g&&g(o.responseText)},("POST"===d||"GET/POST"===d)&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),
o.send("GET"===d?null:data),!h)return g&&g(o.responseText),o.responseText}catch(n){alert("Error: "+var_dump(n))}}
function ajax_getForm(b){for(var f="",d=0;d<b.length;d++)if(""!==f&&(f+="&"),"text"==b.elements[d].type)f+=b.elements[d].name+"="+encodeURIComponent(b.elements[d].value);else if("textarea"==b.elements[d].type)f+=b.elements[d].name+"="+encodeURIComponent(b.elements[d].value);else if("checkbox"==b.elements[d].type)f+=b.elements[d].name+"="+(b.elements[d].checked?"1":"0");else if("radio"==b.elements[d].type)!0==b.elements[d].checked&&(f+=b.elements[d].name+"="+b.elements[d].value);else if("select-multiple"==
b.elements[d].type)for(var g=0;g<b.elements[d].options.length;g++)0!==g&&(f+="&"),f+=b.elements[d].options[g].selected?b.elements[d].name.replace("[]","["+g+"]")+"="+encodeURIComponent(b.elements[d].options[g].value):"";else f+=b.elements[d].name+"="+encodeURIComponent(b.elements[d].value);return f}
function isNumber(b){var b=new String(b),f=!1,d,g;if(null==b||0==b.length)return 1==isNumber.arguments.length?!1:!0==isNumber.arguments[1];for(d=0;d<b.length;d++)if(g=b.charAt(d),0!=d)if("."==g){if(f)return!1;f=!0}else{if(!("0"<=g&&"9">=g))return!1}else if("."==g){if(f)return!1;f=!0}else if(!("0"<=g&&"9">=g&&"-"!=g||"+"==g))return!1;return!0}function roundNumber(b,f){"undefined"===typeof f&&(f=2);b=parseFloat(b||0);f=parseFloat(f||0);return Math.round(b*Math.pow(10,f))/Math.pow(10,f)}
function toMaskNumber(b,f){b=fix(b.toString(),f||2);b.split(".");for(var d=b.replace(/\D/g,"").replace(/^0*/,"").split("").reverse(),g="",h=0,o=0;o<d.length;o++)1==o?g="."+d[o]+g:1<o&&3<=h&&0==h%3?(g=d[o]+","+g,h+=1):(g=d[o]+g,1<o&&(h+=1));return g}function fix(b,f){var d=b.split("."),g="";return g=1==d.length?d[0]+"."+creaZero(f):d[1].length<=f?d[0]+"."+d[1]+creaZero(f-d[1].length):d[0]+"."+d[1].substr(0,f)}function creaZero(b){for(var f="",d=0;d<b;d++)f+="0";return f}
function toUnmaskNumber(b){for(var f="",b=new String(b),d=b.length,g=0,g=0;g<d;g++)","!=b.charAt(g)&&("$"!=b.charAt(g)&&" "!=b.charAt(g)&&"%"!=b.charAt(g))&&(f+=b.charAt(g));return parseFloat(f,2)}function compareDates(b,f,d){b=b.split("/");f=f.split("/");x=new Date(b[2],b[1],d?1:b[0]);y=new Date(f[2],f[1],d?1:f[0]);return 0>=x-y?!1:!0}
function diff_date(b,f){var d=b.split("-"),b=new Date;b.setDate(d[2]);b.setMonth(d[1]);b.setYear(d[0]);d=f.split("-");f=new Date;f.setDate(d[2]);f.setMonth(d[1]);f.setYear(d[0]);return Math.floor((b.getTime()-f.getTime())/864E5)}function getField(b,f){if(f){var d=document.getElementById(f);d||(d=document.getElementsByName(f))&&0<d.length&&(d=d[0]);return 0<d.length?d.elements["form["+b+"]"]:document.getElementById("form["+b+"]")}return document.getElementById("form["+b+"]")}
function getElementByName(b){b=document.getElementsByName(b);try{return 1===b.length?b[0]:0===b.length?b[0]:b}catch(f){}}var myDialog;
function commonDialog(b,f,d,g,h,o){myDialog=new leimnud.module.panel;myDialog.options={size:{w:400,h:200},position:{center:!0},title:f,control:{close:!1,roll:!1,drag:!0,resize:!1},fx:{blinkToFront:!1,opacity:!0,drag:!1,modal:!0},theme:"processmaker"};myDialog.make();switch(b){case "question":icon="question.gif";break;case "warning":icon="warning.gif";break;case "error":icon="error.gif";break;default:icon="information.gif"}b="<div><table border='0' width='100%' > <tr height='70'><td width='60' align='center' >"+
("<img src='/js/maborak/core/images/"+icon+"'></td><td >"+d+"</td></tr>");b+="<tr height='35' valign='bottom'><td colspan='2' align='center'> ";g.custom&&g.customText&&(b+="<input type='button' value='"+g.customText+"' onclick='myDialog.dialogCallback(4); ';> &nbsp; ");g.cancel&&(b+="<input type='button' value='Cancel' onclick='myDialog.dialogCallback(0);'> &nbsp; ");g.yes&&(b+="<input type='button' value=' Yes ' onclick='myDialog.dialogCallback(1);'> &nbsp; ");g.no&&(b+="<input type='button' value=' No ' onclick='myDialog.dialogCallback(2);'> &nbsp; ");
myDialog.addContent(b+"</td></tr></table>");myDialog.values=h;myDialog.dialogCallback=function(b){myDialog.remove();o&&o(b)}}function var_dump(b){var f,d;d="";if("object"==typeof b)for(f in b)"function"!==typeof b[f]&&(d+=f+"("+typeof b[f]+"):"+b[f]+"\n");else d=b;return d}var currentPopupWindow;
function popupWindow(b,f,d,g,h,o,n,k,q){k=!1===k?!1:!0;q=!1===q?!1:!0;currentPopupWindow=h=new leimnud.module.panel;h.options={size:{w:d,h:g},position:{center:!0},title:b,theme:"processmaker",control:{close:!0,roll:!1,drag:!0,resize:!1},fx:{blinkToFront:!0,opacity:!0,drag:!0,modal:k}};!0!==q&&(h.styles.fx.opacityModal.Static="0");h.make();h.loader.show();b=new leimnud.module.rpc.xmlhttp({url:f});b.callback=leimnud.closure({Function:function(b,h){h.addContent(b.xmlhttp.responseText);for(var d=h.elements.content.getElementsByTagName("SCRIPT"),
g=0;g<d.length;g++)try{d[g].innerHTML!==""&&(window.execScript?window.execScript(d[g].innerHTML,"javascript"):window.setTimeout(d[g].innerHTML,0))}catch(f){alert(f.description)}h.elements.content.style.padding="0px;";try{o&&h.resize({w:h.elements.content.childNodes[0].clientWidth+28});n&&h.resize({h:h.elements.content.childNodes[0].clientHeight+62})}catch(k){alert(_("ID_MSG_AJAX_FAILURE"))}delete newdiv;delete d;h.command(h.loader.hide)},args:[b,h]});b.make();delete h}var lastPopupWindow;
function popupWindowObject(b,f,d,g,h,o,n,k,q){k=!1===k?!1:!0;q=!1===q?!1:!0;lastPopupWindow=h=new leimnud.module.panel;h.options={size:{w:d,h:g},position:{center:!0},title:b,theme:"processmaker",control:{close:!0,roll:!1,drag:!0,resize:!1},fx:{blinkToFront:!0,opacity:!0,drag:!0,modal:k}};!0!==q&&(h.styles.fx.opacityModal.Static="0");h.make();h.loader.show();b=new leimnud.module.rpc.xmlhttp({url:f});b.callback=leimnud.closure({Function:function(b,h){h.addContent(b.xmlhttp.responseText);for(var d=h.elements.content.getElementsByTagName("SCRIPT"),
g=0;g<d.length;g++)try{d[g].innerHTML!==""&&(window.execScript?window.execScript(d[g].innerHTML,"javascript"):window.setTimeout(d[g].innerHTML,0))}catch(f){alert(f.description)}h.elements.content.style.padding="0px;";try{o&&h.resize({w:h.elements.content.childNodes[0].clientWidth+28});n&&h.resize({h:h.elements.content.childNodes[0].clientHeight+62})}catch(k){alert(_("ID_MSG_AJAX_FAILURE"))}delete newdiv;delete d;h.command(h.loader.hide)},args:[b,h]});b.make();return h}
function getAbsoluteLeft(b){for(oLeft=b.offsetLeft;null!=b.offsetParent;)oParent=b.offsetParent,oLeft+=oParent.offsetLeft,b=oParent;return oLeft}function getAbsoluteTop(b){for(oTop=b.offsetTop;null!=b.offsetParent;)oParent=b.offsetParent,oTop+=oParent.offsetTop,b=oParent;return oTop}
function showHideElement(b){b="object"==typeof b?b:document.getElementById(b);if("none"===b.style.display)switch(b.type){case "table":b.style.display="table";break;default:b.style.display=""}else b.style.display="none"}
function showHideSearch(b,f,d,g){var h=document.getElementById(b);if("none"===h.style.display)switch(g||(g=G_STRINGS.ID_CLOSE_SEARCH),f&&(f.innerHTML=g,f=document.getElementById(f.id+"[bullet]"),f.src="/images/bulletButtonDown.gif"),h.type){case "table":document.getElementById(b).style.display="table";break;default:document.getElementById(b).style.display=""}else d||(d=G_STRINGS.ID_OPEN_SEARCH),f&&(f.innerHTML=d,f=document.getElementById(f.id+"[bullet]"),f.src="/images/bulletButton.gif"),document.getElementById(b).style.display=
"none"}
function loadPage(b,f,d,g,h){b=new leimnud.module.rpc.xmlhttp({url:b});b.callback=leimnud.closure({Function:function(b,h){"undefined"===typeof h&&(h=createDiv(""));"undefined"!==typeof f&&(h.style.left=f);"undefined"!==typeof d&&(h.style.top=d);h.innerHTML=b.xmlhttp.responseText;for(var g=h.getElementsByTagName("SCRIPT"),q=0;q<g.length;q++)try{""!==g[q].innerHTML&&(window.execScript?window.execScript(g[q].innerHTML,"javascript"):window.setTimeout(g[q].innerHTML,0))}catch(s){alert(s.description)}delete h;delete g},
args:[b,h]});b.make()}function createDiv(b){var f=document.createElement("div");f.setAttribute("id",b);f.style.position="absolute";f.style.left=0;f.style.top=0;f.style.visibility="hidden";document.body.appendChild(f);return f}
function refillText(b,f,d){var g;g=get_xmlhttp();g.open("GET",f+"?"+d,!1);g.onreadystatechange=function(){if(1==g.readyState){var h=document.getElementById("form["+b+"]");isdefined(h)||(h=document.getElementById(b));h.value=""}else if(4==g.readyState)if(200==g.status){var d=g.responseXML;if(d&&(h=document.getElementById("form["+b+"]"),isdefined(h)||(h=document.getElementById(b)),d=d.getElementsByTagName("value"),d[0].firstChild&&"_vacio"!=d[0].firstChild.xml&&(h.value=d[0].firstChild.xml,"hidden"!=
h.type&&h.onchange)))h.onchange()}else window.alert("error-["+g.status+"]-"+g.responseText)};g.send(null)}
function refillCaption(b,f,d){var g;g=get_xmlhttp();g.open("GET",f+"?"+d,!1);g.onreadystatechange=function(){if(1==g.readyState){var h=document.getElementById("FLD_"+b);h.innerHTML=""}else if(4==g.readyState)if(200==g.status){var d=g.responseXML;d&&(h=document.getElementById("FLD_"+b),d=d.getElementsByTagName("value"),d[0].firstChild&&"_vacio"!=d[0].firstChild.xml&&(h.innerHTML=d[0].firstChild.xml))}else window.alert("error-["+g.status+"]-"+g.responseText)};g.send(null)}
function refillDropdown(b,f,d,g){var h;h=get_xmlhttp();h.open("GET",f+"?"+d,!1);h.onreadystatechange=function(){if(1==h.readyState)for(var d=document.getElementById("form["+b+"]");d.hasChildNodes();)d.removeChild(d.childNodes[0]);else if(4==h.readyState)if(200==h.status){var f=h.responseXML;if(f){d=document.getElementById("form["+b+"]");f=f.getElementsByTagName("item");itemsNumber=f.length;!0==g&&(itemsNumber=f.length-1);for(var k=0;k<itemsNumber;k++)d.options[d.length]=new Option(f[k].firstChild.xml,
f[k].attributes[0].value),!0==g&&d.options[d.length-1].value==f[f.length-1].firstChild.xml&&(d.options[k].selected=!0);d.onchange()}}else window.alert("error-["+h.status+"]-"+h.responseText)};h.send(null)}function iframe_get_xmlhttp(){try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP2")}catch(b){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){xmlhttp=!1}}!xmlhttp&&"undefined"!=typeof XMLHttpRequest&&(xmlhttp=new XMLHttpRequest);return xmlhttp}
function get_xmlhttp(){try{xmlhttp=!1,window.ActiveXObject&&(xmlhttp=new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){xmlhttp=!1}}!xmlhttp&&"undefined"!=typeof XMLHttpRequest&&(xmlhttp=new XMLHttpRequest);return xmlhttp}
function refillTextError(b,f,d,g){var h;h=get_xmlhttp();h.open("GET",d+"?"+g,!1);h.onreadystatechange=function(){if(1==h.readyState){var d=document.getElementById("form["+f+"]");d.value="";document.getElementById(b).innerHTML=""}else if(4==h.readyState)if(200==h.status){var g=h.responseXML;if(g){var d=document.getElementById("form["+f+"]"),k=g.getElementsByTagName("value");d.value=k[0].firstChild.xml;k=g.getElementsByTagName("message");k[0].firstChild&&(document.getElementById(b).innerHTML="<b>"+
k[0].firstChild.xml+"</b>")}}else window.alert("error-["+h.status+"]-"+h.responseText)};h.send(null)}function iframe_get_xmlhttp(){try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP5")}catch(b){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){xmlhttp=!1}}!xmlhttp&&"undefined"!=typeof XMLHttpRequest&&(xmlhttp=new XMLHttpRequest);return xmlhttp}
function iframe_ajax_init(b,f,d,g){var h;h=iframe_get_xmlhttp();h.open("GET",b+"?"+d,!0);h.onreadystatechange=function(){1==h.readyState?(document.getElementById(f).style.display="",document.getElementById(f).innerHTML="..."):4==h.readyState&&(200==h.status?(document.getElementById(f).innerHTML=h.responseText,""!=g&&g()):window.alert("error-["+h.status+"]-"+h.responseText))};h.send(null)}
function iframe_ajax_init_2(b,f,d,g){var h;h=iframe_get_xmlhttp();h.open("GET",b+"?"+d,!0);h.onreadystatechange=function(){1==h.readyState?(f.style.display="",f.innerHTML="..."):4==h.readyState&&(200==h.status?(f.innerHTML=h.responseText,""!=g&&g()):window.alert("error-["+h.status+"]-"+h.responseText))};h.send(null)}function myEmptyCallback(){}function disable(b){b.disabled=!0}function enable(b){b.disabled=!1}function disableById(b){obj=getField(b);obj.disabled=!0}
function enableById(b){obj=getField(b);obj.disabled=!1}function visible(b){b.style&&(b.style.visibility="visible")}function hidden(b){b.style&&(b.style.visibility="hidden")}function visibleById(b){obj=getField(b);obj.style.visibility="visible"}function hiddenById(b){obj=getField(b);obj.style.visibility="hidden"}function hiddenRowById(b){row="DIV_"+b+".style.visibility = 'hidden';";hiden="DIV_"+b+".style.display = 'none';";eval(row);eval(hiden)}
function visibleRowById(b){row="DIV_"+b+".style.visibility = 'visible';";block="DIV_"+b+".style.display = 'block';";eval(row);eval(block)}function setFocus(b){b.focus()}function setFocusById(b){obj=getField(b);setFocus(obj)}function submitForm(){document.forms[0].submit()}function changeValue(b,f){obj=getField(b);obj.value=f}function getValue(b){return b.value}function getValueById(b){obj=getField(b);return obj.value}
function removeCurrencySign(b){for(var f="",b=new String(b),d=b.length,g=0,g=0;!(g>=d);g++)","!=b.charAt(g)&&("$"!=b.charAt(g)&&" "!=b.charAt(g))&&(f+=b.charAt(g));return f}function removePercentageSign(b){for(var f="",b=new String(b),d=b.length,g=0,g=0;!(g>=d);g++)","!=b.charAt(g)&&("%"!=b.charAt(g)&&" "!=b.charAt(g))&&(f+=b.charAt(g));return f}function toReadOnly(b){b&&(b.readOnly="readOnly",b.style.background="#CCCCCC")}
function toReadOnlyById(b){if(obj=getField(b))obj.readOnly="readOnly",obj.style.background="#CCCCCC"}function getGridField(b,f,d){return obj=document.getElementById("form["+b+"]["+f+"]["+d+"]")}function getGridValueById(b,f,d){return(obj=getGridField(b,f,d))?obj.value:""}function Number_Rows_Grid(b,f){Number_Rows=1;if(getGridField(b,Number_Rows,f)){for(Number_Rows=0;getGridField(b,Number_Rows+1,f);)Number_Rows++;return Number_Rows}return 0}
function attachFunctionEventOnChange(b,f){b.oncustomize=f}function attachFunctionEventOnChangeById(b,f){Obj=getField(b);Obj.oncustomize=f}function attachFunctionEventOnKeypress(b,f){b.attachEvent("onkeypress",f)}function attachFunctionEventOnKeypressById(b,f){Obj=getField(b);Obj.attachEvent("onkeypress",f)}function unselectOptions(b){if(b=document.getElementById("form["+b+"]"))if(b=b.getElementsByTagName("input"))for(var f=0;f<b.length;++f)b[f].checked=!1}
function validDate(b,f){var d=b.split("-"),g=d[0],h=d[1],d=d[2],o,n,k;4==g.length&&!k&&(k=g);2==g.length&&(0<g&&12>=g&&!n?n=g:0<g&&31>=g&&!o?o=g:k=g);4==h.length&&!k&&(k=h);2==h.length&&(0<h&&12>=h&&!n?n=h:0<h&&31>=h&&!o?o=h:k=h);4==d.length&&!k&&(k=d);2==d.length&&(0<d&&12>=d&&!n?n=d:0<d&&31>=d&&!o?o=d:k=d);if(!k||!n||!o)return!1;if(f||"true"==f)if(0==k||0==n||0==o)return!1;return 2==n&&29<o||2!=n&&(13>n&&0<n)&&30<o?!1:!0}
function globalEval(b){""!==b&&(window.execScript?window.execScript(b,"javascript"):window.setTimeout(b,0))}function switchImage(b,f,d){b&&""!==d&&(b.src=b.src.substr(b.src.length-f.length,f.length)===f?d:f)}function MM_preloadImages(){var b=document;if(b.images){b.MM_p||(b.MM_p=[]);var f,d=b.MM_p.length,g=MM_preloadImages.arguments;for(f=0;f<g.length;f++)0!=g[f].indexOf("#")&&(b.MM_p[d]=new Image,b.MM_p[d++].src=g[f])}}function backImage(b,f){b.style.background=f}
var lc=!1,sh=function(b,f){var d=b.nextSibling.nextSibling?b.nextSibling.nextSibling:b.nextSibling;lc&&lc.c!=f&&(lc.d.style.display="none",lc.a.style.color="#666");lc={d:d,c:f,a:b};b.style.color=""==d.style.display||"none"==d.style.display?"black":"#666";d.style.display=!d.style.display||"none"==d.style.display?"block":"none"};
function dynaformSetFocus(){var b=document.getElementsByTagName("input");if(0<b.length)for(i in b){if(type=b[i].type,"text"==type||"radio"==type||"checkbox"==type||"file"==type||"password"==type){try{b[i].focus()}catch(f){}break}}else 0<document.getElementsByTagName("textarea").length&&b[0].focus();return!1}
function idSet(b){var f=document.getElementsByTagName("input");if(0<f.length)for(i in f){id=f[i].id;if(id=="form["+b+"_label]")var d=f[i].value.trim()?f[i].value:"Empty";if(id=="form["+b+"]")try{"Empty"!=d?f[i].value||(f[i].value=d):f[i].value=""}catch(g){}}return!1}
function htmlentities(b,f,d,g){var h=get_html_translation_table("HTML_ENTITIES",f),o="",b=null==b?"":b+"";if(!h)return!1;f&&"ENT_QUOTES"===f&&(h["'"]="&#039;");if(g||null==g)for(o in h)h.hasOwnProperty(o)&&(b=b.split(o).join(h[o]));else b=b.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(b,d,g){for(o in h)h.hasOwnProperty(o)&&(d=d.split(o).join(h[o]));return d+g});return b.toString()}
function utf8_encode(b){var f="",d,g,h=0;d=g=0;for(var h=b.length,o=0;o<h;o++){var n=b.charCodeAt(o),k=null;128>n?g++:k=127<n&&2048>n?String.fromCharCode(n>>6|192)+String.fromCharCode(n&63|128):String.fromCharCode(n>>12|224)+String.fromCharCode(n>>6&63|128)+String.fromCharCode(n&63|128);null!==k&&(g>d&&(f+=b.slice(d,g)),f+=k,d=g=o+1)}g>d&&(f+=b.slice(d,h));return f}
function base64_encode(b){var f,d,g,h,o=0,n=0,k="",k=[];if(!b)return b;b=utf8_encode(b+"");do f=b.charCodeAt(o++),d=b.charCodeAt(o++),g=b.charCodeAt(o++),h=f<<16|d<<8|g,f=h>>18&63,d=h>>12&63,g=h>>6&63,h&=63,k[n++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h);
while(o<b.length);k=k.join("");switch(b.length%3){case 1:k=k.slice(0,-2)+"==";break;case 2:k=k.slice(0,-1)+"="}return k}
function get_html_translation_table(b,f){var d={},g={},h,o={},n={},k={},q={};o[0]="HTML_SPECIALCHARS";o[1]="HTML_ENTITIES";n[0]="ENT_NOQUOTES";n[2]="ENT_COMPAT";n[3]="ENT_QUOTES";k=!isNaN(b)?o[b]:b?b.toUpperCase():"HTML_SPECIALCHARS";q=!isNaN(f)?n[f]:f?f.toUpperCase():"ENT_COMPAT";if("HTML_SPECIALCHARS"!==k&&"HTML_ENTITIES"!==k)throw Error("Table: "+k+" not supported");d["38"]="&amp;";"HTML_ENTITIES"===k&&(d["160"]="&nbsp;",d["161"]="&iexcl;",d["162"]="&cent;",d["163"]="&pound;",d["164"]="&curren;",
d["165"]="&yen;",d["166"]="&brvbar;",d["167"]="&sect;",d["168"]="&uml;",d["169"]="&copy;",d["170"]="&ordf;",d["171"]="&laquo;",d["172"]="&not;",d["173"]="&shy;",d["174"]="&reg;",d["175"]="&macr;",d["176"]="&deg;",d["177"]="&plusmn;",d["178"]="&sup2;",d["179"]="&sup3;",d["180"]="&acute;",d["181"]="&micro;",d["182"]="&para;",d["183"]="&middot;",d["184"]="&cedil;",d["185"]="&sup1;",d["186"]="&ordm;",d["187"]="&raquo;",d["188"]="&frac14;",d["189"]="&frac12;",d["190"]="&frac34;",d["191"]="&iquest;",d["192"]=
"&Agrave;",d["193"]="&Aacute;",d["194"]="&Acirc;",d["195"]="&Atilde;",d["196"]="&Auml;",d["197"]="&Aring;",d["198"]="&AElig;",d["199"]="&Ccedil;",d["200"]="&Egrave;",d["201"]="&Eacute;",d["202"]="&Ecirc;",d["203"]="&Euml;",d["204"]="&Igrave;",d["205"]="&Iacute;",d["206"]="&Icirc;",d["207"]="&Iuml;",d["208"]="&ETH;",d["209"]="&Ntilde;",d["210"]="&Ograve;",d["211"]="&Oacute;",d["212"]="&Ocirc;",d["213"]="&Otilde;",d["214"]="&Ouml;",d["215"]="&times;",d["216"]="&Oslash;",d["217"]="&Ugrave;",d["218"]=
"&Uacute;",d["219"]="&Ucirc;",d["220"]="&Uuml;",d["221"]="&Yacute;",d["222"]="&THORN;",d["223"]="&szlig;",d["224"]="&agrave;",d["225"]="&aacute;",d["226"]="&acirc;",d["227"]="&atilde;",d["228"]="&auml;",d["229"]="&aring;",d["230"]="&aelig;",d["231"]="&ccedil;",d["232"]="&egrave;",d["233"]="&eacute;",d["234"]="&ecirc;",d["235"]="&euml;",d["236"]="&igrave;",d["237"]="&iacute;",d["238"]="&icirc;",d["239"]="&iuml;",d["240"]="&eth;",d["241"]="&ntilde;",d["242"]="&ograve;",d["243"]="&oacute;",d["244"]=
"&ocirc;",d["245"]="&otilde;",d["246"]="&ouml;",d["247"]="&divide;",d["248"]="&oslash;",d["249"]="&ugrave;",d["250"]="&uacute;",d["251"]="&ucirc;",d["252"]="&uuml;",d["253"]="&yacute;",d["254"]="&thorn;",d["255"]="&yuml;");"ENT_NOQUOTES"!==q&&(d["34"]="&quot;");"ENT_QUOTES"===q&&(d["39"]="&#39;");d["60"]="&lt;";d["62"]="&gt;";for(h in d)d.hasOwnProperty(h)&&(g[String.fromCharCode(h)]=d[h]);return g}
function stripslashes(b){return(b+"").replace(/\\(.?)/g,function(b,d){switch(d){case "\\":return"\\";case "0":return"\x00";case "":return"";default:return d}})}function addslashes(b){return(b+"").replace(/([\\"'])/g,"\\$1").replace(/\u0000/g,"\\0")}function setNestedProperty(b,f,d){for(var g=0;g<f.length;g++){if(g==f.length-1)return b[f[g]]=d,!1;b=b[f[g]]}}
function getBrowserClient(){var b=["opera","msie","firefox","opera","safari"],f=navigator.userAgent.toLowerCase();sBrowser="";for(var d=0;d<b.length;d++)if(""==sBrowser&&-1!=f.indexOf(b[d]))return sBrowser=b[d],sVersion=String(parseFloat(f.substr(f.indexOf(b[d])+b[d].length+1))),{name:sBrowser,browser:sBrowser,version:sVersion};return!1}var _BROWSER=getBrowserClient();
function createCookie(b,f,d){if(d){var g=new Date;g.setTime(g.getTime()+864E5*d);d="; expires="+g.toGMTString()}else d="";document.cookie=b+"="+f+d+"; path=/"}function readCookie(b){for(var f=document.cookie.split(";"),b=b+"=",d=0;d<f.length;d++){for(var g=f[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(b))return g.substring(b.length,g.length)}return null}function eraseCookie(b){createCookie(b,"",-1)}function highlightRow(b,f){b.style.background=f}
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};function clearCalendar(b){document.getElementById(b).value="";document.getElementById(b+"[div]").innerHTML="";setTimeout("enableCalendar()",350)}function lockCalendar(){G_CALENDAR_MEM_OFFSET="lock"}function enableCalendar(){G_CALENDAR_MEM_OFFSET="enable"}
function parseDateFromMask(b,f){result=f;result=result.replace("Y",b.year);year=new String(b.year);result=result.replace("y",year.substr(2,3));result=result.replace("m",b.month);result=result.replace("d",b.day);result=result.replace("h",b.hour);return result=result.replace("i",b.minute)}Array.prototype.walk=function(b){for(var f=0,d=!1;f<this.length&&!d;f++)d=b(this[f],f);return this.length==f?!1:f-1};
Array.prototype.find=function(b){var f=this.walk(function(d){if(d==b)return!0});return this[f]==b?f:-1};Array.prototype.drop=function(b){this.splice(b,1)};Array.prototype.deleteByValue=function(b){b=this.find(b);this.drop(b)};function Timer(b,f){setTimeout(b,1E3*f)}function PMOS_TemporalMessage(b){fade("temporalMessageTD","inOut");"undefined"!=typeof b&&Timer(function(){try{document.getElementById("temporalMessageTD").style.display="none"}catch(b){}},b)}
function msgBox(b,f,d,g){acceptEv="undefined"!=typeof d?d:!1;cancelEv="undefined"!=typeof g?g:!1;switch("undefined"!=typeof f?f:"info"){case "alert":(new leimnud.module.app.alert).make({label:b,width:350,action:function(){acceptEv&&setTimeout(acceptEv,1)}.extend(this)});break;case "info":(new leimnud.module.app.info).make({label:b,width:350,action:function(){acceptEv&&setTimeout(acceptEv,1)}.extend(this)});break;case "confirm":cancelEv?(new leimnud.module.app.confirm).make({label:b,action:function(){acceptEv&&
setTimeout(acceptEv,0)}.extend(this),cancel:function(){setTimeout(cancelEv,1)}.extend(this)}):(new leimnud.module.app.confirm).make({label:b,action:function(){acceptEv&&setTimeout(acceptEv,1)}.extend(this)})}}function executeEvent(b,f){switch(f){case "click":if(document.getElementById(b).checked=!0,document.getElementById(b).onclick)try{document.getElementById(b).onclick()}catch(d){}}}
function getClientWindowSize(){var b=[1024,768];if("undefined"!=typeof window.innerWidth)b=[window.innerWidth,window.innerHeight];else if("undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth)b=[document.documentElement.clientWidth,document.documentElement.clientHeight];else{var f=document.getElementsByTagName("body");"undefined"!=typeof f&&("undefined"!=typeof f[0]&&"undefined"!=typeof f[0].clientWidth)&&(b=
[document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0].clientHeight])}return{width:b[0],height:b[1]}}function popUp(b,f,d,g,h,o){window.open(b,"","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=1,resizable="+o+",width="+f+",height="+d+",left = "+g+",top = "+h+"")}function XHRequest(){return new leimnud.module.rpc.xmlhttp}
function removeValue(b){document.getElementById("form["+b+"]")?document.getElementById("form["+b+"]").value="":document.getElementById(b)&&(document.getElementById(b).value="");fireEvent(document.getElementById(b),"change")}
function datePicker4(b,f,d,g,h,o){"false"==o&&(o=!1);Calendar.setup({inputField:f,dateFormat:d,trigger:f+"[btn]",bottomBar:!0,min:g,max:h,animation:"msie"==_BROWSER.name?!1:!0,showTime:o,opacity:1,onSelect:function(){this.hide();fireEvent(document.getElementById(f),"change")}})}function fireEvent(b,f){if(document.createEventObject){var d=document.createEventObject();return b.fireEvent("on"+f,d)}d=document.createEvent("HTMLEvents");d.initEvent(f,!0,!0);return!b.dispatchEvent(d)}
function elementAttributesNS(b,f){this.__namespaceRegexps||(this.__namespaceRegexps={});var d=this.__namespaceRegexps[f];d||(this.__namespaceRegexps[f]=d=f?eval("/^"+f+":(.+)/"):/^([^:]*)$/);for(var g={},h=b.attributes,o=h.length,n=0;n<o;n++){var k=h[n].name.match(d);k&&(g[k[1]]=h[n].value)}return g}
function _(){var b=_.arguments,f=b.length;if("undefined"!=typeof TRANSLATIONS&&TRANSLATIONS)if("undefined"!=typeof TRANSLATIONS[b[0]])if(1<f){trn=TRANSLATIONS[b[0]];for(i=1;i<b.length;i++)trn=trn.replace("{"+(i-1)+"}",b[i])}else trn=TRANSLATIONS[b[0]];else trn="**"+b[0]+"**";else PMExt.error("Processmaker JS Core Error","The TRANSLATIONS global object is not loaded!"),trn="";return trn}function stringReplace(b,f,d){b=eval("/"+b+"/g");return d.replace(b,f)}
var mb_strlen=function(b){for(var f=0,d=0;d<b.length;d++)f+=0>b.charCodeAt(d)||255<b.charCodeAt(d)?2:1;return f},stripNonNumeric=function(b){for(var b=b+"",f=/^\d|\.|-$/,d="",g=0;g<b.length;g++)f.test(b.charAt(g))&&("."==b.charAt(g)&&-1!=d.indexOf(".")||"-"==b.charAt(g)&&0!=d.length||(d+=b.charAt(g)));return d},TimeToFade=1E3;
function fade(b,f){var f="undefined"!=typeof f?!0:!1,d=document.getElementById(b);null!=d&&((null==d.FadeState&&(d.FadeState=null==d.style.opacity||""==d.style.opacity||"1"==d.style.opacity?2:-2),1==d.FadeState||-1==d.FadeState)?(d.FadeState=1==d.FadeState?-1:1,d.FadeTimeLeft=TimeToFade-d.FadeTimeLeft):(d.FadeState=2==d.FadeState?-1:1,d.FadeTimeLeft=TimeToFade,f?setTimeout("animateFadeInOut("+(new Date).getTime()+",'"+b+"')",33):setTimeout("animateFade("+(new Date).getTime()+",'"+b+"')",33)))}
function animateFade(b,f){var d=(new Date).getTime(),g=d-b,h=document.getElementById(f);h.FadeTimeLeft<=g?(h.style.opacity=1==h.FadeState?"1":"0",h.style.filter="alpha(opacity = "+(1==h.FadeState?"100":"0")+")",h.FadeState=1==h.FadeState?2:-2):(h.FadeTimeLeft-=g,g=h.FadeTimeLeft/TimeToFade,1==h.FadeState&&(g=1-g),h.style.opacity=g,h.style.filter="alpha(opacity = "+100*g+")",setTimeout("animateFade("+d+",'"+f+"')",33))}
function animateFadeInOut(b,f){var d=(new Date).getTime(),g=d-b,h=document.getElementById(f);h.FadeTimeLeft<=g?(h.style.opacity=1==h.FadeState?"1":"0",h.style.filter="alpha(opacity = "+(1==h.FadeState?"100":"0")+")",h.FadeState=1==h.FadeState?2:-2,fade(f)):(h.FadeTimeLeft-=g,g=h.FadeTimeLeft/TimeToFade,1==h.FadeState&&(g=1-g),h.style.opacity=g,h.style.filter="alpha(opacity = "+100*g+")",setTimeout("animateFadeInOut("+d+",'"+f+"')",33))}
var Effect=function(b){this.max=255;this.min=100;this.incrementor=1;this.element="undefined"!=typeof b?b:"text";this.b=this.g=this.r=this.max;this.iTarget=this.target="";switch(this.element){case "text":this.target="color";this.iTarget="this.max-";break;case "background":this.iTarget="",this.target="backgroundColor"}this.setElement=function(b){this.element=b;switch(this.element){case "text":this.target="color";this.iTarget="this.max-";break;case "background":this.iTarget="",this.target="backgroundColor"}};
this.setMin=function(b){this.min=b};this.setMax=function(b){this.max=b};this.fadeIn=function(b){variation=-1;increment=variation*this.incrementor;eval("obj.style."+this.target+'="RGB("+('+this.iTarget+'this.r)+","+('+this.iTarget+'this.g)+","+('+this.iTarget+'this.b)+")"');this.r+=increment;this.b+=increment;this.g+=increment;eso=b;elincrement=variation;this.r>this.min&&this.r<this.max?seguir=window.setTimeout("oEffect.fadeIn(eso,elincrement)",10):(this.r-=increment,this.g-=increment,this.b-=increment)};
this.fadeOut=function(b){variation=1;increment=variation*this.incrementor;eval("obj.style."+this.target+'="RGB("+('+this.iTarget+'this.r)+","+('+this.iTarget+'this.g)+","+('+this.iTarget+'this.b)+")"');this.r+=increment;this.b+=increment;this.g+=increment;eso=b;elincrement=variation;this.r>this.min&&this.r<this.max?seguir=window.setTimeout("oEffect.fadeOut(eso,elincrement)",10):(this.r-=increment,this.g-=increment,this.b-=increment)};this.fade=function(b){variation=-1;increment=variation*this.incrementor;
eval("obj.style."+this.target+'="RGB("+('+this.iTarget+'this.r)+","+('+this.iTarget+'this.g)+","+('+this.iTarget+'this.b)+")"');this.r+=increment;this.b+=increment;this.g+=increment;eso=b;elincrement=variation;this.r>this.min&&this.r<this.max?seguir=window.setTimeout("oEffect.fade(eso,elincrement)",10):(this.r-=increment,this.g-=increment,this.b-=increment,setTimeout("oEffect.fadeOut(document.getElementById('"+b.id+"'))",0))}},oEffect=new Effect;
function WebResource(b,f,d){var g;g=get_xmlhttp();var h;try{d||(d="POST");data=f=""!=f?f+("&rand="+Math.random()):"rand="+Math.random();g.open(d,b+("GET"===d?"?"+data:""),!1);"POST"===d&&g.setRequestHeader("Content-Type","application/x-www-form-urlencoded");g.send("GET"===d?null:data);var o=g.getResponseHeader("Content-Type"),n=/\w+\/\w+/.exec(o),o=n?n[0]:""}catch(k){alert("error"+k.message)}switch(o){case "text/json":try{eval("response="+g.responseText+";");break}catch(q){}G.alert('<textarea style="width:100%;" rows="9">'+
g.responseText+"</textarea>");return;case "text/javascript":window.execScript?window.execScript(g.responseText,"javascript"):window.setTimeout(g.responseText,0);break;case "text/html":h=$dce("div"),h.innerHTML=g.responseText}return h}function __wrCall(b,f,d){for(var g=[],h=0;h<d.length;h++)g.push(d[h]);return WebResource(b,"function="+f+"&parameters="+encodeURIComponent(g.toJSONString()))}
Object.prototype.toJSONString||(Array.prototype.toJSONString=function(){function b(b){d&&f.push(",");f.push(b);d=!0}var f=["["],d,g,h=this.length,o;for(g=0;g<h;g+=1)switch(o=this[g],typeof o){case "undefined":case "function":case "unknown":break;case "object":o?"function"===typeof o.toJSONString&&b(o.toJSONString()):b("null");break;default:b(o.toJSONString())}f.push("]");return f.join("")},Boolean.prototype.toJSONString=function(){return String(this)},Date.prototype.toJSONString=function(){function b(b){return 10>
b?"0"+b:b}return'"'+this.getFullYear()+"-"+b(this.getMonth()+1)+"-"+b(this.getDate())+"T"+b(this.getHours())+":"+b(this.getMinutes())+":"+b(this.getSeconds())+'"'},Number.prototype.toJSONString=function(){return isFinite(this)?String(this):"null"},Object.prototype.toJSONString=function(){function b(b){d&&f.push(",");f.push(g.toJSONString(),":",b);d=!0}var f=["{"],d,g,h;for(g in this)if(this.hasOwnProperty(g))switch(h=this[g],typeof h){case "undefined":case "function":case "unknown":break;case "object":h?
"function"===typeof h.toJSONString&&b(h.toJSONString()):b("null");break;default:b(h.toJSONString())}f.push("}");return f.join("")},function(b){var f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.parseJSON=function(b){try{if(/^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/.test(this)){var g=eval("("+this+")");if("function"===typeof b)var h=function(g,f){if(f&&"object"===typeof f)for(var o in f)f.hasOwnProperty(o)&&(f[o]=h(o,f[o]));return b(g,f)},g=h("",
g);return g}}catch(f){}return this};b.toJSONString=function(){return/["\\\x00-\x1f]/.test(this)?'"'+this.replace(/([\x00-\x1f\\"])/g,function(b,g){var h=f[g];if(h)return h;h=g.charCodeAt();return"\\u00"+Math.floor(h/16).toString(16)+(h%16).toString(16)})+'"':'"'+this+'"'}}(String.prototype));
String.prototype.trim||(String.prototype.trim=function(){var b=this;for(i=0;i<b.length;)if(b.charAt(i)==" ")b=b.substr(i+1,b.length);else break;for(i=b.length-1;i>=0;i=b.length-1)if(b.charAt(i)==" ")b=b.substr(0,i);else break;return b.toString()});
function DVEditor(b,f,d,g,h){var o=this,n=$dce("iframe");n.style.width="100%";n.style.height=g;n.style.margin="0px";n.style.padding="0px";n.style.border="none";b.appendChild(n);for(var b=document.childNodes[0].childNodes[0],g="",k=n.contentWindow?n.contentWindow.document:n.contentDocument,g=$dce("head"),q=0;q<b.childNodes.length;q++)try{b.childNodes[q].tagName==="LINK"&&(b.childNodes[q].type="text/css")&&g.appendChild(b.childNodes[q].cloneNode(true))}catch(s){}g=g.innerHTML;k.open();k.write("<html><head>"+
g+'</head><body style="height:100%;padding:0px;margin:0px;border:none;background-color:ThreeDHighlight;cursor:text;">'+f+"</body></html>");k.close();k.designMode="on";k.contentEditable=h=="edit"?true:false;this.doc=k;o.insertHTML=function(b){try{k.execCommand("inserthtml",false,b)}catch(h){}return false};o.command=function(){var b=this.getAttribute("name"),h=this.getAttribute("cmdValue")||null;h=="promptUser"&&(h=prompt(typeof G_STRINGS[this.getAttribute("promptText")]!=="undefined"?G_STRINGS[this.getAttribute("promptText")]:
this.getAttribute("promptText")));try{k.execCommand(b,false,h)}catch(d){}return false};o.loadToolBar=function(b){b=WebResource(b);n.parentNode.insertBefore(b,n);o.setToolBar(b)};o.setToolBar=function(b){for(var b=b.getElementsByTagName("area"),h=0;h<b.length;h++)b[h].onclick=o.command};o.getHTML=function(){var b="";try{b=k.getElementsByTagName("body")[0];b=b.innerHTML}catch(h){}return b};o.setHTML=function(b){try{f=k.getElementsByTagName("body")[0];f.innerHTML=b}catch(h){}return f};o.refreshHidden=
function(){if(d){var b=o.getHTML(),h=d.value!==b;d.value=b;if(h&&d.onchange)d.onchange()}};o.syncHidden=function(b){o.refreshHidden();setTimeout(b+".syncHidden('"+b+"')",500)}}
function G_Tree(){this.lastSelected=false;this.lastSelectedClassName="treeNode";var b=this;this.changeSign=function(b,d){for(var g=b.cells[0].childNodes,h=0;h<g.length;h++)if(g[h].nodeName==="SPAN")g[h].style.display=g[h].getAttribute("name")===d?"":"none"};this.getRowOf=function(b){for(;b.nodeName!="BODY";){if(b.getAttribute("name")&&b.getAttribute("name").substr(0,9)==="treeNode["){result=/^treeNode\[[^\]]+\]\[([^\]]+)\]$/.exec(b.getAttribute("name"));if(!(result&&result.length>=2))break;return b.parentNode}b=
b.parentNode}return false};this.contract=function(b){if(b=this.getRowOf(b)){var d=b.rowIndex;if(!(d+1>=b.parentNode.rows.length)){b.parentNode.rows[d+1].style.display="none";this.changeSign(b,"plus")}}};this.expand=function(b){if(b=this.getRowOf(b)){var d=b.rowIndex;if(!(d+1>=b.parentNode.rows.length)){b.parentNode.rows[d+1].style.display="";this.changeSign(b,"minus")}}};this.select=function(f){if(f=this.getRowOf(f)){if(b.lastSelected&&b.lastSelected.cells[1])b.lastSelected.cells[1].className=b.lastSelectedClassName;
b.lastSelected=f;b.lastSelectedClassName=b.lastSelected.cells[1].className;b.lastSelected.cells[1].className="treeNodeSelected"}};this.refresh=function(b,d){b.innerHTML=ajax_function(d,"","")}}var tree=new G_Tree;
Object.prototype.toJSONString||(Array.prototype.toJSONString=function(){function b(b){d&&f.push(",");f.push(b);d=true}var f=["["],d,g,h=this.length,o;for(g=0;g<h;g=g+1){o=this[g];switch(typeof o){case "undefined":case "function":case "unknown":break;case "object":o?typeof o.toJSONString==="function"&&b(o.toJSONString()):b("null");break;default:b(o.toJSONString())}}f.push("]");return f.join("")},Boolean.prototype.toJSONString=function(){return String(this)},Date.prototype.toJSONString=function(){function b(b){return b<
10?"0"+b:b}return'"'+this.getFullYear()+"-"+b(this.getMonth()+1)+"-"+b(this.getDate())+"T"+b(this.getHours())+":"+b(this.getMinutes())+":"+b(this.getSeconds())+'"'},Number.prototype.toJSONString=function(){return isFinite(this)?String(this):"null"},Object.prototype.toJSONString=function(){function b(b){d&&f.push(",");f.push(g.toJSONString(),":",b);d=true}var f=["{"],d,g,h;for(g in this)if(this.hasOwnProperty(g)){h=this[g];switch(typeof h){case "undefined":case "function":case "unknown":break;case "object":h?
typeof h.toJSONString==="function"&&b(h.toJSONString()):b("null");break;default:b(h.toJSONString())}}f.push("}");return f.join("")},function(b){var f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.parseJSON=function(b){try{if(/^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/.test(this)){var g=eval("("+this+")");if(typeof b==="function")var h=function(g,f){if(f&&typeof f==="object")for(var o in f)f.hasOwnProperty(o)&&(f[o]=h(o,f[o]));return b(g,f)},g=
h("",g);return g}}catch(f){}throw new SyntaxError("parseJSON");};b.toJSONString=function(){return/["\\\x00-\x1f]/.test(this)?'"'+this.replace(/([\x00-\x1f\\"])/g,function(b,g){var h=f[g];if(h)return h;h=g.charCodeAt();return"\\u00"+Math.floor(h/16).toString(16)+(h%16).toString(16)})+'"':'"'+this+'"'}}(String.prototype));
function G_Form(b,f){var d=this;this.info={name:"G_Form",version:"1.0"};this.formula="";if(this.element=b){this.id=f;this.aElements=[];this.ajaxServer="";this.getElementIdByName=function(b){if(b=="")return-1;var h;for(h=0;h<d.aElements.length;h++)if(d.aElements[h].name===b)return h;return-1};this.getElementByName=function(b){b=d.getElementIdByName(b);return b>=0?d.aElements[b]:null};this.hideGroup=function(b,h){typeof h==="undefined"&&(h=1);for(var f=0;f<d.aElements.length;f++)typeof d.aElements[f].group!==
"undefined"&&d.aElements[f].group==b&&d.aElements[f].hide(h)};this.showGroup=function(b,h){typeof h==="undefined"&&(h=1);for(var f=0;f<d.aElements.length;f++)typeof d.aElements[f].group!=="undefined"&&d.aElements[f].group==b&&d.aElements[f].show(h)};this.verifyRequiredFields=function(){for(var b=true,h=0;h<d.aElements.length;h++){var f=!d.aElements[h].required||d.aElements[h].required&&d.aElements[h].value()!=="",b=b&&f;f||d.aElements[h].highLight()}return b}}}
function G_Field(b,f,d){var g=this;this.form=b;this.element=f;this.name=d;this.dependentFields=[];this.dependentOf=[];this.hide=function(b){typeof b==="undefined"&&(b=1);for(var d=g.element,f=0;f<b;f++)d=d.parentNode;d.style.display="none"};this.show=function(b){typeof b==="undefined"&&(b=1);for(var d=g.element,f=0;f<b;f++)d=d.parentNode;d.style.display=""};this.setDependentFields=function(b){var d,b=b.indexOf(",")>-1?b.split(","):b.split("|");for(d=0;d<b.length;d++)if(g.form.getElementIdByName(b[d])>=
0){g.dependentFields[d]=g.form.getElementByName(b[d]);g.dependentFields[d].addDependencie(g)}};this.addDependencie=function(b){var d=false;for(i=0;i<g.dependentOf.length;i++)g.dependentOf[i]===b&&(d=true);d||(g.dependentOf[i]=b)};this.updateDepententFields=function(){if(g.dependentFields.length===0)return true;var b=[],d=[],f,k="",q=0;for(f in g.dependentFields)if(g.dependentFields[f].dependentOf)for(var s=0;s<g.dependentFields[f].dependentOf.length;s++){var v=g.dependentFields[f].dependentOf[s];
if(v.name.indexOf("][")>-1){var t=v.name.split("]["),k=t[0],q=t[1];fieldName=t[2];if(d.length>0){aux=d;aux.push("?");if(aux.join("*").indexOf(fieldName+"*")==-1){d.push(fieldName);eval("var oAux2 = {"+fieldName+":'"+v.value()+"'}");b=b.concat(w)}}else{d.push(fieldName);eval("var oAux2 = {"+fieldName+":'"+v.value()+"'}");b=b.concat(w)}}else{aux=d;aux.push("?");v=g.dependentFields[f].dependentOf[0];if(d.length>0){if(aux.join("*").indexOf(v.name+"*")==-1){d.push(v.name);b=b.concat(g.dependentFields[f].dependentOf)}}else{d.push(v.name);
b=b.concat(g.dependentFields[f].dependentOf)}}}b=new leimnud.module.rpc.xmlhttp({url:g.form.ajaxServer,async:false,method:"POST",args:"function=reloadField&form="+encodeURIComponent(g.form.id)+"&fields="+encodeURIComponent(b.toJSONString())+(k!=""?"&grid="+k:"")+(q>0?"&row="+q:"")});b.make();b=b.xmlhttp.responseText;if(b.substr(0,1)==="["){eval("newcont="+b+";");if(k=="")for(f=0;f<(void 0).length;f++){s=g.form.getElementIdByName((void 0)[f].name);g.form.aElements[s].setValue((void 0)[f].value);g.form.aElements[s].setContent((void 0)[f].content);
g.form.aElements[s].updateDepententFields()}else for(f=0;f<(void 0).length;f++)if(v=g.form.getElementByName(k)){var w=v.getElementByName(q,(void 0)[f].name);if(w){w.setValue((void 0)[f].value);w.setContent((void 0)[f].content);w.updateDepententFields()}}}else alert("Invalid response: "+b);return true};this.setValue=function(b){g.element.value=b};this.setContent=function(){};this.setAttributes=function(b){for(var d in b){d=="formula"&&b[d]&&sumaformu(this.element,b[d],b.mask);switch(typeof b[d]){case "string":case "int":case "boolean":if(d!=
"strTo")switch(true){case typeof g[d]==="undefined":case typeof g[d]==="object":case typeof g[d]==="function":case d==="isObject":case d==="isArray":break;default:g[d]=b[d]}else g[d]=b[d]}}};this.value=function(){return g.element.value};this.toJSONString=function(){return"{"+g.name+":"+g.element.value.toJSONString()+"}"};this.highLight=function(){try{G.highLight(g.element);if(G.autoFirstField){g.element.focus();G.autoFirstField=false;setTimeout("G.autoFirstField=true;",1E3)}}catch(b){}}}
function G_DropDown(b,f,d){var g=this;this.parent=G_Field;this.parent(b,f,d);this.setContent=function(b){var d=g.element,f=getBrowserClient();if(f.name=="msie"||f.name=="firefox"&&f.version<12)for(;d.options.length>1;)d.remove(0);else for(var k in d.options)d.options[k]=null;for(f=0;f<b.options.length;f++){k=$dce("OPTION");k.text=b.options[f].value;k.value=b.options[f].key;d.options[f]=k}};f&&leimnud.event.add(this.element,"change",this.updateDepententFields)}G_DropDown.prototype=new G_Field;
function G_Text(b,f,d){var g=this;this.mType="text";this.parent=G_Field;this.browser={};this.comma_separator=".";this.checkBrowser=function(){var b=navigator.userAgent,d=navigator.appName,g=""+parseFloat(navigator.appVersion),f=parseInt(navigator.appVersion,10),q;if((q=b.indexOf("Opera"))!=-1){d="Opera";g=b.substring(q+6);if((q=b.indexOf("Version"))!=-1)g=b.substring(q+8)}else if((q=b.indexOf("MSIE"))!=-1){d="Microsoft Internet Explorer";g=b.substring(q+5)}else if((q=b.indexOf("Chrome"))!=-1){d="Chrome";
g=b.substring(q+7)}else if((q=b.indexOf("Safari"))!=-1){d="Safari";g=b.substring(q+7);if((q=b.indexOf("Version"))!=-1)g=b.substring(q+8)}else if((q=b.indexOf("Firefox"))!=-1){d="Firefox";g=b.substring(q+8)}else if((f=b.lastIndexOf(" ")+1)<(q=b.lastIndexOf("/"))){d=b.substring(f,q);g=b.substring(q+1);if(d.toLowerCase()==d.toUpperCase())d=navigator.appName}if((b=g.indexOf(";"))!=-1)g=g.substring(0,b);if((b=g.indexOf(" "))!=-1)g=g.substring(0,b);f=parseInt(""+g,10);if(isNaN(f)){g=""+parseFloat(navigator.appVersion);
f=parseInt(navigator.appVersion,10)}this.browser={name:d,fullVersion:g,majorVersion:f,userAgent:navigator.userAgent}};this.parent(b,f,d);if(f)this.prev=f.value;this.validate="Any";this.mask="";this.required=false;this.formula="";this.key_Change=false;this.setContent=function(b){g.element.value="";if(b.options&&b.options[0])g.element.value=b.options[0].value};this.putFormatNumber=function(){};this.execFormula=function(){g.formula!=""&&leimnud.event.add(getField("faa"),"keypress",function(){alert(getField("faa").value)});
return false};this.value=function(){return g.element.value};this.getCursorPos=function(){var b=g.element;if(!document.selection)return b.selectionStart;var d=document.selection.createRange(),f=d.text;d.text=f+"#%~";d.moveStart("character",0-f.length-3);b=b.value;d.text=f;for(i=0;i<=b.length;i++)if(b.substring(i,i+3)=="#%~")return i-f.length};this.setSelectionRange=function(b,d){var f=g.element;if(f.createTextRange){f=f.createTextRange();f.collapse(true);f.moveEnd("character",d);f.moveStart("character",
b);f.select()}else if(f.setSelectionRange){f.focus();f.setSelectionRange(b,d)}};this.getCursorPosition=function(){if(navigator.appName=="Microsoft Internet Explorer"){var b=g.element;if(document.selection){b.focus();var d=document.selection.createRange();d.moveStart("character",-b.value.length);b.selectionEnd=d.text.length;d.setEndPoint("EndToStart",document.selection.createRange());b.selectionStart=d.text.length}return{selectionStart:b.selectionStart,selectionEnd:b.selectionEnd}}if(document.selection){var f=
g.element,d=document.selection.createRange(),b=d.text;d.text=b+"#%~";d.moveStart("character",0-b.length-3);f=f.value;d.text=b;for(i=0;i<=f.length;i++)if(f.substring(i,i+3)=="#%~"){d=i-b.length;return{selectionStart:d,selectionEnd:d+b.length}}}else{b={selectionStart:0,selectionEnd:0};b.selectionStart=g.element.selectionStart;b.selectionEnd=g.element.selectionEnd;return b}};this.removeMask=function(){value=g.element.value;cursor=g.getCursorPosition();chars=value.split("");newValue="";for(c=newCursor=
newCont=0;c<chars.length;c++)switch(chars[c]){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case g.comma_separator:newValue=newValue+chars[c];newCont++;c+1==cursor.selectionStart&&(newCursor=newCont);break;case "-":if(g.validate=="Real"||g.validate=="Int"){newValue=newValue+chars[c];newCont++;c+1==cursor.selectionStart&&(newCursor=newCont)}}return cursor.selectionStart!=cursor.selectionEnd?{result:newValue,cursor:cursor}:{result:newValue,cursor:{selectionStart:newCursor,
selectionEnd:newCursor}}};this.replaceMask=function(b,d,f,k,q){switch(k){case "currency":case "percentage":dir="reverse";break;default:dir=g.mType=="text"&&g.validate=="Real"?"reverse":"forward"}return G.ApplyMask(b,f,d,dir,q)};this.replaceMasks=function(b,d){masks=g.mask;aMasks=masks.split(";");aResults=[];for(m=0;m<aMasks.length;){mask=aMasks[m];type=g.mType;comma_sep=g.comma_separator;comma_sep=comma_sep==""?".":comma_sep;aResults.push(g.replaceMask(b,d,mask,type,comma_sep));break}minIndex=0;minValue=
aResults[0].result;if(aResults.length>1)for(i=1;i<aResults.length;i++)if(aResults[i].result<minValue){minValue=aResults[i].result;minIndex=i}return aResults[minIndex]};this.getCleanMask=function(){aMask=g.mask.split("");maskOut="";for(i=0;i<aMask.length;i++)if(g.mType=="currency"||g.mType=="percentage"||g.mType=="text"&&g.validate=="Real")switch(aMask[i]){case "0":case "#":maskOut=maskOut+aMask[i];break;case g.comma_separator:maskOut=maskOut+"_"}else switch(aMask[i]){case "0":case "#":case "d":case "m":case "y":case "Y":maskOut=
maskOut+aMask[i]}return maskOut};this.applyMask=function(b){if(g.mask!=""){dataWOMask=g.removeMask();currentValue=dataWOMask.result;currentSel=dataWOMask.cursor;cursorStart=currentSel.selectionStart;cursorEnd=currentSel.selectionEnd;action="mask";swPeriod=false;switch(b){case 0:action="none";break;case 8:newValue=currentValue.substring(0,cursorStart-1);newValue=newValue+currentValue.substring(cursorEnd,currentValue.length);newCursor=cursorStart-1;break;case 46:newValue=currentValue.substring(0,cursorStart);
newValue=newValue+currentValue.substring(cursorEnd+1,currentValue.length);newCursor=cursorStart;break;case 256:case 44:swPeriod=true;newValue=currentValue.substring(0,cursorStart);newValue=b==256?newValue+".":newValue+",";newValue=newValue+currentValue.substring(cursorEnd,currentValue.length);newCursor=cursorStart+1;break;case 35:case 36:case 37:case 38:case 39:case 40:newValue=currentValue;switch(b){case 36:newCursor=0;break;case 35:newCursor=currentValue.length;break;case 37:newCursor=cursorStart-
1;break;case 39:newCursor=cursorStart+1}action="move";break;case 45:if(g.mType=="currency"){newValue=currentValue.substring(0,currentValue.length).split("");for(var d=0;newValue.length>d;d++){var f=newValue[d];if((typeof f==="number"||typeof f==="string")&&f!==""&&!isNaN(f)){newValue=currentValue.substring(0,d-1);newValue=newValue+("-"+currentValue.substring(d));d=newValue.length+1;newCursor=cursorStart+1}else if(f=="-"){newValue=currentValue.substring(0,d-1);newValue=newValue+currentValue.substring(d+
1);newCursor=cursorStart-1;d=newValue.length+1}}newValue.join&&(newValue=newValue.join(""))}break;default:newKey=String.fromCharCode(b);newValue=currentValue.substring(0,cursorStart);newValue=newValue+newKey;newValue=newValue+currentValue.substring(cursorEnd,currentValue.length);newCursor=cursorStart+1}newCursor<0&&(newCursor=0);if(b!=8&&b!=46&&b!=35&&b!=36&&b!=37&&b!=39){testData=dataWOMask.result;tamData=testData.length;cleanMask=g.getCleanMask();tamMask=cleanMask.length;sw=false;if(testData.indexOf(g.comma_separator)==
-1){aux=cleanMask.split("_");tamMask=aux[0].length;sw=true}if(tamData>=tamMask){for(var k,d=0;newValue.length>d;d++){f=newValue[d];if((typeof f==="number"||typeof f==="string")&&f!==""&&!isNaN(f))k=false;else if(f=="-"){k=true;d=newValue.length+1}}if(!(b==45||k&&tamMask>=tamData)){sw&&(!swPeriod&&testData.indexOf(g.comma_separator)==-1)&&(action="none");sw||(action="none")}}}switch(action){case "mask":case "move":dataNewMask=g.replaceMasks(newValue,newCursor);g.element.value=dataNewMask.result;g.setSelectionRange(dataNewMask.cursor,
dataNewMask.cursor)}}else{currentValue=g.element.value;currentSel=g.getCursorPosition();cursorStart=currentSel.selectionStart;cursorEnd=currentSel.selectionEnd;switch(b){case 8:newValue=currentValue.substring(0,cursorStart-1);newValue=newValue+currentValue.substring(cursorEnd,currentValue.length);newCursor=cursorStart-1;break;case 46:case 45:newValue=currentValue.substring(0,cursorStart);newValue=newValue+currentValue.substring(cursorEnd+1,currentValue.length);newCursor=cursorStart;break;case 256:newValue=
currentValue.substring(0,cursorStart);newValue=newValue+".";newValue=newValue+currentValue.substring(cursorEnd,currentValue.length);newCursor=cursorStart+1;break;case 35:case 36:case 37:case 38:case 39:case 40:newValue=currentValue;switch(b){case 36:newCursor=0;break;case 35:newCursor=currentValue.length;break;case 37:newCursor=cursorStart-1;break;case 39:newCursor=cursorStart+1}break;default:newKey=String.fromCharCode(b);newValue=currentValue.substring(0,cursorStart);newValue=newValue+newKey;newValue=
newValue+currentValue.substring(cursorEnd,currentValue.length);newCursor=cursorStart+1}newCursor<0&&(newCursor=0);g.element.value=newValue;g.setSelectionRange(newCursor,newCursor)}};this.sendOnChange=function(){if(g.element.fireEvent)g.element.fireEvent("onchange");else{var b=document.createEvent("HTMLEvents");b.initEvent("change",true,true);g.element.dispatchEvent(b)}};this.handleKeyDown=function(b){if(g.element.readOnly||g.validate=="Any"&&g.mask=="")return true;var d=window.event?window.event.keyCode:
b.which;switch(d){case 8:case 46:case 35:case 36:case 37:case 38:case 39:case 40:if(g.validate=="NodeName"&&(d==8||d==46))break;g.applyMask(d);(d==8||d==46)&&(g.validate!="Login"&&g.validate!="NodeName")&&g.sendOnChange();g.checkBrowser();if(g.browser.name=="Chrome"||g.browser.name=="Safari")b.returnValue=false;else return false;break;case 9:break;default:if(g.mType=="date"||g.mType=="currency"||g.mType=="percentage"||g.validate=="Real"||g.validate=="Int")if(!(48<=d&&d<=57||d==109||(d==190||d==188||
d==189)||96<=d&&d<=111))return false}return true};this.handleKeyPress=function(b){if(g.element.readOnly||g.mType!="currency"&&(g.mType!="percentage"&&g.mType!="date")&&g.element.value.length>g.element.maxLength-1||g.validate=="Any"&&g.mask=="")return true;var d=window.event?window.event.keyCode:b.which;if(navigator.userAgent.indexOf("MSIE")!=-1&&d==0)return true;switch(d){case 9:case 13:return true}if(window.event){if(window.event.altKey||window.event.ctrlKey)return true}else if(b.altKey||b.ctrlKey)return true;
g.checkBrowser();if(!(g.browser.name=="Firefox"&&d==8&&g.validate!="NodeName")){var f=window.event?window.event.keyCode:b.which;if(g.mType=="date")g.validate="Int";updateOnChange=keyValid=true;switch(g.validate){case "Any":keyValid=true;break;case "Int":patron=/[0-9\-]/;key=String.fromCharCode(f);keyValid=patron.test(key);break;case "Real":patron=typeof g.comma_separator!="undefined"?/[0-9\-]/:/[0-9,\.]/;key=String.fromCharCode(f);keyValid=(keyValid=patron.test(key))||f==45;typeof g.comma_separator!=
"undefined"&&(g.comma_separator=="."?g.element.value.indexOf(".")==-1&&(keyValid=keyValid||f==46):g.element.value.indexOf(",")==-1&&(keyValid=keyValid||f==44));break;case "Alpha":patron=/[a-zA-Z]/;key=String.fromCharCode(f);keyValid=patron.test(key);break;case "AlphaNum":patron=/[a-zA-Z0-9\s\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00a1\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00a9\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00b3\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00ba\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00a4\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00ab\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00b6\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bc\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00b1\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00a7\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00a1\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00e2\u20ac\u00b9\u00c3\u2026\u00e2\u20ac\u0153\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bf\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bd\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00b0\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bf\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bd\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00e2\u20ac\u00a6\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u201c\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c2\u00a6\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00a1\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00e2\u20ac\u00a6\u00c3\u201a\u00c2\u00be\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00b9\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bf\u00c3\u0192\u00e2\u20ac\u0161\u00c3\u201a\u00c2\u00bd\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00ac\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac\u00c3\u2026\u00e2\u20ac\u0153\u00c3\u0192\u00c6\u2019\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u201e\u00a2\u00c3\u0192\u00c6\u2019\u00c3\u00a2\u00e2\u201a\u00ac\u00c2\u00a6\u00c3\u0192\u00c2\u00a2\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac\u00c3\u2026\u00e2\u20ac\u0153]/;
key=String.fromCharCode(f);keyValid=patron.test(key);break;case "NodeName":case "Login":updateOnChange=false;if(g.getCursorPos()==0&&f>=48&&f<=57){keyValid=false;break}if(d==8&&g.validate=="NodeName")keyValid=true;else{var k=new leimnud.module.validator({valid:["Login"],key:window.event?window.event:b,lang:typeof g.language!=="undefined"?g.language:"en"});keyValid=k.result()}break;default:k=new leimnud.module.validator({valid:[g.validate],key:window.event?window.event:b,lang:typeof g.language!=="undefined"?
g.language:"en"});keyValid=k.result()}if(keyValid){if((g.validate=="Login"||g.validate=="NodeName")&&g.mask=="")return true;f==46?g.applyMask(256):g.applyMask(f);updateOnChange&&g.sendOnChange()}if(g.browser.name=="Firefox"&&d==0)return true}if(g.browser.name=="Chrome"||g.browser.name=="Safari")b.returnValue=false;else return false};if(this.element)this.element.onblur=function(){if(g.mask!=""&&(g.mType=="currency"||g.mType=="percentage"||g.validate=="Real"&&g.mType=="text")&&g.mask.indexOf("-")==
-1&&g.element.value!=""){masks=g.mask;aMasks=masks.split(";");for(m=0;m<aMasks.length;){var b=",";if(typeof g.comma_separator!="undefined")b=g.comma_separator;else{txtRealMask=aMasks[m].split("");for(p=txtRealMask.length-1;p>=0;p--)if(txtRealMask[p]!="#"&&txtRealMask[p]!="%"&&txtRealMask[p]!=" "){b=txtRealMask[p];break}}if(aMasks[m].split(b).length==2){var d=0;txtRealMask=aMasks[m].split("");for(p=txtRealMask.length-1;p>=0;p--){txtRealMask[p]=="#"&&d++;if(txtRealMask[p]==b)break}var f="",k="",q="",
s=g.element.value.split(b);if(typeof s[1]=="undefined"){var v="",t="",w=true,z="",v=s[0].split("");for(p=0;p<v.length;p++)if(!isNaN(parseFloat(v[p]))&&isFinite(v[p])||v[p]==","||v[p]=="."){t=t+v[p];w=false}else w?k=k+v[p]:z=z+v[p];s[0]=t;s[1]=z}v=s[1];v=v.split("");for(p=t=0;p<v.length;p++)if(!isNaN(parseFloat(v[p]))&&isFinite(v[p])){t++;f=f+v[p]}else q=q+v[p];if(t<d){for(;t<d;t++)f=f+"0";g.element.value=k+s[0]+b+f+q}}break}}if(this.validate=="Email")if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/.test(this.element.value))this.element.className=
this.element.className.split(" ")[0]+" FormFieldValid";else{if(this.element.value==""){this.element.className="module_app_input___gray";return}this.element.className=this.element.className.split(" ")[0]+" FormFieldInvalid"}if(this.strTo)switch(this.strTo){case "UPPER":this.element.value=this.element.value.toUpperCase();break;case "LOWER":this.element.value=this.element.value.toLowerCase()}}.extend(this);if(f)if(window.event){leimnud.event.add(this.element,"keydown",this.handleKeyDown);leimnud.event.add(this.element,
"keypress",this.handleKeyPress);leimnud.event.add(this.element,"change",this.updateDepententFields)}else{this.element.onkeydown=this.handleKeyDown;this.element.onkeypress=this.handleKeyPress;this.element.onchange=this.updateDepententFields}}G_Text.prototype=new G_Field;function G_Percentage(b,f,d){this.parent=G_Text;this.parent(b,f,d);this.mType="percentage";this.mask="###.##";this.comma_separator="."}G_Percentage.prototype=new G_Field;
function G_Currency(b,f,d){this.parent=G_Text;this.parent(b,f,d);this.mType="currency";this.mask="_###,###,###,###,###;###,###,###,###,###.00";this.comma_separator="."}G_Currency.prototype=new G_Field;function G_TextArea(b,f,d){this.parent=G_Text;this.parent(b,f,d);this.validate="Any";this.mask=""}G_TextArea.prototype=new G_Field;function G_Date(b,f,d){this.parent=G_Text;this.parent(b,f,d);this.mType="date";this.mask="dd-mm-yyyy"}G_Date.prototype=new G_Field;
function G(){function b(b){var d="",d=b,b="";for(r=d.length-1;r>=0;r--)b=b+d.substr(r,1);return b}function f(d,g,f){function k(){var b=true;switch(false){case E==="d":N="";break;case E==="m":J=""}switch(E){case "0":if(A===false){z=z+"0";Q++;break}case "y":case "#":if(A===false){z=z+"";break}if(A==="0"||A==="1"||A==="2"||A==="3"||A==="4"||A==="5"||A==="6"||A==="7"||A==="8"||A==="9"||A==="-"){z=z+A;H++}else{I++;H++;F--}break;case "(":if(A===false){z=z+"";break}z=z+E;H<f&&M++;break;case "d":if(A===false){z=
z+"";break}(b=A==="0"||A==="1"||A==="2"||A==="3"||A==="4"||A==="5"||A==="6"||A==="7"||A==="8"||A==="9"?true:false)&&(N=N+A);b&&parseInt(N)>31&&(b=false);if(b){z=z+A;H++}else{I++;H++;F--}break;case "m":if(A===false){z=z+"";break}(b=A==="0"||A==="1"||A==="2"||A==="3"||A==="4"||A==="5"||A==="6"||A==="7"||A==="8"||A==="9"?true:false)&&(J=J+A);b&&parseInt(J)>12&&(b=false);if(b){z=z+A;H++}else{I++;H++;F--}break;default:if(A===false){z=z+"";break}if(A===E){z=z+A;H++}else{z=z+E;Q++;H<f&&M++}}}var q=false;
if(g.substr(0,1)==="_"){g=g.substr(1);q=true}if(q){g=b(g);d=b(d)}for(var s=-1,v=f,t="",w=0;w<g.length;w++){for(var z="",C=0,I=0,Q=0,M=f,H=-1,N="",J="",F=0;F<w;F++){var A=false,E=g.substr(F,1);k()}H=0;for(F=w;F<g.length;F++){C++;if(C>200)break;A=d.substr(H,1);A=A===""?false:A;E=g.substr(F,1);k()}C=d.length-H;C=C<0?0:C;I=I+C;I=I+Q/1E3;if(I===0){t=z;s=0;v=M;break}if(s===-1||I<s){s=I;t=z;v=M}}z=t;if(q){z=b(z);g=b(g)}return{result:z,cursor:v,value:s,mask:g}}function d(b,d){var g="";_aNum=b.split("");for(var f=
0;f<_aNum.length;f++)switch(_aNum[f]){case "-":case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case d:g=g+_aNum[f]}return g}var g=["_",";","#",".","0","d","m","y","-"];this.ApplyMask=function(g,f,n,k,q){myOut="";myCursor=n;if(g.length==0)return{result:"",cursor:0};switch(k){case "forward":f=f.split("");value=d(g,"");k=value.split("");for(e=0;e<f.length&&k.length>0;e++)switch(f[e]){case "#":case "0":case "d":case "m":case "y":case "Y":if(k.length>0){key=k.shift();
myOut=myOut+key}break;default:myOut=myOut+f[e];e<myCursor&&myCursor++}break;case "reverse":g=d(g,q);if(g.length==0)return{result:"",cursor:0};k=b(g);f=b(f);if(f.indexOf("0"+q)>0){aMask=f;aNum=k=d(k,"*");eMask=aMask.split("");eNum=aNum.split("");_cout="";for(e=0;e<eMask.length;e++)switch(eMask[e]){case "#":case "0":if(eNum.length>0){key=eNum.shift();_cout=_cout+key}break;case ".":case ",":eMask[e]!=q?eNum.length>0&&(_cout=_cout+eMask[e]):_cout=_cout+eMask[e];break;default:_cout=_cout+eMask[e]}myOut=
_cout}else{sw_d=false;aMask=f.split(q);aNum=k.split(q);if(aMask.length==1){dMask="";cMask=aMask[0]}else{dMask=aMask[0];cMask=aMask[1]}if(aNum.length==1){dNum="";cNum=aNum[0]}else{sw_d=true;dNum=aNum[0];cNum=aNum[1]}_dout="";pMask=dMask.split("");pNum=dNum.split("");for(p=0;p<pMask.length;p++)switch(pMask[p]){case "#":case "0":if(pNum.length>0){key=pNum.shift();_dout=_dout+key}break;case ",":case ".":pMask[p]!=q&&pNum.length>0&&(_dout=_dout+pMask[p]);break;default:_dout=_dout+pMask[p]}_cout="";sw_c=
false;pMask=cMask.split("");pNum=cNum.split("");for(p=0;p<pMask.length;p++)switch(pMask[p]){case "#":case "0":case "d":case "m":case "y":if(pNum.length>0){key=pNum.shift();_cout=_cout+key;sw_c=true}break;case ",":case ".":pMask[p]!=q&&pNum.length>0&&pNum[0]!="-"&&(_cout=_cout+pMask[p]);break;default:if(pNum.length>0&&pNum[0]=="-"){key=pNum.shift();_cout=_cout+key}_cout=_cout+pMask[p]}if(pNum.length>0&&pNum[0]=="-"){key=pNum.shift();_cout=_cout+key}myOut=sw_c&&sw_d?_dout+q+_cout:_dout+_cout}myOut=
b(myOut);tmpCursor=0;aOut=myOut.split("");if(n==0)for(l=0;l<aOut.length;l++)switch(aOut[l]){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case q:myCursor=l;l=aOut.length}else if(n==g.length){for(l=0;l<aOut.length;l++)switch(aOut[l]){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case q:last=l}myCursor=last+1}else{aNum=g.split("");offset=0;aNewNum=myOut.split("");for(a=0;a<n;a++)for(notFinded=false;aNum[a]!=aNewNum[a+
offset]&&!notFinded;){offset++;if(a+offset>aNewNum.length){offset=-1;notFinded=true}}myCursor=n+offset}}return{result:myOut,cursor:myCursor}};this.toMask=function(b,d,g,k){if(d==="")return{result:new String(b),cursor:g};for(var b=new String(b),q=[],s=d.split(";"),v=0;v<s.length;v++){typedate=d.indexOf("#");q[v]=k=="normal"&&typedate=="0"?f(b,s[v],g):_ApplyMask(b,s[v],g,k)}b=0;for(v=1;v<s.length;v++)q[v].value<q[b].value&&(b=v);return q[b]};this.getValue=function(b){return getNumericValue(b.value(),
typeof b.comma_separator!="undefined"?b.comma_separator:"")};this.toMask2=function(b,d,g){if(d==="")return{result:new String(b),cursor:g};for(var d=d.split(";"),k=[],b=new String(b),q=0;q<d.length;q++)k[q]=f(b,d[q],g);b=0;for(q=1;q<d.length;q++)k[q].value<k[b].value&&(b=q);return k[b]};this.cleanMask=function(b,d,f){d=typeof d==="undefined"?"":d;if(d==="")return{result:new String(b),cursor:f};var k,q,s=[],b=new String(b);typeof f==="undefined"&&(f=0);k=b.substr(0,f);for(q=0;q<g.length;q++)d=d.split(g[q]).join("");
for(;d.length>0;){q=s.length;s[q]=d.substr(0,1);d=d.split(s[q]).join("");b=b.split(s[q]).join("");f=f-(k.split(s[q]).length-1)}return{result:b,cursor:f}};this.getId=function(b){var d=/(\[(\w+)\])+/.exec(b.id);return d?d[2]:b.id};this.getObject=function(b){var d=G.getId(b);switch(b.tagName){case "FORM":return eval("form_"+d);default:if(b.form){G.getId(b.form);return eval("form_"+d+'.getElementByName("'+d+'")')}}};this.blinked=[];this.blinkedt0=[];this.autoFirstField=true;this.pi=Math.atan(1)*4;this.highLight=
function(b){var d=$dce("div");d.style.position="absolute";d.style.display="inline";d.style.height=b.clientHeight+2;d.style.width=b.clientWidth+2;d.style.background="#FF5555";b.style.backgroundColor="#FFCACA";b.parentNode.insertBefore(d,b);G.doBlinkEfect(d,1E3)};this.setOpacity=function(b,d){b.style.filter="alpha";b.filters?b.filters.alpha.opacity=d*100:b.style.opacity=d};this.doBlinkEfect=function(b,d){var g=1/d,f=G.blinked.length;G.blinked[f]=b;G.blinkedt0[f]=(new Date).getTime();for(var q=1;q<=
20;q++)setTimeout("G.setOpacity(G.blinked["+f+"],0.3-0.3*Math.cos(2*G.pi*((new Date()).getTime()-G.blinkedt0["+f+"])*"+g+"));",d/20*q);setTimeout("G.blinked["+f+"].parentNode.removeChild(G.blinked["+f+"]);G.blinked["+f+"]=null;",d/20*q)};this.alert=function(b,d,g,f,q,s,v,t){var b="<div>"+b+"</div>",g=g?g:300,f=f?f:200,q=v===false?false:true,s=s===false?false:true,v=v===true?true:false,w=new leimnud.module.panel;w.options={size:{w:g,h:f},position:{center:true},title:d,theme:"processmaker",control:{close:true,
roll:false,drag:true,resize:true},fx:{blinkToFront:true,opacity:true,drag:true,modal:s}};if(v===false)w.styles.fx.opacityModal.Static="0";w.make();w.addContent(b);if(t){for(var z=w.elements.content.getElementsByTagName("SCRIPT"),b=[],d=0;d<z.length;d++)b.push(z[d].innerHTML);for(d=0;d<z.length;d++)try{b[d]!==""&&(window.execScript?window.execScript(b[d],"javascript"):window.setTimeout(b[d],0))}catch(C){alert(C.description)}}try{if(q){var I=w.elements.content.childNodes[0].clientWidth+28,Q=w.elements.content.childNodes[0].clientHeight+
44;w.resize({w:I<g?g:I});w.resize({h:Q<f?f:Q})}}catch(M){alert(var_dump(M))}delete newdiv;delete z;w.command(w.loader.hide)}}G=new G;function G_Debugger(){this.var_dump=function(b){var f,d;d="";if(typeof b=="object")for(f in b)d=d+("<b>"+f+"</b>:"+b[f]+"<br>\n");else d=b;if(debugDiv=document.getElementById("debug"))debugDiv.innerHTML=d;return d}}var oDebug=new G_Debugger,datePickerPanel;
function showDatePicker(b,f,d,g,h,o){var n=leimnud.dom.mouse(b),b=n.x-50,n=n.y-40;datePickerPanel=new leimnud.module.panel;datePickerPanel.options={size:{w:275,h:240},position:{x:b,y:n},title:"Date Picker",theme:"panel",control:{close:true,drag:true},fx:{modal:true}};datePickerPanel.setStyle={containerWindow:{borderWidth:0}};datePickerPanel.make();datePickerPanel.idName=d;datePickerPanel.formId=f;f=new leimnud.module.rpc.xmlhttp({url:"/controls/calendar.php?v="+g+"&d="+g+"&min="+h+"&max="+o});f.callback=
leimnud.closure({Function:function(b){datePickerPanel.addContent(b.xmlhttp.responseText)},args:f});f.make()}function moveDatePicker(b){var f=document.getElementById("dtmin_value"),d=document.getElementById("dtmax_value"),b=new leimnud.module.rpc.xmlhttp({url:"/controls/calendar.php?d="+b+"&min="+f.value+"&max="+d.value});b.callback=leimnud.closure({Function:function(b){datePickerPanel.clearContent();datePickerPanel.addContent(b.xmlhttp.responseText)},args:b});b.make()}
function selectDate(b){var f=document.getElementById("span["+datePickerPanel.formId+"]["+datePickerPanel.idName+"]");getField(datePickerPanel.idName,datePickerPanel.formId).value=b;f.innerHTML=b;datePickerPanel.remove()}function set_datetime(b){moveDatePicker(b)}
function getRow(b){try{var f=null;if(typeof b==="string"){f=getField(b);if(f==null){aElements=document.getElementsByName("form["+b+"][]");aElements.length==0&&(aElements=document.getElementsByName("form["+b+"]"));f=aElements.length?aElements[aElements.length-1]:null}}if(f!=null){for(;f.tagName!=="TR";)f=f.parentNode;return f}return null}catch(d){alert(d)}}var getRowById=getRow;function hideRow(b){var f=getRow(b);if(f)f.style.display="none";removeRequiredById(b);delete f}var hideRowById=hideRow;
function showRow(b){var f=getRow(b);requiredFields=[];sRequiredFields=document.getElementById("DynaformRequiredFields").value.replace(/%27/gi,'"');fields=new String(sRequiredFields);fields=stripslashes(fields);requiredFieldsList=eval(fields);for(i=0;i<requiredFieldsList.length;i++)requiredFields[i]=requiredFieldsList[i].name;requiredFields.inArray(b)&&enableRequiredById(b);if(f)f.style.display="";delete f}var showRowById=showRow;
function hideShowControl(b,f){var d;if(b){d=b.parentNode.getElementsByTagName("div")[0];d.style.display=d.style.display==="none"?"":"none";if(d.style.display==="none")getField(f).value="";delete d}}function contractSubtitle(b){for(var b=getRow(b),f=b.parentNode,b=b.rowIndex+1,d=f.rows.length;b<d;b++){if(f.rows[b].cells.length==1)break;f.rows[b].style.display="none";for(var g=getControlsInTheRow(f.rows[b]),h=0;h<g.length;h++)removeRequiredById(g[h])}}
function expandSubtitle(b){for(var b=getRow(b),f=b.parentNode,b=b.rowIndex+1,d=f.rows.length;b<d;b++){if(f.rows[b].cells.length==1)break;f.rows[b].style.display="";for(var g=getControlsInTheRow(f.rows[b]),h=0;h<g.length;h++)enableRequiredById(g[h])}}
function contractExpandSubtitle(b){subTitle=getRow(b);for(var f=subTitle.parentNode,d=false,g=subTitle.rowIndex+1,h=f.rows.length;g<h;g++){if(f.rows[g].cells.length==1)break;f.rows[g].style.display==="none"&&(d=true)}d?expandSubtitle(b):contractSubtitle(b)}
var getControlsInTheRow=function(b){var f=[];if(b.cells){var d,g,h;for(d=0;d<b.cells.length;d++){var o=b.cells[d].getElementsByTagName("input");if(o)for(g=0;g<o.length;g++){h=o[g].id.replace("form[","");h=h.replace(/]$/,"");f.push(h)}}}return f},notValidateThisFields=[];
function getElementsByClassNameCrossBrowser(b,f,d){var g=[];f==null&&(f=document);d==null&&(d="*");f=f.getElementsByTagName(d);d=f.length;b=RegExp("(^|\\s)"+b+"(\\s|$)");for(j=i=0;i<d;i++)if(b.test(f[i].className)){g[j]=f[i];j++}return g}
var validateGridForms=function(b){grids=getElementsByClassNameCrossBrowser("grid",document,"div");Tlabels=getElementsByClassNameCrossBrowser("tableGrid",document,"table");nameGrid="";for(cnt=0;cnt<Tlabels.length;cnt++)if(Tlabels[cnt].getAttribute("name")){nameGrid=Tlabels[cnt].getAttribute("name");if(notValidateThisFields.inArray(nameGrid))return b}for(j=0;j<grids.length;j++){fields=grids[j].getElementsByTagName("input");for(i=0;i<fields.length;i++){var f=new input(fields[i]);if(fields[i].getAttribute("pm:required")==
"1"&&fields[i].value==""){$label=fields[i].name.split("[");$labelPM=fields[i].getAttribute("pm:label");$fieldName=$labelPM==""||$labelPM==null?$label[3].split("]")[0]+" "+$label[2].split("]")[0]:$labelPM+" "+$label[2].split("]")[0];fieldGridName=$label[1]+"["+$label[2]+"["+$label[3].split("]")[0];notValidateThisFields.inArray(fieldGridName)||b.push($fieldName);f.failed()}else f.passed()}textAreas=grids[j].getElementsByTagName("textarea");for(i=0;i<textAreas.length;i++){f=new input(textAreas[i]);if(textAreas[i].getAttribute("pm:required")==
"1"&&textAreas[i].value==""){$label=textAreas[i].name.split("[");$labelPM=textAreas[i].getAttribute("pm:label");$fieldName=$labelPM==""||$labelPM==null?$label[3].split("]")[0]+" "+$label[2].split("]")[0]:$labelPM+" "+$label[2].split("]")[0];fieldGridName=$label[1]+"["+$label[2]+"["+$label[3].split("]")[0];notValidateThisFields.inArray(fieldGridName)||b.push($fieldName);f.failed()}else f.passed()}dropdowns=grids[j].getElementsByTagName("select");for(i=0;i<dropdowns.length;i++){f=new input(dropdowns[i]);
if(dropdowns[i].getAttribute("pm:required")=="1"&&dropdowns[i].value==""){$label=dropdowns[i].name.split("[");$labelPM=dropdowns[i].getAttribute("pm:label");$fieldName=$labelPM==""||$labelPM==null?$label[3].split("]")[0]+" "+$label[2].split("]")[0]:$labelPM+" "+$label[2].split("]")[0];fieldGridName=$label[1]+"["+$label[2]+"["+$label[3].split("]")[0];notValidateThisFields.inArray(fieldGridName)||b.push($fieldName);f.failed()}else f.passed()}}return b},validateForm=function(b){if(typeof b!="object"||
b.indexOf("%27")>0)b=b.replace(/%27/gi,'"');if(typeof b!="object"||b.indexOf("%39")>0)b=b.replace(/%39/gi,"'");aRequiredFields=eval(b);for(var f="",d=[],g=[],b=0;b<aRequiredFields.length;b++){aRequiredFields[b].label=aRequiredFields[b].label==""?aRequiredFields[b].name:aRequiredFields[b].label;if(!notValidateThisFields.inArray(aRequiredFields[b].name)){required=typeof aRequiredFields[b].required!="undefined"?aRequiredFields[b].required:1;validate=typeof aRequiredFields[b].validate!="undefined"?aRequiredFields[b].validate:
"";if(required==1)switch(aRequiredFields[b].type){case "suggest":var h=new input(getField(aRequiredFields[b].name+"_label"));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "text":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "dropdown":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==
""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "textarea":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "password":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "currency":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==
""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "percentage":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "yesno":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "date":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==
""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "file":h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value==""){d.push(aRequiredFields[b].label);h.failed()}else h.passed();break;case "listbox":for(var h=getField(aRequiredFields[b].name),o=false,n=0;n<h.options.length;n++)if(h.options[n].selected){o=true;n=h.options.length}o==false&&d.push(aRequiredFields[b].label);break;case "radiogroup":h=document.getElementsByName("form["+aRequiredFields[b].name+
"]");n=false;for(o=0;o<h.length;o++)if(h[o].checked){n=true;o=h.length}n==false&&d.push(aRequiredFields[b].label);break;case "checkgroup":n=false;h=document.getElementsByName("form["+aRequiredFields[b].name+"][]");for(o=0;o<h.length;o++)if(h[o].checked){n=true;o=h.length}n||d.push(aRequiredFields[b].label)}if(validate!="")switch(aRequiredFields[b].type){case "text":if(validate=="Email"){h=new input(getField(aRequiredFields[b].name));if(getField(aRequiredFields[b].name).value!=""){n=getField(aRequiredFields[b].name);
if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n.value)&&n.value!=""){g.push(aRequiredFields[b].label);h.failed();n.focus()}else h.passed()}}}}}d=validateGridForms(d);if(d.length>0||g.length>0){for(n=0;n<d.length;n++){f=f+(n>0?", ":"");f=f+d[n]}b="";for(n=0;n<g.length;n++){b=b+(n>0?", ":"");b=b+g[n]}h="";d.length>0&&(h=h+("\n \n"+G_STRINGS.ID_REQUIRED_FIELDS+": \n \n [ "+f+" ]"));g.length>0&&(h=h+("\n \n"+G_STRINGS.ID_VALIDATED_FIELDS+": \n \n [ "+b+" ]"));alert(h);return false}f=document.getElementsByTagName("form");
for(b=0;b<=f.length-1;b++){d=f[b];for(b=0;b<=d.elements.length-1;b++){g=d.elements[b];if(g.type=="checkbox"&&g.disabled&&g.checked){h=g.id+"_";if(!document.getElementById(h)){n=document.createElement("input");n.type="hidden";n.id=h;n.name=g.name;n.value=g.value;d.appendChild(n)}}}}return true},getObject=function(b){var f,d=null,g=__aObjects__.length;for(f=0;f<g;f++)if(d=__aObjects__[f].getElementByName(b))break;return d},saveAndRefreshForm=function(b){if(b){b.form.action=b.form.action+"&_REFRESH_=1";
b.form.submit()}else{b=window.document.getElementsByTagName("form");if(b.length>0){b[0].action=b[0].action+"&_REFRESH_=1";b[0].submit()}}},saveForm=function(b){if(b)ajax_post(b.form.action,b.form,"POST");else{b=window.document.getElementsByTagName("form");b.length>0&&ajax_post(b[0].action,b[0],"POST")}},validateURL=function(b){return/http?s?:\/\/([-\w\.]+)+(:\d+)?(\/([\w/_\.]*(\?\S+)?)?)?/.test(b)?true:false},saveAndRedirectForm=function(b,f){saveForm(b);if(validateURL(f))typeof parent!="undefined"?
parent.location.href=f:document.location.href=f},removeRequiredById=function(b){if(!notValidateThisFields.inArray(b)){notValidateThisFields.push(b);if(b=document.getElementById("__notValidateThisFields__"))b.value=notValidateThisFields.toJSONString()}},enableRequiredById=function(b){if(notValidateThisFields.inArray(b)){var f,d=[];for(f=0;f<notValidateThisFields.length;f++)notValidateThisFields[f]!=b&&d.push(notValidateThisFields[f]);notValidateThisFields=d;if(b=document.getElementById("__notValidateThisFields__"))b.value=
notValidateThisFields.toJSONString()}};function dynaformVerifyFieldName(){pme_validating=true;setTimeout("verifyFieldName1();",0);return true}
function verifyFieldName1(){var b=fieldName.value,f=_("DYNAFIELD_ALREADY_EXIST"),d=getField("PME_VALIDATE_NAME",fieldForm).value,g=new input(getField("PME_XMLNODE_NAME")),d=b!==""&&(b!==savedFieldName&&d===""||b===savedFieldName);if(b.length==0){d=false;f=_("DYNAFIELD_EMPTY")}if(!isNaN(parseInt(b.substr(0,1)))){d=false;f=_("DYNAFIELD_NODENAME_NUMBER")}if(d){g.passed();getField("PME_ACCEPT",fieldForm).disabled=false}else{getField("PME_ACCEPT",fieldForm).disabled=true;g.failed();(new leimnud.module.app.alert).make({label:f});
g.focus()}pme_validating=false;return d}var objectsWithFormula=[];
function sumaformu(b,f,d){afma=f;for(var g=["+","-","*","/","(","[","{","}","]",")",",","Math.pow","Math.PI","Math.sqrt"],h=0;h<g.length;h++)for(var o=0;o<f.length;){nfma=f.replace(g[h]," ");f=nfma=nfma.replace("  "," ");o++}nfma=nfma.replace(/^\s+/g,"").replace(/\s+$/g,"");theelemts=nfma.split(" ");objectsWithFormula[objectsWithFormula.length]={ee:b,fma:afma,mask:d,theElements:theelemts};for(h=0;h<theelemts.length;h++)leimnud.event.add(getField(theelemts[h]),"keyup",function(b){b=b.srcElement?b.srcElement:
b.target;myId=typeof this.id=="undefined"?b.id.replace("form[","").replace("]",""):this.id.replace("form[","").replace("]","");for(i_elements=0;i_elements<objectsWithFormula.length;i_elements++)for(i_elements2=0;i_elements2<objectsWithFormula[i_elements].theElements.length;i_elements2++)if(objectsWithFormula[i_elements].theElements[i_elements2]==myId){for(var g=objectsWithFormula[i_elements].fma,b=objectsWithFormula[i_elements].ee,h=objectsWithFormula[i_elements].theElements,f=0;f<=h.length-1;f++)var o=
getField(h[f]),t=elementAttributesNS(o,"pm"),t=getNumericValue(o.value,typeof t.decimal_separator!="undefined"?t.decimal_separator:""),g=g.replace(h[f],t==""?0:parseFloat(t));g=eval(g);if(d!=""){t=elementAttributesNS(b,"pm");putFieldNumericValue(b,g,d,typeof t.decimal_separator!="undefined"?t.decimal_separator:"")}else b.value=g}})}function showRowsById(b){for(i=0;i<b.length;i++)if(row=getRow(b[i]))row.style.display=""}
function hideRowsById(b){for(i=0;i<b.length;i++)if(row=getRow(b[i]))row.style.display="none"}
function dateSetMask(b){if(b!=""){b=stringReplace("%y","yy",b);b=stringReplace("%Y","yyyy",b);b=stringReplace("%m","mm",b);b=stringReplace("%o","mm",b);b=stringReplace("%d","dd",b);b=stringReplace("%e","dd",b);b=stringReplace("%H","##",b);b=stringReplace("%I","##",b);b=stringReplace("%k","##",b);b=stringReplace("%l","##",b);b=stringReplace("%M","##",b);b=stringReplace("%S","##",b);b=stringReplace("%j","###",b)}return b}
function putFieldNumericValue(b,f,d,g){var h=f.toString(),o=[],n="",f="";if(g!=""&&d.indexOf(g)!=-1){o=d.split(g);n=o[0];f=o[1]}else{n=d;f=""}o=d="";if(h.indexOf(".")!=-1){o=h.split(".");d=o[0];o=o[1]}else{d=h;o=""}var k=0,q=0,h=n.indexOf("#");if(h!=-1){for(var s=n.substring(0,h),v=n.split("").reverse().join(""),q=0,h=-1,k=0;k<=v.length-1;k++)if(v.charAt(k)=="#"){q=q+1;if(q==d.length){h=k;break}}k="";if(h!=-1){k=v.substring(0,h+1);k=k.split("").reverse().join("")}else s=n;n=s+k}n=putStringMask(d,
n,"reverse");f=putStringMask(o,f,"forward");b.value=n+g+f}function putStringMask(b,f,d){var g="",h=0,o=0;if(d=="reverse"){b=b.split("").reverse().join("");f=f.split("").reverse().join("")}for(h=0;h<=f.length-1;h++)switch(f.charAt(h)){case "#":if(o<=b.length-1){g=g+b.charAt(o);o=o+1}else g=g+"0";break;default:g=g+f.charAt(h)}d=="reverse"&&(g=g.split("").reverse().join(""));return g}
function getNumericValue(b,f){for(var d=b.split(""),g="",h=0;h<=d.length-1;h++)switch(d[h]){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":g=g+d[h];break;case f:g=g+"."}return g}
function G_PagedTable(){function b(b,g){var h=document.getElementById("table["+f.id+"]"),o=ajax_function(f.ajaxUri,b,g);h.outerHTML?h.outerHTML=h.outerHTML.split(h.innerHTML).join(o):h.innerHTML=o;for(var o=h.getElementsByTagName("SCRIPT"),n=0;n<o.length;n++)try{o[n].innerHTML!==""&&(window.execScript?window.execScript(o[n].innerHTML,"javascript"):window.setTimeout(o[n].innerHTML,0))}catch(k){alert(k.description)}eval("if (loadPopupMenu_"+f.id+")loadPopupMenu_"+f.id+"();");delete h;delete o}this.event=
this.name=this.id="";this.element=null;this.currentFilter=this.currentOrder=this.ajaxUri=this.field="";this.currentPage=1;this.totalRows=0;this.rowsPerPage=25;this.onUpdateField=this.afterDeleteField=this.onDeleteField=this.onInsertField="";this.form;var f=this;this.showHideField=function(d){uri="field="+encodeURIComponent(d);for(var g=[],h=true,o=0,n=f.shownFields.length;o<n;o++)f.shownFields[o]!==d?g.push(f.shownFields[o]):h=false;h&&g.push(d);f.shownFields=g;b("showHideField",uri)};this.updateField=
function(b,g,h,f){popupWindow(g,this.popupPage+"&field="+encodeURIComponent(b),h||500,f||200)};this.deleteField=function(){};this.doFilter=function(d){var g,d=d.elements;f.currentFilter="";for(g=0;g<d.length;g++)if(d[g].value!=""){if(f.currentFilter!="")f.currentFilter=f.currentFilter+"&";f.currentFilter=f.currentFilter+(d[g].id+"="+encodeURIComponent(d[g].value))}d="order="+encodeURIComponent(f.currentOrder)+"&page="+f.currentPage;f.currentFilter!=""&&(d=d+"&filter="+encodeURIComponent(f.currentFilter));
b("paint",d)};this.doFastSearch=function(d){uri="fastSearch="+encodeURIComponent(d);b("paint",uri)};this.doSort=function(d,g){var h;f.currentOrder=g?d+"="+g:"";h="order="+encodeURIComponent(f.currentOrder)+"&page="+f.currentPage;f.currentFilter!=""&&(h=h+"&filter="+encodeURIComponent(f.currentFilter));b("paint",h)};this.refresh=function(){b("paint","")};this.doGoToPage=function(b){var g;f.currentPage=b;g="order="+encodeURIComponent(f.currentOrder)+"&page="+f.currentPage;f.currentFilter!=""&&(g=g+
"&filter="+encodeURIComponent(f.currentFilter));b=document.getElementById("table["+f.id+"]");g=ajax_function(f.ajaxUri,"paint",g);b.outerHTML?b.outerHTML=b.outerHTML.split(b.innerHTML).join(g):b.innerHTML=g;delete b;delete g}}
function popup(b){lleft=document.body.clientWidth/2+document.body.scrollLeft;ltop=document.body.clientHeight/2+document.body.scrollTop;panelPopup=leimnud.panel.create({w:popupWidth,h:popupHeight},{x:lleft,y:ltop,center:true},"popup",9,false,{botones:{cerrar:true},style:{panel:{border:"1px solid #000000",color:"#000000",backgroundColor:"#FEFEFE"},html:{textAlign:"left",padding:"5px",paddingTop:"12px"}}});leimnud.panel.loader.begin(panelPopup);uyh=new leimnud.rpc.xmlhttp({method:"GET",url:b,callback:{_function:function(b){leimnud.panel.loader.end(b.arguments.obj);
dc=$dce("div");leimnud.style.set(dc,{textAlign:"justify"});dc.innerHTML=b.request.responseText;leimnud.panel.html(b.arguments.obj,dc);leimnud.panel.sombra(b.arguments.obj,{sombra:{color:"#000000",opacity:30}})},arguments:{obj:panelPopup}}})}function setRowClass(b,f){if(f==""||typeof b.className=="undefined")return false;if(globalRowSelected==null||globalRowSelected.id!=b.id){globalRowSelectedClass=b.className;b.className=f}return true}var globalRowSelected=null,globalRowSelectedClass;
function focusRow(b,f){if(f==""||typeof b.className=="undefined")return false;if(globalRowSelected!=null)globalRowSelected.className=globalRowSelectedClass;globalRowSelected=b;b.className=f;return true}
var G_Grid=function(b,f){var d=this;this.parent=G_Field;this.parent(b,"",f);this.sGridName=f;this.sAJAXPage=b.ajaxServer||"";this.oGrid=document.getElementById(this.sGridName);this.onaddrow=function(){};this.ondeleterow=function(){};this.executeEvent=function(b,d){if(document.createEventObject){var f=document.createEventObject();return b.fireEvent("on"+d,f)}f=document.createEvent("HTMLEvents");f.initEvent(d,true,true);return!b.dispatchEvent(f)};this.aFields=[];this.aElements=[];this.aFunctions=[];
this.aFormulas=[];this.allDependentFields="";this.countRows=function(){return this.aElements.length/this.aFields.length};this.getObjectName=function(b){b=b.split("][").pop();return b=b.replace("]","")};this.setFields=function(d,h){var f=document.getElementById(this.sGridName),n,k="",q=0,s=0;this.aFields=d;for(q=h||1;q<=f.rows.length-2;q++)for(s=0;s<=this.aFields.length-1;s++){k=this.sGridName+"]["+q+"]["+this.aFields[s].sFieldName;if(n=document.getElementById("form["+k+"]"))switch(this.aFields[s].sType){case "text":this.aElements.push(new G_Text(b,
n,k));this.aElements[this.aElements.length-1].validate=this.aFields[s].oProperties.validate;if(this.aFields[s].oProperties.strTo)this.aElements[this.aElements.length-1].strTo=this.aFields[s].oProperties.strTo;if(this.aFields[s].oProperties)this.aElements[this.aElements.length-1].mask=this.aFields[s].oProperties.mask;break;case "currency":this.aElements.push(new G_Currency(b,n,k));if(this.aFields[s].oProperties){if(this.aFields[s].oProperties.comma_separator)this.aElements[this.aElements.length-1].comma_separator=
this.aFields[s].oProperties.comma_separator;this.aElements[this.aElements.length-1].validate=this.aFields[s].oProperties.validate;this.aElements[this.aElements.length-1].mask=this.aFields[s].oProperties.mask}break;case "percentage":this.aElements.push(new G_Percentage(b,n,k));if(this.aFields[s].oProperties){if(this.aFields[s].oProperties.comma_separator)this.aElements[this.aElements.length-1].comma_separator=this.aFields[s].oProperties.comma_separator;this.aElements[this.aElements.length-1].validate=
this.aFields[s].oProperties.validate;this.aElements[this.aElements.length-1].mask=this.aFields[s].oProperties.mask}break;case "dropdown":this.aElements.push(new G_DropDown(b,n,k));if(this.aFields[s].oProperties)this.aElements[this.aElements.length-1].mask=this.aFields[s].oProperties.sMask;break;default:this.aElements.push(new G_Field(b,n,k));if(this.aFields[s].oProperties)this.aElements[this.aElements.length-1].mask=this.aFields[s].oProperties.sMask}}f=false;this.allDependentFields==""&&(f=true);
for(s=0;s<=this.aFields.length-1;s++)for(q=h||1;document.getElementById("form["+this.sGridName+"]["+q+"]["+this.aFields[s].sFieldName+"]");){this.aFields[s].oProperties.dependentFields!=""&&this.setDependents(q,this.getElementByName(q,this.aFields[s].sFieldName),d[s].oProperties.dependentFields,f);q=q+1}};this.setDependents=function(b,d,f,n){var k;k=(f||"").split(",");for(f=0;f<k.length;f++){var q=this.getElementByName(b,k[f]);if(q){d.dependentFields[f]=q;d.dependentFields[f].addDependencie(d);if(n){if(this.allDependentFields!=
"")this.allDependentFields=this.allDependentFields+",";this.allDependentFields=this.allDependentFields+k[f]}}}};this.unsetFields=function(){var b,d=0,f,n=0;f=this.aElements.length/this.aFields.length;for(b=0;b<this.aFields.length;b++){d=d+f;n++;this.aElements.splice(d-n,1)}};this.getElementByName=function(b,d){var f;for(f=0;f<this.aElements.length;f++)if(this.aElements[f].name===this.sGridName+"]["+b+"]["+d)return this.aElements[f];return null};this.getElementValueByName=function(b,d){var f=document.getElementById("form["+
this.sGridName+"]["+b+"]["+d+"]");return f?f.value:"Object not found!"};this.getFunctionResult=function(b){return(b=document.getElementById("form[SYS_GRID_AGGREGATE_"+this.sGridName+"_"+b+"]"))?b.value:"Object not found!"};this.cloneElement=function(b){var d=b.parentNode.innerHTML,f=new String(b.nodeName),n=[],k=[],q=[],s="",v="",n=0,d=stringReplace("\\x0A","",d),d=stringReplace("\\x0D","",d),d=stringReplace("\\x09","",d);if(n=eval("/^.*(<"+f+'.*id="'+b.id+'".*>).*$/i').exec(d))d=n[1];d=stringReplace("<"+
f,"",d);d=stringReplace("<"+f.toLowerCase(),"",d);d=stringReplace("\\/>.*","",d);s=d=stringReplace(">.*","",d);for(v="";n=/^(.*)(".*")(.*)$/g.exec(s);){s=n[1];v=stringReplace(" ","__SPACE__",n[2])+n[3]+v}d=s+v;/^.*read[oO]nly.*$/.test(d)&&(/^.*read[oO]nly\=.*$/.test(d)||(d=stringReplace("read[oO]nly",'readonly=""',d)));/^.*disabled.*$/.test(d)&&(/^.*disabled\=.*$/.test(d)||(d=stringReplace("disabled",'disabled=""',d)));if(/^.*checked.*$/i.test(d)){d=stringReplace("CHECKED","checked",d);/^.*checked\=.*$/.test(d)||
(d=stringReplace("checked",'checked=""',d))}s=[];q=v="";k=d.split(" ");for(n=0;n<=k.length-1;n++){q=k[n].split("=");if(typeof q[1]!="undefined"){v=q[0].trim();q=stringReplace('\\"',"",q[1]);q=stringReplace("__SPACE__"," ",q);s.push([v,q])}}k=document.createElement(f.toLowerCase());for(n=0;n<=s.length-1;n++){v=s[n][0];q=s[n][1];switch(v.toLowerCase()){case "id":case "name":k.setAttribute("id",b.id);k.setAttribute("name",b.id);break;case "class":k.className=q;break;case "style":k.style.cssText=(/^.*display\s*:\s*none.*$/i.test(d)?
"display: none;":"")+q;break;case "disabled":if(b.disabled)k.disabled=true;break;case "readonly":if(b.readOnly)k.readOnly=true;break;case "checked":if(b.checked)k.checked=true;break;default:k.setAttribute(v,q)}}switch(f.toLowerCase()){case "input":case "textarea":k.value=b.value;break;case "select":if(b.options.length>0){for(n=d=0;n<=b.options.length-1;n++){b.options[n].selected&&(d=n);k.options[n]=new Option(b.options[n].text,b.options[n].value,b.options[n].defaultSelected)}k.options[d].selected=
true}}return k};this.addGridRow=function(){this.oGrid=document.getElementById(this.sGridName);var b,d,o="",n,k,q=document.getElementById("firstRow_"+this.sGridName).getElementsByTagName("td"),s=this.oGrid.insertRow(this.oGrid.rows.length-1),v=this.oGrid.rows.length-2,t,w;s.onmouseover=function(){highlightRow(this,"#D9E8FF")};s.onmouseout=function(){highlightRow(this,"#fff")};for(b=0;b<q.length;b++){s.appendChild(q[b].cloneNode(true));switch(b){case 0:s.getElementsByTagName("td")[b].innerHTML=v;break;
case q.length-1:s.getElementsByTagName("td")[b].innerHTML=s.getElementsByTagName("td")[b].innerHTML.replace(/\[1\]/g,"["+v+"]");break;default:d=q[b].innerHTML.substring(q[b].innerHTML.indexOf("<")+1,q[b].innerHTML.indexOf(" "));d=d.toLowerCase();switch(d){case "input":if(d=s.getElementsByTagName("td")[b].getElementsByTagName("input")){k=d[0].id.replace(/\[1\]/g,"["+v+"]");d[0].id=k;d[0].name=k;t=elementAttributesNS(d[0],"pm");o=typeof t.defaultvalue!="undefined"&&t.defaultvalue!=""?t.defaultvalue:
"";for(n=0;n<d.length;n++)switch(d[n].type){case "text":d[n].className="module_app_input___gray";tags=s.getElementsByTagName("td")[b].getElementsByTagName("a");if(tags.length==2){w=tags[1].innerHTML;var z=tags[1].id.replace(/\[1\]/g,"["+v+"]");s.getElementsByTagName("td")[b].removeChild(tags[1]);var C=s.getElementsByTagName("td")[b].getElementsByTagName("script");s.getElementsByTagName("td")[b].removeChild(C[0]);if(tags[0].onclick){C=new String(tags[0].onclick);eval("tags[0].onclick = "+C.replace(/\[1\]/g,
"["+v+"]")+";")}C=document.createElement("a");if(C.style.setAttribute){var I="position:relative;top:0px;left:-19px;";C.style.setAttribute("cssText",I)}else{I="position:relative;top:0px;left:-22px;";C.setAttribute("style",I)}C.id=z;C.innerHTML=w;s.getElementsByTagName("td")[b].appendChild(C);datePicker4("",k,t.mask,t.start,t.end,t.time);d[n].value=o}else if(_BROWSER.name=="msie"&&d.length==1){w=this.cloneElement(d[n]);w.value=o;z=d[n].parentNode;z.removeChild(d[n]);z.appendChild(w)}else if(t.gridtype&&
t.gridtype=="currency"){w=elementAttributesNS(d[n],"");d[n].value=w.value.replace(/[.,0-9\s]/g,"")}else d[n].value=o;break;case "checkbox":w=elementAttributesNS(d[n],"");d[n].checked=o==""||typeof w.falseValue!="undefined"&&o==w.falseValue||typeof w.falsevalue!="undefined"&&o==w.falsevalue?false:true;break;case "hidden":if(t.gridtype!="yesno"&&t.gridtype!="dropdown"||typeof t.gridtype=="undefined")d[n].value=o;break;case "button":if(d[n].onclick){C=new String(d[n].onclick);eval("aObjects[n].onclick = "+
C.replace(/\[1\]/g,"["+v+"]")+";")}break;case "file":d[n].value=""}}d=null;break;case "textarea":if(d=s.getElementsByTagName("td")[b].getElementsByTagName("textarea")){d[0].className="module_app_input___gray";k=d[0].id.replace(/\[1\]/g,"["+v+"]");d[0].id=k;d[0].name=k;t=elementAttributesNS(d[0],"pm");o=t.defaultvalue!=""&&typeof t.defaultvalue!="undefined"?t.defaultvalue:"";d[0].innerHTML=o}d=null;break;case "select":if(d=s.getElementsByTagName("td")[b].getElementsByTagName("select")){k=d[0].id.replace(/\[1\]/g,
"["+v+"]");d[0].id=k;d[0].name=k;n=document.createElement(d[0].tagName);n.id=k;n.name=k;n.setAttribute("class","module_app_input___gray");aAttributes=d[0].attributes;for(o=0;o<aAttributes.length;o++){aAttributes[o].name.indexOf("pm:")!=-1&&n.setAttribute(aAttributes[o].name,aAttributes[o].value);aAttributes[o].name=="disabled"&&(_BROWSER.name=="msie"?aAttributes[o].value=="true"&&n.setAttribute(aAttributes[o].name,aAttributes[o].value):n.setAttribute(aAttributes[o].name,aAttributes[o].value))}t=elementAttributesNS(d[0],
"pm");o=t.defaultvalue!=""&&typeof t.defaultvalue!="undefined"?t.defaultvalue:"";t=this.allDependentFields.split(",");sObject=this.getObjectName(k);w=false;for(k=0;k<t.length;k++)t[k]==sObject&&(w=true);if(w){k=document.createElement(d[0].tagName);for(t=0;t<d[0].options.length;t++)if(d[0].options[t].value==""){w=document.createElement("OPTION");w.value=d[0].options[t].value;w.text=d[0].options[t].text;k.options.add(w)}n.innerHTML="";for(o=0;o<k.options.length;o++){t=document.createElement("OPTION");
t.value=k.options[o].value;t.text=k.options[o].text;n.options.add(t)}}else if(o!=""){k=document.createElement(d[0].tagName);for(t=0;t<d[0].options.length;t++){w=document.createElement("OPTION");w.value=d[0].options[t].value;w.text=d[0].options[t].text;d[0].options[t].value===o&&w.setAttribute("selected","selected");k.options.add(w)}n.innerHTML="";for(o=0;o<k.options.length;o++){t=document.createElement("OPTION");t.value=k.options[o].value;t.text=k.options[o].text;_BROWSER.name=="msie"?k.options[o].getAttribute("selected")!=
""&&t.setAttribute("selected","selected"):k.options[o].getAttribute("selected")=="selected"&&t.setAttribute("selected","selected");n.options.add(t)}}else{k=document.createElement(d[0].tagName);for(t=0;t<d[0].options.length;t++){w=document.createElement("OPTION");w.value=d[0].options[t].value;w.text=d[0].options[t].text;n.options.add(w)}}o=d[0].parentNode;o.removeChild(d[0]);o.appendChild(n)}d=s.getElementsByTagName("td")[b].getElementsByTagName("input");if(d.length>0){k=d[0].id.replace(/\[1\]/g,"["+
v+"]");d[0].id=k;d[0].name=k}d=null;break;case "a":if(d=s.getElementsByTagName("td")[b].getElementsByTagName("a")){k=d[0].id.replace(/\[1\]/g,"["+v+"]");d[0].id=k;d[0].name=k}d=null}}}this.aFields.length>0&&this.setFields(this.aFields,v);this.aFunctions.length>0&&this.assignFunctions(this.aFunctions,"change",v);this.aFormulas.length>0&&this.assignFormulas(this.aFormulas,"change",v);if(this.aFunctions.length>0)for(b=0;b<this.aFunctions.length;b++)if(k=document.getElementById("form["+this.sGridName+
"]["+v+"]["+this.aFunctions[b].sFieldName+"]"))switch(this.aFunctions[b].sFunction){case "sum":this.sum(false,k);break;case "avg":this.avg(false,k)}q=[];s=false;for(b=0;b<this.aFields.length;b++){k=this.getElementByName(v,this.aFields[b].sFieldName);if(typeof k!=="undefined"&&k!=null&&typeof k.dependentFields!=="undefined"&&k.dependentFields.length>0){s=false;for(d=0;d<q.length;d++)q[d]==k.name&&(s=true);for(t=0;t<k.dependentFields.length;t++)q.push(k.dependentFields[t].name);s||k.updateDepententFields()}}for(b=
0;b<this.aFields.length;b++){q="form["+f+"]["+v+"]["+this.aFields[b].sFieldName+"]";if(this.aFields[b].sType!="file"&&this.aFields[b].sType!="hidden"&&document.getElementById(q).focus){document.getElementById(q).focus();break}}if(this.onaddrow)this.onaddrow(v)};this.deleteGridRow=function(b,d){typeof d=="undefined"&&(d=false);if(this.oGrid.rows.length==3){(new leimnud.module.app.alert).make({label:G_STRINGS.ID_MSG_NODELETE_GRID_ITEM});return false}d?this.deleteRowWC(this,b):(new leimnud.module.app.confirm).make({label:G_STRINGS.ID_MSG_DELETE_GRID_ITEM,
action:function(){this.deleteRowWC(this,b)}.extend(this)})};this.deleteRowWC=function(b,d){var f=new String(d),f=f.replace("[",""),f=f.replace("]",""),f=Number(f),n=f+1,k=b.oGrid.rows.length-2,q,s="",v="",t;for(deleteRowOnDynaform(b,f);n<=k;){for(z=1;z<b.oGrid.rows[n-1].cells.length;z++){var w=b.oGrid.rows[n-1].cells[z];q=b.oGrid.rows[n].cells[z];switch(w.innerHTML.replace(/^\s+|\s+$/g,"").substr(0,6).toLowerCase()){case "<input":aObjects1=w.getElementsByTagName("input");aObjects2=q.getElementsByTagName("input");
if(aObjects1&&aObjects2)switch(aObjects2[0].type){case "file":q=aObjects2[0].parentNode;s=aObjects2[0].id;v=aObjects2[0].name;aObjects2[0].id=aObjects1[0].id;aObjects2[0].name=aObjects1[0].name;aObjects1[0].parentNode.replaceChild(aObjects2[0],aObjects1[0]);t=document.createElement("input");t.type="file";t.setAttribute("id",s);t.setAttribute("name",v);q.insertBefore(t,q.firstChild);break;default:if(aObjects2[0].type=="checkbox")aObjects1[0].checked=aObjects2[0].checked;aObjects1[0].value=aObjects2[0].value;
aObjects1[0].className=aObjects2[0].className}aObjects=w.getElementsByTagName("div");if(aObjects.length>0){if(aObjects[0]){aObjects[0].id=aObjects[0].id.replace("/["+(n-1)+"]/g","["+n+"]");aObjects[0].name=aObjects[0].id.replace("/["+(n-1)+"]/g","["+n+"]");if(aObjects[0].onclick){sAux=new String(aObjects[0].onclick);eval("aObjects[0].onclick = "+sAux.replace("/["+(n-1)+"]/g","["+n+"]")+";")}}if((aObjects=w.getElementsByTagName("a"))&&aObjects[0]&&aObjects[0].onclick){sAux=new String(aObjects[0].onclick);
eval("aObjects[0].onclick = "+sAux.replace("/["+(n-1)+"]/g","["+n+"]")+";")}}break;case "<selec":aObjects1=w.getElementsByTagName("select");aObjects2=q.getElementsByTagName("select");if(aObjects1&&aObjects2){w=aObjects2[0].value;for(q=aObjects1[0].options.length=0;q<aObjects2[0].options.length;q++){s=$dce("OPTION");s.text=aObjects2[0].options[q].text;s.value=aObjects2[0].options[q].value;aObjects1[0].options[q]=s}aObjects1[0].value=w;aObjects1[0].className=aObjects2[0].className}break;case "<texta":aObjects1=
w.getElementsByTagName("textarea");aObjects2=q.getElementsByTagName("textarea");if(aObjects1&&aObjects2){aObjects1[0].value=aObjects2[0].value;aObjects1[0].className=aObjects2[0].className}break;default:if(q.innerHTML.indexOf("changeValues")==111||q.innerHTML.indexOf("changeValues")==115)break;if(q.innerHTML.toLowerCase().indexOf("deletegridrow")==-1)w.innerHTML=q.innerHTML}}n++}this.oGrid.deleteRow(k);for(var z=0,z=0;z<=this.aFields.length-1;z++)this.aElements.pop();if(b.aFunctions.length>0)for(z=
0;z<=b.aFunctions.length-1;z++)if(n=document.getElementById("form["+b.sGridName+"][1]["+b.aFunctions[z].sFieldName+"]"))switch(b.aFunctions[z].sFunction){case "sum":b.sum(false,n);break;case "avg":b.avg(false,n)}if(b.ondeleterow)b.ondeleterow(f)};this.assignFunctions=function(b,d,f){for(var n,k=0,q=0,q=0;q<=b.length-1;q++)for(k=f||1;n=document.getElementById("form["+this.sGridName+"]["+k+"]["+b[q].sFieldName+"]");){switch(b[q].sFunction){case "sum":leimnud.event.add(n,d,{method:this.sum,instance:this,
event:true});break;case "avg":leimnud.event.add(n,d,{method:this.avg,instance:this,event:true});break;default:leimnud.event.add(n,d,{method:b[q].sFunction,instance:this,event:true})}k=k+1}};this.setFunctions=function(b){this.aFunctions=b;this.assignFunctions(this.aFunctions,"change")};this.determineBrowser=function(){var b=navigator.userAgent,d="";b.indexOf("Opera")!=-1?d="Opera":b.indexOf("MSIE")!=-1?d="MSIE":b.indexOf("Chrome")!=-1?d="Chrome":b.indexOf("Safari")!=-1?d="Safari":b.indexOf("Firefox")!=
-1&&(d="Firefox");return d};this.sum=function(b,f){var f=f?f:b.target||window.event.srcElement,o,n,k;o=f.name.split("][");k=0;o[2]=o[2].replace("]","");for(var q=1,s=0;s<this.aElements.length;s++){n=this.aElements[s].name.split("][");if(o[2]==n[2]&&q<=this.oGrid.rows.length-2){n=this.getElementByName(q,n[2]);var v=n.value().replace(/[$|a-zA-Z\s]/g,"");n!=null&&(n.value().trim()!=""&&v)&&(k=k+parseFloat(G.getValue(n)));q=q+1}}k=k.toFixed(2);n=document.getElementById("form[SYS_GRID_AGGREGATE_"+d.sGridName+
"_"+o[2]+"]");n.value=k;n=document.getElementById("form[SYS_GRID_AGGREGATE_"+d.sGridName+"__"+o[2]+"]");this.determineBrowser()=="MSIE"?n.innerText=k:n.innerHTML=k};this.avg=function(b,f){var f=f?f:b.target||window.event.srcElement,o,n,k,q;n=f.name.split("][");o=1;q=0;for(n[2]=n[2].replace("]","");k=this.getElementByName(o,n[2]);){k.value().trim()!=""&&(q=q+parseFloat(G.getValue(k)));o=o+1}o--;if(q>0){q=(q/o).toFixed(2);k=document.getElementById("form[SYS_GRID_AGGREGATE_"+d.sGridName+"_"+n[2]+"]");
k.value=q;k=document.getElementById("form[SYS_GRID_AGGREGATE_"+d.sGridName+"__"+n[2]+"]");this.determineBrowser()=="MSIE"?k.innerText=q:k.innerHTML=q}else{k=document.getElementById("form[SYS_GRID_AGGREGATE_"+d.sGridName+"_"+n[2]+"]");k.value=0;k=document.getElementById("form[SYS_GRID_AGGREGATE_"+d.sGridName+"__"+n[2]+"]");this.determineBrowser()=="MSIE"?k.innerText=0:k.innerHTML=0}};this.assignFormulas=function(b,d,f){for(var n,k=0,q=0,q=0;q<=b.length-1;q++)for(k=f||1;n=document.getElementById("form["+
this.sGridName+"]["+k+"]["+b[q].sDependentOf+"]");){leimnud.event.add(n,d,{method:this.evaluateFormula,instance:this,args:[n,b[q]],event:true});k=k+1}};this.setFormulas=function(b){this.aFormulas=b;this.assignFormulas(this.aFormulas,"change")};this.evaluateFormula=function(b,d,f){var d=d?d:b.target||window.event.srcElement,n,k,q,b=d.id,d=d.name.split("][");n=f.sFormula.replace(/\+|\-|\*|\/|\(|\)|\[|\]|\{|\}|\%|\$/g," ");n=n.replace(/^\s+|\s+$/g,"");n=n.replace(/      /g," ");n=n.replace(/     /g,
" ");n=n.replace(/    /g," ");n=n.replace(/   /g," ");n=n.replace(/  /g," ");aFields=n.split(" ");aFields=aFields.unique();n=f.sFormula;for(k=0;k<aFields.length;k++)if(!isNumber(aFields[k])){q=this.getElementByName(d[1],aFields[k]);n=n.replace(RegExp(aFields[k],"g"),"parseFloat(G.cleanMask(this.getElementByName("+d[1]+", '"+aFields[k]+"').value().replace(/[$|a-zA-Zs]/g,'') || 0, '"+(q.sMask?q.sMask:"")+"').result.replace(/,/g, ''))");eval("if (!document.getElementById('"+d[0]+"]["+d[1]+"]["+aFields[k]+
"]')) { oContinue = false; }")}eval("if (!document.getElementById('"+d[0]+"]["+d[1]+"]["+f.sFieldName+"]')) { oContinue = false; }");for(k=0;k<this.aFields.length;k++)if(f.sFieldName==this.aFields[k].sFieldName)maskformula=this.aFields[k].oProperties.mask;if(maskformula!=""){maskDecimal=maskformula.split(";");maskDecimal=maskDecimal.length>1?maskDecimal[1].split("."):maskformula.split(".");maskToPut=typeof maskDecimal[1]!="undefined"?maskDecimal[1].length:0}else maskToPut=0;document.getElementById(d[0]+
"]["+d[1]+"]["+f.sFieldName+"]").value="";this.executeEvent(document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]"),"keypress");eval("document.getElementById('"+d[0]+"]["+d[1]+"]["+f.sFieldName+"]').value = ("+n+").toFixed("+maskToPut+");");document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value=document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value.replace(/^\s*|\s*$/g,"");if(document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value=="NaN")document.getElementById(d[0]+
"]["+d[1]+"]["+f.sFieldName+"]").value="";k=document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value.replace(/[0-9.\s]/g,"");this.executeEvent(document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]"),"keypress");document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value=document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value.replace("-","");document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+"]").value=k+""+document.getElementById(d[0]+"]["+d[1]+"]["+f.sFieldName+
"]").value;typeof document.getElementById(b)!="undefined"&&document.getElementById(b).focus();if(this.aFunctions.length>0)for(k=0;k<this.aFunctions.length;k++)if((q=document.getElementById("form["+this.sGridName+"]["+d[1]+"]["+this.aFunctions[k].sFieldName+"]"))&&q.name==d[0]+"]["+d[1]+"]["+f.sFieldName+"]"){switch(this.aFunctions[k].sFunction){case "sum":this.sum(false,q);break;case "avg":this.avg(false,q)}if(q.fireEvent)q.fireEvent("onchange");else{b=document.createEvent("HTMLEvents");b.initEvent("change",
true,true);q.dispatchEvent(b)}}};this.deleteGridRownomsg=function(d){var f,d=d.replace("[",""),d=d.replace("]",""),d=Number(d);deleteRowOnDynaform(this,d);for(f=d+1;f<=this.oGrid.rows.length-2;){for(d=1;d<this.oGrid.rows[f-1].cells.length;d++){var o=this.oGrid.rows[f-1].cells[d],n=this.oGrid.rows[f].cells[d];switch(o.innerHTML.replace(/^\s+|\s+$/g,"").substr(0,6).toLowerCase()){case "<input":aObjects1=o.getElementsByTagName("input");aObjects2=n.getElementsByTagName("input");if(aObjects1&&aObjects2){if(aObjects1[0].type==
"checkbox")aObjects1[0].checked=aObjects2[0].checked;aObjects1[0].value=aObjects2[0].value}aObjects=o.getElementsByTagName("div");if(aObjects.length>0){if(aObjects[0]){aObjects[0].id=aObjects[0].id.replace(/\[1\]/g,"["+(this.oGrid.rows.length-2)+"]");aObjects[0].name=aObjects[0].id.replace(/\[1\]/g,"["+(this.oGrid.rows.length-2)+"]");if(aObjects[0].onclick){sAux=new String(aObjects[0].onclick);eval("aObjects[0].onclick = "+sAux.replace(/\[1\]/g,"["+(this.oGrid.rows.length-2)+"]")+";")}}if((aObjects=
o.getElementsByTagName("a"))&&aObjects[0]&&aObjects[0].onclick){sAux=new String(aObjects[0].onclick);eval("aObjects[0].onclick = "+sAux.replace(/\[1\]/g,"["+(this.oGrid.rows.length-2)+"]")+";")}}break;case "<selec":aObjects1=o.getElementsByTagName("select");aObjects2=n.getElementsByTagName("select");if(aObjects1&&aObjects2){n=aObjects2[0].value;for(o=aObjects1[0].options.length=0;o<aObjects2[0].options.length;o++){var k=$dce("OPTION");k.text=aObjects2[0].options[o].text;k.value=aObjects2[0].options[o].value;
aObjects1[0].options[o]=k}aObjects1[0].value=n}break;case "<texta":aObjects1=o.getElementsByTagName("textarea");aObjects2=n.getElementsByTagName("textarea");if(aObjects1&&aObjects2)aObjects1[0].value=aObjects2[0].value;break;default:if(n.innerHTML.indexOf("changeValues")==111||n.innerHTML.indexOf("changeValues")==115)break;if(n.innerHTML.toLowerCase().indexOf("deletegridrow")==-1)o.innerHTML=n.innerHTML}}f++}this.oGrid.deleteRow(this.oGrid.rows.length-2);this.aElements=[];for(f=1;f<=this.oGrid.rows.length-
2;f++)for(d=0;d<this.aFields.length;d++){o=f;switch(this.aFields[d].sType){case "text":this.aElements.push(new G_Text(b,document.getElementById("form["+this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName+"]"),this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName));this.aElements[this.aElements.length-1].validate=this.aFields[d].oProperties.validate;if(this.aFields[d].oProperties.strTo)this.aElements[this.aElements.length-1].strTo=this.aFields[d].oProperties.strTo;break;case "currency":this.aElements.push(new G_Currency(b,
document.getElementById("form["+this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName+"]"),this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName));break;case "percentage":this.aElements.push(new G_Percentage(b,document.getElementById("form["+this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName+"]"),this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName));break;case "dropdown":this.aElements.push(new G_DropDown(b,document.getElementById("form["+this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName+
"]"),this.sGridName+"]["+o+"]["+this.aFields[d].sFieldName))}}if(this.aFunctions.length>0)for(d=0;d<this.aFunctions.length;d++)if(f=document.getElementById("form["+this.sGridName+"][1]["+this.aFunctions[d].sFieldName+"]"))switch(this.aFunctions[d].sFunction){case "sum":this.sum(false,f);break;case "avg":this.avg(false,f)}if(this.ondeleterow)this.ondeleterow()}};
function deleteRowOnDynaform(b,f){var d=new leimnud.module.rpc.xmlhttp({url:"../gulliver/genericAjax",args:"request=deleteGridRowOnDynaform&gridname="+b.sGridName+"&rowpos="+f+"&formID="+b.form.id});d.callback=function(b){oPanel&&oPanel.loader.hide();scs=b.xmlhttp.responseText.extractScript();scs.evalScript();if(typeof oDebuggerPanel!="undefined"&&oDebuggerPanel!=null){oDebuggerPanel.clearContent();oDebuggerPanel.loader.show();b=new leimnud.module.rpc.xmlhttp({url:"cases_Ajax",args:"action=showdebug"});
b.callback=function(b){oDebuggerPanel.loader.hide();var d=b.xmlhttp.responseText.extractScript();oDebuggerPanel.addContent(b.xmlhttp.responseText);d.evalScript()}.extend(this);b.make()}}.extend(this);d.make()}
Calendar=function(){function b(b){typeof b=="string"&&(b=document.getElementById(b));return b}function f(b){var d=0,g=0,h=/^div$/i.test(b.tagName),k;h&&b.scrollLeft&&(d=b.scrollLeft);h&&b.scrollTop&&(g=b.scrollTop);d={x:b.offsetLeft-d,y:b.offsetTop-g};b.offsetParent&&(k=f(b.offsetParent),d.x=d.x+k.x,d.y=d.y+k.y);return d}function d(b,d){var f=L?b.clientX+document.body.scrollLeft:b.pageX,g=L?b.clientY+document.body.scrollTop:b.pageY;d&&(f=f-d.x,g=g-d.y);return{x:f,y:g}}function g(b,d){var f=b.style;
d!=null&&(f.display=d?"":"none");return f.display!="none"}function h(b,d){d===""?L?b.style.filter="":b.style.opacity="":d!=null?L?b.style.filter="alpha(opacity="+d*100+")":b.style.opacity=d:L?/alpha\(opacity=([0-9.])+\)/.test(b.style.opacity)&&(d=parseFloat(RegExp.$1)/100):d=parseFloat(b.style.opacity);return d}function o(b,d,f){function g(){var d=b.len;b.onUpdate(f/d,n);f==d&&h();++f}function h(){d&&(clearInterval(d),d=null);b.onStop(f/b.len,n)}function k(){d&&h();f=0;d=setInterval(g,1E3/b.fps)}
function n(b,d,f,g){return g?f+b*(d-f):d+b*(f-d)}b=I(b,{fps:50,len:15,onUpdate:O,onStop:O});L&&(b.len=Math.round(b.len/2));k();return{start:k,stop:h,update:g,args:b,map:n}}function n(b,d){if(!d(b))for(var f=b.firstChild;f;f=f.nextSibling)f.nodeType==1&&n(f,d)}function k(b,d){var f=q(arguments,2);return d==void 0?function(){return b.apply(this,f.concat(q(arguments)))}:function(){return b.apply(d,f.concat(q(arguments)))}}function q(b,d){d==null&&(d=0);var f,g,h;try{f=Array.prototype.slice.call(b,d)}catch(k){f=
Array(b.length-d);g=d;for(h=0;g<b.length;++g,++h)f[h]=b[g]}return f}function s(b,d,f){var g=null;document.createElementNS?g=document.createElementNS("http://www.w3.org/1999/xhtml",b):g=document.createElement(b);d&&(g.className=d);f&&f.appendChild(g);return g}function v(b,d,f){if(d instanceof Array)for(var g=d.length;--g>=0;)v(b,d[g],f);else t(d,f,b?f:null);return b}function t(b,d,f){if(b){var g=b.className.replace(/^\s+|\s+$/,"").split(/\x20/),h=[],k;for(k=g.length;k>0;)g[--k]!=d&&h.push(g[k]);f&&
h.push(f);b.className=h.join(" ")}return f}function w(b){b=b||window.event;L?(b.cancelBubble=true,b.returnValue=false):(b.preventDefault(),b.stopPropagation());return false}function z(b,d,f,g){if(b instanceof Array)for(var h=b.length;--h>=0;)z(b[h],d,f);else if(typeof d=="object")for(h in d)d.hasOwnProperty(h)&&z(b,h,d[h],f);else b.removeEventListener?b.removeEventListener(d,f,L?true:!!g):b.detachEvent?b.detachEvent("on"+d,f):b["on"+d]=null}function C(b,d,f,g){if(b instanceof Array)for(var h=b.length;--h>=
0;)C(b[h],d,f,g);else if(typeof d=="object")for(h in d)d.hasOwnProperty(h)&&C(b,h,d[h],f);else b.addEventListener?b.addEventListener(d,f,L?true:!!g):b.attachEvent?b.attachEvent("on"+d,f):b["on"+d]=f}function I(b,d,f,g){g={};for(f in d)d.hasOwnProperty(f)&&(g[f]=d[f]);for(f in b)b.hasOwnProperty(f)&&(g[f]=b[f]);return g}function Q(b){if(/\S/.test(b)){var b=b.toLowerCase(),d=function(d){for(var f=d.length;--f>=0;)if(d[f].toLowerCase().indexOf(b)==0)return f+1};return d(E("smn"))||d(E("mn"))}}function M(b){if(b){if(typeof b==
"number")return J(b);if(!(b instanceof Date)){b=b.split(/-/);return new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10),12,0,0,0)}}return b}function H(b,d){var f=b.getMonth(),g=b.getDate(),h=b.getFullYear(),k=A(b),n=b.getDay(),o=b.getHours(),q=o>=12,s=q?o-12:o,t;t=b;t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),12,0,0);var v=new Date(t.getFullYear(),0,1,12,0,0);t=Math.floor((t-v)/864E5);var v=b.getMinutes(),w=b.getSeconds(),z;s===0&&(s=12);z={"%a":E("sdn")[n],"%A":E("dn")[n],"%b":E("smn")[f],
"%B":E("mn")[f],"%C":1+Math.floor(h/100),"%d":g<10?"0"+g:g,"%e":g,"%H":o<10?"0"+o:o,"%I":s<10?"0"+s:s,"%j":t<10?"00"+t:t<100?"0"+t:t,"%k":o,"%l":s,"%m":f<9?"0"+(1+f):1+f,"%o":1+f,"%M":v<10?"0"+v:v,"%n":"\n","%p":q?"PM":"AM","%P":q?"pm":"am","%s":Math.floor(b.getTime()/1E3),"%S":w<10?"0"+w:w,"%t":"\t","%U":k<10?"0"+k:k,"%W":k<10?"0"+k:k,"%V":k<10?"0"+k:k,"%u":n+1,"%w":n,"%y":(""+h).substr(2,2),"%Y":h,"%%":"%"};return d.replace(/%./g,function(b){return z.hasOwnProperty(b)?z[b]:b})}function N(b,d,f){var g=
b.getFullYear(),h=b.getMonth(),b=b.getDate(),k=d.getFullYear(),n=d.getMonth(),d=d.getDate();return g<k?-3:g>k?3:h<n?-2:h>n?2:f?0:b<d?-1:b>d?1:0}function J(b,d,f,g,h){if(!(b instanceof Date))var b=parseInt(b,10),k=Math.floor(b/1E4),b=b%1E4,n=Math.floor(b/100),b=new Date(k,n-1,b%100,d==null?12:d,f==null?0:f,g==null?0:g,h==null?0:h);return b}function F(b){return b instanceof Date?1E4*b.getFullYear()+100*(b.getMonth()+1)+b.getDate():typeof b=="string"?parseInt(b,10):b}function A(b){var b=new Date(b.getFullYear(),
b.getMonth(),b.getDate(),12,0,0),d=b.getDay();b.setDate(b.getDate()-(d+6)%7+3);d=b.valueOf();b.setMonth(0);b.setDate(4);return Math.round((d-b.valueOf())/6048E5)+1}function E(b,d){var f=W.__.data[b];d&&typeof f=="string"&&(f=da(f,d));return f}function da(b,d){return b.replace(/\$\{([^:\}]+)(:[^\}]+)?\}/g,function(b,f,g){var h=d[f],T;g&&(T=g.substr(1).split(/\s*\|\s*/),h=(h>=T.length?T[T.length-1]:T[h]).replace(/##?/g,function(b){return b.length==2?"#":h}));return h})}function pa(b){if(!this._menuAnim){var b=
b||window.event,d=(b.target||b.srcElement).getAttribute("dyc-btn"),f=b.keyCode,g=b.charCode||f,h=qa[f];if("year"==d&&f==13){g=new Date(this.date);g.setDate(1);g.setFullYear(this._getInputYear());this.moveTo(g,true);R(this,false);return w(b)}if(this._menuVisible){if(f==27){R(this,false);return w(b)}}else{b.ctrlKey||(h=null);h==null&&!b.ctrlKey&&(h=ra[f]);f==36&&(h=0);if(h!=null){X(this,h);return w(b)}g=String.fromCharCode(g).toLowerCase();h=this.els.yearInput;d=this.selection;if(g==" "){R(this,true);
this.focus();h.focus();h.select();return w(b)}if(g>="0"&&g<="9"){R(this,true);this.focus();h.value=g;h.focus();return w(b)}for(var k=E("mn"),h=b.shiftKey?-1:this.date.getMonth(),n=0,o;++n<12;){o=k[(h+n)%12].toLowerCase();if(o.indexOf(g)==0){g=new Date(this.date);g.setDate(1);g.setMonth((h+n)%12);this.moveTo(g,true);return w(b)}}if(f>=37&&f<=40){g=this._lastHoverDate;if(!g&&!d.isEmpty()){g=f<39?d.getFirstDate():d.getLastDate();if(g<this._firstDateVisible||g>this._lastDateVisible)g=null}if(g){for(var q=
g,g=J(g),h=100;h-- >0;){switch(f){case 37:g.setDate(g.getDate()-1);break;case 38:g.setDate(g.getDate()-7);break;case 39:g.setDate(g.getDate()+1);break;case 40:g.setDate(g.getDate()+7)}if(!this.isDisabled(g))break}g=F(g);(g<this._firstDateVisible||g>this._lastDateVisible)&&this.moveTo(g)}else g=f<39?this._lastDateVisible:this._firstDateVisible;f=this._getDateDiv(q);q=this._getDateDiv(g);q=t(q,"DynarchCalendar-hover-date","DynarchCalendar-hover-date");t(f,q);this._lastHoverDate=g;return w(b)}if(f==
13&&this._lastHoverDate){d.type==B.SEL_MULTIPLE&&(b.shiftKey||b.ctrlKey)?(b.shiftKey&&this._selRangeStart&&(d.clear(true),d.selectRange(this._selRangeStart,this._lastHoverDate)),b.ctrlKey&&d.set(this._selRangeStart=this._lastHoverDate,true)):d.reset(this._selRangeStart=this._lastHoverDate);return w(b)}f==27&&!this.args.cont&&this.hide()}}}function sa(){this.refresh();var b=this.inputField,d=this.selection;if(b){var f=d.print(this.dateFormat);/input|textarea/i.test(b.tagName)?b.value=f:b.innerHTML=
f}this.callHooks("onSelect",this,d)}function ta(b){var b=b||window.event,d=Y(b);if(d){var f=d.getAttribute("dyc-btn"),d=d.getAttribute("dyc-type"),g=b.wheelDelta?b.wheelDelta/120:-b.detail/3,g=g<0?-1:g>0?1:0;this.args.reverseWheel&&(g=-g);if(/^(time-(hour|min))/.test(d))switch(RegExp.$1){case "time-hour":this.setHours(this.getHours()+g);break;case "time-min":this.setMinutes(this.getMinutes()+this.args.minuteStep*g)}else{/Y/i.test(f)&&(g=g*2);X(this,-g)}w(b)}}function Z(b,d){var d=d||window.event,
f=Y(d);if(f){var g=f.getAttribute("dyc-type");if(g&&!f.getAttribute("disabled")&&(!b||!this._bodyAnim||g!="date")){var h=f.getAttribute("dyc-cls"),h=h?aa(h,0):"DynarchCalendar-hover-"+g;(g!="date"||this.selection.type)&&v(b,f,h);g=="date"&&(v(b,f.parentNode.parentNode,"DynarchCalendar-hover-week"),this._showTooltip(f.getAttribute("dyc-date")));/^time-hour/.test(g)&&v(b,this.els.timeHour,"DynarchCalendar-hover-time");/^time-min/.test(g)&&v(b,this.els.timeMinute,"DynarchCalendar-hover-time");t(this._getDateDiv(this._lastHoverDate),
"DynarchCalendar-hover-date");this._lastHoverDate=null}}b||this._showTooltip()}function aa(b,d){return"DynarchCalendar-"+b.split(/,/)[d]}function Y(b){for(var d=b=b.target||b.srcElement;b&&b.getAttribute&&!b.getAttribute("dyc-type");)b=b.parentNode;return b.getAttribute&&b||d}function ua(b){var b=b||window.event,f=this.els.topCont.style,b=d(b,this._mouseDiff);f.left=b.x+"px";f.top=b.y+"px"}function fa(b,g){var g=g||window.event,h=Y(g);if(h&&!h.getAttribute("disabled")){var n=h.getAttribute("dyc-btn"),
o=h.getAttribute("dyc-type"),q=h.getAttribute("dyc-date"),s=this.selection,v,A={mouseover:w,mousemove:w,mouseup:function(){var b=h.getAttribute("dyc-cls");b&&t(h,aa(b,1));clearTimeout(v);z(document,A,true);A=null}};if(b){setTimeout(k(this.focus,this),1);var U=h.getAttribute("dyc-cls");if(U){U=aa(U,1);t(h,U,U)}if("menu"==n)this.toggleMenu();else if(h&&/^[+-][MY]$/.test(n))if(X(this,n)){var V=k(function(){X(this,n,true)?v=setTimeout(V,40):(A.mouseup(),X(this,n))},this);v=setTimeout(V,350);C(document,
A,true)}else A.mouseup();else if("year"==n){this.els.yearInput.focus();this.els.yearInput.select()}else{if(o!="time-am")if(/^time/.test(o)){V=k(function(b){ga.call(this,b);v=setTimeout(V,100)},this,o);ga.call(this,o);v=setTimeout(V,350)}else q&&s.type&&(s.type==B.SEL_MULTIPLE?g.shiftKey&&this._selRangeStart?s.selectRange(this._selRangeStart,q):(!g.ctrlKey&&!s.isSelected(q)&&s.clear(true),s.set(q,true),this._selRangeStart=q):(s.set(q),this.moveTo(J(q),2)),h=this._getDateDiv(q),Z.call(this,true,{target:h}));
C(document,A,true)}L&&A&&/dbl/i.test(g.type)&&A.mouseup();!this.args.fixed&&/^(DynarchCalendar-(topBar|bottomBar|weekend|weekNumber|menu(-sep)?))?$/.test(h.className)&&!this.args.cont&&(A.mousemove=k(ua,this),this._mouseDiff=d(g,f(this.els.topCont)),C(document,A,true))}else if("today"==n){!this._menuVisible&&s.type==B.SEL_SINGLE&&s.set(new Date);this.moveTo(new Date,true);R(this,false)}else if(/^m([0-9]+)/.test(n)){q=new Date(this.date);q.setDate(1);q.setMonth(RegExp.$1);q.setFullYear(this._getInputYear());
this.moveTo(q,true);R(this,false)}else o=="time-am"&&this.setHours(this.getHours()+12);L||w(g)}}function R(b,d){b._menuVisible=d;v(d,b.els.title,"DynarchCalendar-pressed-title");var f=b.els.menu;ba&&(f.style.height=b.els.main.offsetHeight+"px");if(b.args.animation){b._menuAnim&&b._menuAnim.stop();var k=b.els.main.offsetHeight;ba&&(f.style.width=b.els.topBar.offsetWidth+"px");d&&(f.firstChild.style.marginTop=-k+"px",b.args.opacity>0&&h(f,0),g(f,true));b._menuAnim=o({onUpdate:function(g,n){f.firstChild.style.marginTop=
n(S.accel_b(g),-k,0,!d)+"px";b.args.opacity>0&&h(f,n(S.accel_b(g),0,0.85,!d))},onStop:function(){b.args.opacity>0&&h(f,0.85);f.firstChild.style.marginTop="";b._menuAnim=null;d||(g(f,false),b.focused&&b.focus())}})}else{g(f,d);b.focused&&b.focus()}}function X(b,d,f){this._bodyAnim&&this._bodyAnim.stop();var g;if(d!=0){g=new Date(b.date);g.setDate(1);switch(d){case "-Y":case -2:g.setFullYear(g.getFullYear()-1);break;case "+Y":case 2:g.setFullYear(g.getFullYear()+1);break;case "-M":case -1:g.setMonth(g.getMonth()-
1);break;case "+M":case 1:g.setMonth(g.getMonth()+1)}}else g=new Date;return b.moveTo(g,!f)}function ga(b){switch(b){case "time-hour+":this.setHours(this.getHours()+1);break;case "time-hour-":this.setHours(this.getHours()-1);break;case "time-min+":this.setMinutes(this.getMinutes()+this.args.minuteStep);break;case "time-min-":this.setMinutes(this.getMinutes()-this.args.minuteStep)}}function va(){this._bluringTimeout=setTimeout(k(ha,this),50)}function ha(){this.focused=false;t(this.els.main,"DynarchCalendar-focused");
this._menuVisible&&R(this,false);this.args.cont||this.hide();this.callHooks("onBlur",this)}function ia(){this._bluringTimeout&&clearTimeout(this._bluringTimeout);this.focused=true;t(this.els.main,"DynarchCalendar-focused","DynarchCalendar-focused");this.callHooks("onFocus",this)}function ja(b){function d(){if(g.showTime){f.push("<td>");var h=b,k=f;k.push("<table class='DynarchCalendar-time'"+P+"><tr>","<td rowspan='2'><div dyc-type='time-hour' dyc-cls='hover-time,pressed-time' class='DynarchCalendar-time-hour'></div></td>",
"<td dyc-type='time-hour+' dyc-cls='hover-time,pressed-time' class='DynarchCalendar-time-up'></td>","<td rowspan='2' class='DynarchCalendar-time-sep'></td>","<td rowspan='2'><div dyc-type='time-min' dyc-cls='hover-time,pressed-time' class='DynarchCalendar-time-minute'></div></td>","<td dyc-type='time-min+' dyc-cls='hover-time,pressed-time' class='DynarchCalendar-time-up'></td>");h.args.showTime==12&&k.push("<td rowspan='2' class='DynarchCalendar-time-sep'></td>","<td rowspan='2'><div class='DynarchCalendar-time-am' dyc-type='time-am' dyc-cls='hover-time,pressed-time'></div></td>");
k.push("</tr><tr>","<td dyc-type='time-hour-' dyc-cls='hover-time,pressed-time' class='DynarchCalendar-time-down'></td>","<td dyc-type='time-min-' dyc-cls='hover-time,pressed-time' class='DynarchCalendar-time-down'></td>","</tr></table>");f.push("</td>")}}var f=[],g=b.args;f.push("<table",P," style='width:100%'><tr>");g.timePos=="left"&&d();g.bottomBar&&(f.push("<td>"),f.push("<table",P,"><tr><td>","<div dyc-btn='today' dyc-cls='hover-bottomBar-today,pressed-bottomBar-today' dyc-type='bottomBar-today' ",
"class='DynarchCalendar-bottomBar-today'>",E("today"),"</div>","</td></tr></table>"),f.push("</td>"));g.timePos=="right"&&d();f.push("</tr></table>");return f.join("")}function ka(b){for(var b=["<table height='100%'",P,"><tr><td>","<table style='margin-top: 1.5em'",P,">","<tr><td colspan='3'><input dyc-btn='year' class='DynarchCalendar-menu-year' size='6' value='",b.date.getFullYear(),"' /></td></tr>","<tr><td><div dyc-type='menubtn' dyc-cls='hover-navBtn,pressed-navBtn' dyc-btn='today'>",E("goToday"),
"</div></td></tr>","</table>","<p class='DynarchCalendar-menu-sep'>&nbsp;</p>","<table class='DynarchCalendar-menu-mtable'",P,">"],d=E("smn"),f=0,g=b.length,h;f<12;){b[g++]="<tr>";for(h=4;--h>0;)b[g++]="<td><div dyc-type='menubtn' dyc-cls='hover-navBtn,pressed-navBtn' dyc-btn='m"+f+"' class='DynarchCalendar-menu-month'>"+d[f++]+"</div></td>";b[g++]="</tr>"}b[g++]="</table></td></tr></table>";return b.join("")}function la(b){return"<div unselectable='on'>"+H(b.date,b.args.titleFormat)+"</div>"}function ca(b,
d,f){var d=d||b.date,f=f||b.fdow,d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),12,0,0,0),g=d.getMonth(),h=[],k=0,n=b.args.weekNumbers;d.setDate(1);f=(d.getDay()-f)%7;f<0&&(f=f+7);d.setDate(0-f);d.setDate(d.getDate()+1);var o=new Date,f=o.getDate(),q=o.getMonth(),o=o.getFullYear();h[k++]="<table class='DynarchCalendar-bodyTable'"+P+">";for(var s=0;s<6;++s){h[k++]="<tr class='DynarchCalendar-week";s==0&&(h[k++]=" DynarchCalendar-first-row");s==5&&(h[k++]=" DynarchCalendar-last-row");h[k++]="'>";
n&&(h[k++]="<td class='DynarchCalendar-first-col'><div class='DynarchCalendar-weekNumber'>"+A(d)+"</div></td>");for(var t=0;t<7;++t){var v=d.getDate(),w=d.getMonth(),z=d.getFullYear(),K=1E4*z+100*(w+1)+v,C=b.selection.isSelected(K),B=b.isDisabled(d);h[k++]="<td class='";t==0&&!n&&(h[k++]=" DynarchCalendar-first-col");t==0&&s==0&&(b._firstDateVisible=K);t==6&&(h[k++]=" DynarchCalendar-last-col",s==5&&(b._lastDateVisible=K));C&&(h[k++]=" DynarchCalendar-td-selected");h[k++]="'><div dyc-type='date' unselectable='on' dyc-date='"+
K+"' ";B&&(h[k++]="disabled='1' ");h[k++]="class='DynarchCalendar-day";E("weekend").indexOf(d.getDay())>=0&&(h[k++]=" DynarchCalendar-weekend");w!=g&&(h[k++]=" DynarchCalendar-day-othermonth");v==f&&w==q&&z==o&&(h[k++]=" DynarchCalendar-day-today");B&&(h[k++]=" DynarchCalendar-day-disabled");C&&(h[k++]=" DynarchCalendar-day-selected");(B=b.args.dateInfo(d))&&B.klass&&(h[k++]=" "+B.klass);h[k++]="'>"+v+"</div></td>";d=new Date(z,w,v+1,12,0,0,0)}h[k++]="</tr>"}h[k++]="</table>";return h.join("")}function ma(b){var d=
["<table",P,"><tr>"],f=0;for(b.args.weekNumbers&&d.push("<td><div class='DynarchCalendar-weekNumber'>",E("wk"),"</div></td>");f<7;){var g=(f++ +b.fdow)%7;d.push("<td><div",E("weekend").indexOf(g)>=0?" class='DynarchCalendar-weekend'>":">",E("sdn")[g],"</div></td>")}d.push("</tr></table>");return d.join("")}function B(d){d=d||{};this.args=d=I(d,{animation:!ba,cont:null,bottomBar:true,date:true,fdow:E("fdow"),min:null,max:null,reverseWheel:false,selection:[],selectionType:B.SEL_SINGLE,weekNumbers:false,
align:"Bl/ / /T/r",inputField:null,trigger:null,dateFormat:"%Y-%m-%d",fixed:false,opacity:L?1:3,titleFormat:"%b %Y",showTime:false,timePos:"right",time:true,minuteStep:5,noScroll:false,disabled:O,checkRange:false,dateInfo:O,onChange:O,onSelect:O,onTimeChange:O,onFocus:O,onBlur:O});this.handlers={};var f=new Date;d.min=M(d.min);d.max=M(d.max);d.date===true&&(d.date=f);d.time===true&&(d.time=f.getHours()*100+Math.floor(f.getMinutes()/d.minuteStep)*d.minuteStep);this.date=M(d.date);this.time=d.time;
this.fdow=d.fdow;for(var f="onChange onSelect onTimeChange onFocus onBlur".split(/\s+/),g=void 0,g=0;g<f.length;++g){var h=f[g],o=d[h];o instanceof Array||(o=[o]);this.handlers[h]=o}this.selection=new B.Selection(d.selection,d.selectionType,sa,this);var f=s("div"),q=this.els={},g={mousedown:k(fa,this,true),mouseup:k(fa,this,false),mouseover:k(Z,this,true),mouseout:k(Z,this,false),keypress:k(pa,this)};this.args.noScroll||(g[wa?"DOMMouseScroll":"mousewheel"]=k(ta,this));L&&(g.dblclick=g.mousedown,g.keydown=
g.keypress);h=["<table class='DynarchCalendar-topCont'",P,"><tr><td>","<div class='DynarchCalendar'>",L?"<a class='DynarchCalendar-focusLink' href='#'></a>":"<button class='DynarchCalendar-focusLink'></button>","<div class='DynarchCalendar-topBar'>","<div dyc-type='nav' dyc-btn='-Y' dyc-cls='hover-navBtn,pressed-navBtn' ","class='DynarchCalendar-navBtn DynarchCalendar-prevYear'><div></div></div>","<div dyc-type='nav' dyc-btn='+Y' dyc-cls='hover-navBtn,pressed-navBtn' ","class='DynarchCalendar-navBtn DynarchCalendar-nextYear'><div></div></div>",
"<div dyc-type='nav' dyc-btn='-M' dyc-cls='hover-navBtn,pressed-navBtn' ","class='DynarchCalendar-navBtn DynarchCalendar-prevMonth'><div></div></div>","<div dyc-type='nav' dyc-btn='+M' dyc-cls='hover-navBtn,pressed-navBtn' ","class='DynarchCalendar-navBtn DynarchCalendar-nextMonth'><div></div></div>","<table class='DynarchCalendar-titleCont'",P,"><tr><td>","<div dyc-type='title' dyc-btn='menu' dyc-cls='hover-title,pressed-title' class='DynarchCalendar-title'>",la(this),"</div></td></tr></table>",
"<div class='DynarchCalendar-dayNames'>",ma(this),"</div>","</div>","<div class='DynarchCalendar-body'></div>"];(this.args.bottomBar||this.args.showTime)&&h.push("<div class='DynarchCalendar-bottomBar'>",ja(this),"</div>");h.push("<div class='DynarchCalendar-menu' style='display: none'>",ka(this),"</div>","<div class='DynarchCalendar-tooltip'></div>","</div>","</td></tr></table>");h=h.join("");f.innerHTML=h;n(f.firstChild,function(b){var d=na[b.className];d&&(q[d]=b);L&&b.setAttribute("unselectable",
"on")});C(q.main,g);C([q.focusLink,q.yearInput],this._focusEvents={focus:k(ia,this),blur:k(va,this)});this.moveTo(this.date,false);this.setTime(null,true);f=q.topCont;d.cont&&b(d.cont).appendChild(f);d.trigger&&this.manageFields(d.trigger,d.inputField,d.dateFormat)}var D=navigator.userAgent,oa=/opera/i.test(D),xa=/Konqueror|Safari|KHTML/i.test(D),L=/msie/i.test(D)&&!oa&&!/mac_powerpc/i.test(D),ba=L&&/msie 6/i.test(D),wa=/gecko/i.test(D)&&!xa&&!oa&&!L,D=B.prototype,W=B.I18N={};B.SEL_NONE=0;B.SEL_SINGLE=
1;B.SEL_MULTIPLE=2;B.SEL_WEEK=3;B.dateToInt=F;B.intToDate=J;B.printDate=H;B.formatString=da;B.i18n=E;B.LANG=function(b,d,f){W.__=W[b]={name:d,data:f}};B.setup=function(b){return new B(b)};D.moveTo=function(b,d){var f=this,b=M(b),g=N(b,f.date,true),k,n=f.args,q=n.min&&N(b,n.min),t=n.max&&N(b,n.max);n.animation||(d=false);v(q!=null&&q<=1,[f.els.navPrevMonth,f.els.navPrevYear],"DynarchCalendar-navDisabled");v(t!=null&&t>=-1,[f.els.navNextMonth,f.els.navNextYear],"DynarchCalendar-navDisabled");q<-1&&
(b=n.min,k=1,g=0);t>1&&(b=n.max,k=2,g=0);f.date=b;f.refresh(!!d);f.callHooks("onChange",f,b,d);if(d&&(g!=0||d!=2)){f._bodyAnim&&f._bodyAnim.stop();var w=f.els.body,z=s("div","DynarchCalendar-animBody-"+ya[g],w),n=w.firstChild;h(n);var A=k?S.brakes:g==0?S.shake:S.accel_ab2,B=g*g>4,ea=B?n.offsetTop:n.offsetLeft,C=z.style,K=B?w.offsetHeight:w.offsetWidth;g<0?K=K+ea:g>0?K=ea-K:(K=Math.round(K/7),k==2&&(K=-K));if(!k&&g!=0){var D=z.cloneNode(true),E=D.style,F=2*K;D.appendChild(n.cloneNode(true));E[B?"marginTop":
"marginLeft"]=K+"px";w.appendChild(D)}n.style.visibility="hidden";z.innerHTML=ca(f);f._bodyAnim=o({onUpdate:function(b,d){var n=A(b);if(D)var o=d(n,K,F)+"px";if(k)C[B?"marginTop":"marginLeft"]=d(n,K,0)+"px";else{if(B||g==0){C.marginTop=d(g==0?A(b*b):n,0,K)+"px";g!=0&&(E.marginTop=o)}if(!B||g==0){C.marginLeft=d(n,0,K)+"px";g!=0&&(E.marginLeft=o)}}f.args.opacity>2&&D&&(h(D,1-n),h(z,n))},onStop:function(){w.innerHTML=ca(f,b);f._bodyAnim=null}})}f._lastHoverDate=null;return q>=-1&&t<=1};D.isDisabled=
function(b){var d=this.args;return d.min&&N(b,d.min)<0||d.max&&N(b,d.max)>0||d.disabled(b)};D.toggleMenu=function(){R(this,!this._menuVisible)};D.refresh=function(b){var d=this.els;b||(d.body.innerHTML=ca(this));d.title.innerHTML=la(this);d.yearInput.value=this.date.getFullYear()};D.redraw=function(){var b=this,d=b.els;b.refresh();d.dayNames.innerHTML=ma(b);d.menu.innerHTML=ka(b);d.bottomBar&&(d.bottomBar.innerHTML=ja(b));n(d.topCont,function(f){var g=na[f.className];g&&(d[g]=f);f.className=="DynarchCalendar-menu-year"?
(C(f,b._focusEvents),d.yearInput=f):L&&f.setAttribute("unselectable","on")});b.setTime(null,true)};D.setLanguage=function(b){(b=B.setLanguage(b))&&(this.fdow=b.data.fdow,this.redraw())};B.setLanguage=function(b){(b=W[b])&&(W.__=b);return b};D.focus=function(){try{this.els[this._menuVisible?"yearInput":"focusLink"].focus()}catch(b){}ia.call(this)};D.blur=function(){this.els.focusLink.blur();this.els.yearInput.blur();ha.call(this)};D.showAt=function(b,d,f){this._showAnim&&this._showAnim.stop();var f=
f&&this.args.animation,g=this.els.topCont,k=this,n=this.els.body.firstChild,q=n.offsetHeight,s=g.style;s.position="absolute";s.left=b+"px";s.top=d+"px";s.zIndex=1E4;s.display="";f&&(n.style.marginTop=-q+"px",this.args.opacity>1&&h(g,0),this._showAnim=o({onUpdate:function(b,d){n.style.marginTop=-d(S.accel_b(b),q,0)+"px";k.args.opacity>1&&h(g,b)},onStop:function(){k.args.opacity>1&&h(g,"");k._showAnim=null}}))};D.hide=function(){var b=this.els.topCont,d=this,g=this.els.body.firstChild,k=g.offsetHeight,
n=f(b).y;this.args.animation?(this._showAnim&&this._showAnim.stop(),this._showAnim=o({onUpdate:function(f,o){d.args.opacity>1&&h(b,1-f);g.style.marginTop=-o(S.accel_b(f),0,k)+"px";b.style.top=o(S.accel_ab(f),n,n-10)+"px"},onStop:function(){b.style.display="none";g.style.marginTop="";d.args.opacity>1&&h(b,"");d._showAnim=null}})):b.style.display="none";this.inputField=null};D.popup=function(d,g){var h,k,n,o;function q(b){var f={x:A.x,y:A.y};if(!b)return f;/B/.test(b)&&(f.y=f.y+d.offsetHeight);/b/.test(b)&&
(f.y=f.y+(d.offsetHeight-w.y));/T/.test(b)&&(f.y=f.y-w.y);/l/.test(b)&&(f.x=f.x-(w.x-d.offsetWidth));/L/.test(b)&&(f.x=f.x-w.x);/R/.test(b)&&(f.x=f.x+d.offsetWidth);/c/i.test(b)&&(f.x=f.x+(d.offsetWidth-w.x)/2);/m/i.test(b)&&(f.y=f.y+(d.offsetHeight-w.y)/2);return f}d=b(d);g||(g=this.args.align);var g=g.split(/\x2f/),s=f(d),t=this.els.topCont,v=t.style,w;o=document.documentElement;var z=document.body;h=o.scrollLeft||z.scrollLeft;k=o.scrollTop||z.scrollTop;n=o.clientWidth||window.innerWidth||z.clientWidth;
o=o.clientHeight||window.innerHeight||z.clientHeight;v.visibility="hidden";v.display="";this.showAt(0,0);document.body.appendChild(t);w={x:t.offsetWidth,y:t.offsetHeight};var A=s,A=q(g[0]);A.y<k&&(A.y=s.y,A=q(g[1]));A.x+w.x>h+n&&(A.x=s.x,A=q(g[2]));A.y+w.y>k+o&&(A.y=s.y,A=q(g[3]));A.x<h&&(A.x=s.x,A=q(g[4]));this.showAt(A.x,A.y,true);v.visibility="";this.focus()};D.manageFields=function(d,f,g){var h=this,f=b(f),d=b(d);/^button$/i.test(d.tagName)&&d.setAttribute("type","button");C(d,"click",function(){h.inputField=
f;h.dateFormat=g;if(h.selection.type==B.SEL_SINGLE){var b,k,n,o;(b=/input|textarea/i.test(f.tagName)?f.value:f.innerText||f.textContent)&&(k=/(^|[^%])%[bBmo]/.exec(g),n=/(^|[^%])%[de]/.exec(g),k&&n&&(o=k.index<n.index),b=Calendar.parseDate(b,o),b&&(h.selection.set(b,false,true),h.args.showTime&&(h.setHours(b.getHours()),h.setMinutes(b.getMinutes())),h.moveTo(b)))}h.popup(d)})};D.callHooks=function(b){for(var d=q(arguments,1),f=this.handlers[b],g=0;g<f.length;++g)f[g].apply(this,d)};D.addEventListener=
function(b,d){this.handlers[b].push(d)};D.removeEventListener=function(b,d){for(var f=this.handlers[b],g=f.length;--g>=0;)f[g]===d&&f.splice(g,1)};D.getTime=function(){return this.time};D.setTime=function(b,d){if(this.args.showTime){this.time=b=b!=null?b:this.time;var f=this.getHours(),g=this.getMinutes();this.args.showTime==12&&(f==0&&(f=12),f>12&&(f=f-12),this.els.timeAM.innerHTML=E(f<12?"AM":"PM"));f<10&&(f="0"+f);g<10&&(g="0"+g);this.els.timeHour.innerHTML=f;this.els.timeMinute.innerHTML=g;d||
this.callHooks("onTimeChange",this,b)}};D.getHours=function(){return Math.floor(this.time/100)};D.getMinutes=function(){return this.time%100};D.setHours=function(b){b<0&&(b=b+24);this.setTime(100*(b%24)+this.time%100)};D.setMinutes=function(b){b<0&&(b=b+60);b=Math.floor(b/this.args.minuteStep)*this.args.minuteStep;this.setTime(100*this.getHours()+b%60)};D._getInputYear=function(){var b=parseInt(this.els.yearInput.value,10);isNaN(b)&&(b=this.date.getFullYear());return b};D._showTooltip=function(b){var d=
"",f,g=this.els.tooltip;b&&(b=J(b),f=this.args.dateInfo(b),f&&f.tooltip&&(d="<div class='DynarchCalendar-tooltipCont'>"+H(b,f.tooltip)+"</div>"));g.innerHTML=d};var P=" align='center' cellspacing='0' cellpadding='0'",na={"DynarchCalendar-topCont":"topCont","DynarchCalendar-focusLink":"focusLink",DynarchCalendar:"main","DynarchCalendar-topBar":"topBar","DynarchCalendar-title":"title","DynarchCalendar-dayNames":"dayNames","DynarchCalendar-body":"body","DynarchCalendar-menu":"menu","DynarchCalendar-menu-year":"yearInput",
"DynarchCalendar-bottomBar":"bottomBar","DynarchCalendar-tooltip":"tooltip","DynarchCalendar-time-hour":"timeHour","DynarchCalendar-time-minute":"timeMinute","DynarchCalendar-time-am":"timeAM","DynarchCalendar-navBtn DynarchCalendar-prevYear":"navPrevYear","DynarchCalendar-navBtn DynarchCalendar-nextYear":"navNextYear","DynarchCalendar-navBtn DynarchCalendar-prevMonth":"navPrevMonth","DynarchCalendar-navBtn DynarchCalendar-nextMonth":"navNextMonth"},ya={"-3":"backYear","-2":"back","0":"now",2:"fwd",
3:"fwdYear"},qa={37:-1,38:-2,39:1,40:2},ra={33:-1,34:1};D._getDateDiv=function(b){var d=null;if(b)try{n(this.els.body,function(f){if(f.getAttribute("dyc-date")==b)throw d=f;})}catch(f){}return d};(B.Selection=function(b,d,f,g){this.type=d;this.sel=b instanceof Array?b:[b];this.onChange=k(f,g);this.cal=g}).prototype={get:function(){return this.type==B.SEL_SINGLE?this.sel[0]:this.sel},isEmpty:function(){return this.sel.length==0},set:function(b,d,f){var g=this.type==B.SEL_SINGLE;b instanceof Array?
(this.sel=b,this.normalize(),f||this.onChange(this)):(b=F(b),g||!this.isSelected(b)?(g?this.sel=[b]:this.sel.splice(this.findInsertPos(b),0,b),this.normalize(),f||this.onChange(this)):d&&this.unselect(b,f))},reset:function(){this.sel=[];this.set.apply(this,arguments)},countDays:function(){for(var b=0,d=this.sel,f=d.length,g,h,k;--f>=0;){g=d[f];g instanceof Array&&(h=J(g[0]),k=J(g[1]),b=b+Math.round(Math.abs(k.getTime()-h.getTime())/864E5));++b}return b},unselect:function(b,d){for(var b=F(b),f=false,
g=this.sel,h=g.length,k;--h>=0;){k=g[h];if(k instanceof Array){if(b>=k[0]&&b<=k[1]){var f=J(b),n=f.getDate();if(b==k[0]){f.setDate(n+1);k[0]=F(f)}else{if(b==k[1])f.setDate(n-1);else{var o=new Date(f);o.setDate(n+1);f.setDate(n-1);g.splice(h+1,0,[F(o),k[1]])}k[1]=F(f)}f=true}}else b==k&&(g.splice(h,1),f=true)}f&&(this.normalize(),d||this.onChange(this))},normalize:function(){for(var b=this.sel=this.sel.sort(function(b,d){b instanceof Array&&(b=b[0]);d instanceof Array&&(d=d[0]);return b-d}),d=b.length,
f,g;--d>=0;){f=b[d];if(f instanceof Array){if(f[0]>f[1]){b.splice(d,1);continue}f[0]==f[1]&&(f=b[d]=f[0])}if(g){var h=g,k=f instanceof Array?f[1]:f,k=J(k);k.setDate(k.getDate()+1);k=F(k);if(k>=h){h=b[d+1];f instanceof Array&&h instanceof Array?(f[1]=h[1],b.splice(d+1,1)):f instanceof Array?(f[1]=g,b.splice(d+1,1)):h instanceof Array?(h[0]=f,b.splice(d,1)):(b[d]=[f,h],b.splice(d+1,1))}}g=f instanceof Array?f[0]:f}},findInsertPos:function(b){for(var d=this.sel,f=d.length,g;--f>=0;){g=d[f];g instanceof
Array&&(g=g[0]);if(g<=b)break}return f+1},clear:function(b){this.sel=[];b||this.onChange(this)},selectRange:function(b,d){b=F(b);d=F(d);if(b>d)var f=b,b=d,d=f;var g=this.cal.args.checkRange;if(!g)return this._do_selectRange(b,d);try{for(var h=(new B.Selection([[b,d]],B.SEL_MULTIPLE,O)).getDates(),n=k(function(b){if(this.isDisabled(b)){g instanceof Function&&g(b,this);throw"OUT";}},this.cal),f=void 0,f=0;f<h.length;++f)n(h[f]);this._do_selectRange(b,d)}catch(o){}},_do_selectRange:function(b,d){this.sel.push([b,
d]);this.normalize();this.onChange(this)},isSelected:function(b){for(var d=this.sel.length,f;--d>=0;){f=this.sel[d];if(f instanceof Array&&b>=f[0]&&b<=f[1]||b==f)return true}return false},getFirstDate:function(){var b=this.sel[0];b&&b instanceof Array&&(b=b[0]);return b},getLastDate:function(){if(this.sel.length>0){var b=this.sel[this.sel.length-1];b&&b instanceof Array&&(b=b[1]);return b}},print:function(b,d){var f=[],g=0,h,k=this.cal.getHours(),n=this.cal.getMinutes();for(d||(d=" -> ");g<this.sel.length;){h=
this.sel[g++];h instanceof Array?f.push(H(J(h[0],k,n),b)+d+H(J(h[1],k,n),b)):f.push(H(J(h,k,n),b))}return f},getDates:function(b){for(var d=[],f=0,g,h;f<this.sel.length;){h=this.sel[f++];if(h instanceof Array){g=J(h[0]);for(h=h[1];F(g)<h;){d.push(b?H(g,b):new Date(g));g.setDate(g.getDate()+1)}}else g=J(h);d.push(b?H(g,b):g)}return d}};B.isUnicodeLetter=function(b){return b.toUpperCase()!=b.toLowerCase()};B.parseDate=function(b,d,f){if(!/\S/.test(b))return"";var b=b.replace(/^\s+/,"").replace(/\s+$/,
""),f=f||new Date,g=null,h=null,k=null,n=null,o=null,q=null,s=b.match(/([0-9]{1,2}):([0-9]{1,2})(:[0-9]{1,2})?\s*(am|pm)?/i);s&&(n=parseInt(s[1],10),o=parseInt(s[2],10),q=s[3]?parseInt(s[3].substr(1),10):0,b=b.substring(0,s.index)+b.substr(s.index+s[0].length),s[4]&&(s[4].toLowerCase()=="pm"&&n<12?n=n+12:s[4].toLowerCase()=="am"&&n>=12&&(n=n-12)));for(var t=function(d){for(;b.charAt(v)&&A(b.charAt(v));)d=d+b.charAt(v++);return d},v=0,s=[],w,A=B.isUnicodeLetter;v<b.length;){w=b.charAt(v);if(A(w)){w=
t("");s.push(w)}else if(/[0-9]/.test(w)){for(w="";b.charAt(v)&&/[0-9]/.test(b.charAt(v));)w=w+b.charAt(v++);w=A(b.charAt(v))?t(w):parseInt(w,10);s.push(w)}else b.charAt(v++)}t=[];for(w=0;w<s.length;++w){var z=s[w];/^[0-9]{4}$/.test(z)?(g=parseInt(z,10),h==null&&k==null&&d==null&&(d=true)):/^[0-9]{1,2}$/.test(z)?(z=parseInt(z,10),z<60?z<0||z>12?z>=1&&z<=31&&(k=z):t.push(z):g=z):h==null&&(h=Q(z))}t.length<2?t.length==1&&(k==null?k=t.shift():h==null&&(h=t.shift())):d?(h==null&&(h=t.shift()),k==null&&
(k=t.shift())):(k==null&&(k=t.shift()),h==null&&(h=t.shift()));g==null&&(g=t.length>0?t.shift():f.getFullYear());g<30?g=g+2E3:g<99&&(g=g+1900);h==null&&(h=f.getMonth()+1);return g!=null&&h!=null&&k!=null?new Date(g,h-1,k,n,o,q):null};var S={elastic_b:function(b){return 1-Math.cos(-b*5.5*Math.PI)/Math.pow(2,7*b)},magnetic:function(b){return 1-Math.cos(b*b*b*10.5*Math.PI)/Math.exp(4*b)},accel_b:function(b){b=1-b;return 1-b*b*b*b},accel_a:function(b){return b*b*b},accel_ab:function(b){b=1-b;return 1-
Math.sin(b*b*Math.PI/2)},accel_ab2:function(b){return(b=b/0.5)<1?0.5*b*b:-0.5*(--b*(b-2)-1)},brakes:function(b){b=1-b;return 1-Math.sin(b*b*Math.PI)},shake:function(b){return b<0.5?-Math.cos(b*11*Math.PI)*b*b:(b=1-b,Math.cos(b*11*Math.PI)*b*b)}},O=new Function;return B}();var Static_AutosuggestResponseData,swStoreEntry=1;"undefined"==typeof bsn&&(_b=bsn={});"undefined"==typeof _b.Autosuggest?_b.Autosuggest={}:alert("Autosuggest is already set!");
_b.AutoSuggest=function(b,f){if(!document.getElementById)return 0;this.fld=_b.DOM.gE(b);if(!this.fld)return 0;this.sInp="";this.nInpC=0;this.aSug=[];this.iHigh=0;this.oP=f?f:{};var d,g={minchars:1,meth:"get",varname:"input",className:"autosuggest",timeout:5E3,delay:50,offsety:-5,shownoresults:true,noresults:"No results!",maxheight:250,cache:true,maxentries:25};for(d in g)typeof this.oP[d]!=typeof g[d]&&(this.oP[d]=g[d]);var h=this;this.fld.onkeypress=function(b){return h.onKeyPress(b)};this.fld.onkeyup=
function(b){return h.onKeyUp(b)};this.fld.setAttribute("autocomplete","off")};
_b.AutoSuggest.prototype.onKeyPress=function(b){switch(window.event?window.event.keyCode:b.keyCode){case 13:if(typeof this.oP.storeEntryData!="undefined"&&this.oP.storeEntryData[0]==1){b=document.getElementById(this.oP.storeEntryData[1]);if(b.value!=""&&swStoreEntry==1&&typeof Static_AutosuggestResponseData!="undefined"&&Static_AutosuggestResponseData.results.length>0)for(var f=0;f<=Static_AutosuggestResponseData.results.length-1;f++)Static_AutosuggestResponseData.results[f].value==b.value&&(swStoreEntry=
0);b.value==""&&(swStoreEntry=0);swStoreEntry==1&&storeEntryProcessAjax(b,this.oP.storeEntryData[2],this.oP.storeEntryData[3],this.oP.storeEntryData[4],this.oP.storeEntryData[5],this.oP.storeEntryData[6])}this.setHighlightedValue();return false;case 27:this.clearSuggestions();break;default:swStoreEntry=1}return 1};
_b.AutoSuggest.prototype.onKeyUp=function(b){var b=window.event?window.event.keyCode:b.keyCode,f=1;switch(b){case 38:this.changeHighlight(b);this.setHighlightedValue2();swStoreEntry=f=0;break;case 40:this.changeHighlight(b);this.setHighlightedValue2();swStoreEntry=f=0;break;default:this.getSuggestions(this.fld.value)}return f};
_b.AutoSuggest.prototype.getSuggestions=function(b){if(b==this.sInp)return 0;_b.DOM.remE(this.idAs);this.sInp=b;if(b.length<this.oP.minchars){this.aSug=[];this.nInpC=b.length;return 0}var f=this.nInpC;this.nInpC=b.length?b.length:0;var d=this.aSug.length;if(this.nInpC>f&&d&&d<this.oP.maxentries&&this.oP.cache){for(var f=[],g=0;g<d;g++)(this.aSug[g].value.substr(0,b.length).toLowerCase()==b.toLowerCase()||this.aSug[g].value.toLowerCase().indexOf(b.toLowerCase())>0)&&f.push(this.aSug[g]);this.aSug=
f;this.createList(this.aSug)}else{var h=this,o=this.sInp;clearTimeout(this.ajID);this.ajID=setTimeout(function(){h.doAjaxRequest(o)},this.oP.delay)}return false};
_b.AutoSuggest.prototype.doAjaxRequest=function(b){if(b!=this.fld.value)return false;var f=this,d=typeof this.oP.script=="function"?this.oP.script(encodeURIComponent(this.sInp)):this.oP.script+this.oP.varname+"="+encodeURIComponent(this.sInp);if(!d)return false;var g=this.oP.meth,b=this.sInp;(new _b.Ajax).makeRequest(d,g,function(d){f.setSuggestions(d,b)},function(b){alert("AJAX error: "+b)})};
_b.AutoSuggest.prototype.setSuggestions=function(b,f){if(f!=this.fld.value)return false;this.aSug=[];if(this.oP.json){var d=eval("("+b.responseText+")");if(d.status==0){Static_AutosuggestResponseData=d;for(var g=0;g<d.results.length;g++)this.aSug.push({id:d.results[g].id,value:d.results[g].value,info:d.results[g].info})}else return false}else{d=b.responseXML.getElementsByTagName("results")[0].childNodes;for(g=0;g<d.length;g++)d[g].hasChildNodes()&&this.aSug.push({id:d[g].getAttribute("id"),value:d[g].childNodes[0].nodeValue,
info:d[g].getAttribute("info")})}this.idAs="as_"+this.fld.id;this.createList(this.aSug)};
_b.AutoSuggest.prototype.createList=function(b){var f=this;_b.DOM.remE(this.idAs);this.killTimeout();if(b.length==0&&!this.oP.shownoresults)return false;for(var d=_b.DOM.cE("div",{id:this.idAs,className:this.oP.className}),g=_b.DOM.cE("ul",{id:"as_ul"}),h=0;h<b.length;h++){var o=b[h].value,n=o.toLowerCase().indexOf(this.sInp.toLowerCase()),o=o.substring(0,n)+"<em>"+o.substring(n,n+this.sInp.length)+"</em>"+o.substring(n+this.sInp.length),o=_b.DOM.cE("span",{},o,true);if(b[h].info!=""){n=_b.DOM.cE("br",
{});o.appendChild(n);n=_b.DOM.cE("small",{},b[h].info);o.appendChild(n)}var n=_b.DOM.cE("a",{href:"#"}),k=_b.DOM.cE("span",{className:"tl"}," "),q=_b.DOM.cE("span",{className:"tr"}," ");n.appendChild(k);n.appendChild(q);n.appendChild(o);n.name=h+1;n.onclick=function(){f.setHighlightedValue();return false};n.onmouseover=function(){f.setHighlight(this.name)};o=_b.DOM.cE("li",{},n);g.appendChild(o)}if(b.length==0&&this.oP.shownoresults){o=_b.DOM.cE("li",{className:"as_warning"},this.oP.noresults);g.appendChild(o);
Static_AutosuggestResponseData.results.length=0}g.style.cssText="zoom: 1; padding-top: 4px;";d.appendChild(g);b=_b.DOM.getPos(this.fld);g=b.x-3;h=b.y-4;o=this.fld.offsetWidth;if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1){g=b.x-2;h=b.y-4;o=this.fld.offsetWidth+5}d.style.left=g+"px";d.style.top=h+this.fld.offsetHeight+this.oP.offsety+"px";d.style.width=o+"px";d.style.height="250px";d.onmouseover=function(){f.killTimeout()};d.onmouseout=function(){f.resetTimeout()};document.getElementsByTagName("body")[0].appendChild(d);
this.iHigh=0;f=this;this.toID=setTimeout(function(){f.clearSuggestions()},this.oP.timeout)};_b.AutoSuggest.prototype.changeHighlight=function(b){var f=_b.DOM.gE("as_ul");if(!f)return false;var d;b==40?d=this.iHigh+1:b==38&&(d=this.iHigh-1);if(d>f.childNodes.length)d=f.childNodes.length;d<1&&(d=1);this.setHighlight(d)};
_b.AutoSuggest.prototype.setHighlight=function(b){var f=_b.DOM.gE("as_ul");if(!f)return false;this.iHigh>0&&this.clearHighlight();this.iHigh=Number(b);f.childNodes[this.iHigh-1].className="as_highlight";this.killTimeout()};_b.AutoSuggest.prototype.clearHighlight=function(){var b=_b.DOM.gE("as_ul");if(!b)return false;if(this.iHigh>0){b.childNodes[this.iHigh-1].className="";this.iHigh=0}};
_b.AutoSuggest.prototype.setHighlightedValue=function(){if(this.iHigh){if(this.aSug[this.iHigh-1])this.sInp=this.fld.value=html_entity_decode(this.aSug[this.iHigh-1].value);this.fld.focus();this.fld.selectionStart&&this.fld.setSelectionRange(this.sInp.length,this.sInp.length);this.clearSuggestions();typeof this.oP.callback=="function"&&this.oP.callback(this.aSug[this.iHigh-1])}};
_b.AutoSuggest.prototype.setHighlightedValue2=function(){if(this.iHigh&&this.aSug[this.iHigh-1])this.sInp=this.fld.value=html_entity_decode(this.aSug[this.iHigh-1].value)};_b.AutoSuggest.prototype.killTimeout=function(){clearTimeout(this.toID)};_b.AutoSuggest.prototype.resetTimeout=function(){clearTimeout(this.toID);var b=this;this.toID=setTimeout(function(){b.clearSuggestions()},500)};
_b.AutoSuggest.prototype.clearSuggestions=function(){this.killTimeout();var b=_b.DOM.gE(this.idAs),f=this;b&&new _b.Fader(b,1,0,250,function(){_b.DOM.remE(f.idAs)})};"undefined"==typeof _b.Ajax&&(_b.Ajax={});_b.Ajax=function(){this.req={};this.isIE=false};
_b.Ajax.prototype.makeRequest=function(b,f,d,g){f!="POST"&&(f="GET");this.onComplete=d;this.onError=g;var h=this;if(window.XMLHttpRequest){this.req=new XMLHttpRequest;this.req.onreadystatechange=function(){h.processReqChange()};this.req.open("GET",b,true);this.req.send(null)}else if(window.ActiveXObject)if(this.req=new ActiveXObject("Microsoft.XMLHTTP")){this.req.onreadystatechange=function(){h.processReqChange()};this.req.open(f,b,true);this.req.send()}};
_b.Ajax.prototype.processReqChange=function(){if(this.req.readyState==4)if(this.req.status==200)this.onComplete(this.req);else this.onError(this.req.status)};"undefined"==typeof _b.DOM&&(_b.DOM={});_b.DOM.cE=function(b,f,d,g){b=document.createElement(b);if(!b)return 0;for(var h in f)b[h]=f[h];f=typeof d;f=="string"&&!g?b.appendChild(document.createTextNode(d)):f=="string"&&g?b.innerHTML=d:f=="object"&&b.appendChild(d);return b};
_b.DOM.gE=function(b){var f=typeof b;if(f=="undefined")return 0;if(f=="string")return(b=document.getElementById(b))?typeof b.appendChild!="undefined"?b:0:0;return typeof b.appendChild!="undefined"?b:0};_b.DOM.remE=function(b){return(b=this.gE(b))?b.parentNode.removeChild(b)?true:0:0};
_b.DOM.getPos=function(b){var f=b=this.gE(b),d=0;if(f.offsetParent)for(;f.offsetParent;){d=d+f.offsetLeft;f=f.offsetParent}else f.x&&(d=d+f.x);f=b;b=0;if(f.offsetParent)for(;f.offsetParent;){b=b+f.offsetTop;f=f.offsetParent}else f.y&&(b=b+f.y);return{x:d,y:b}};"undefined"==typeof _b.Fader&&(_b.Fader={});_b.Fader=function(b,f,d,g,h){if(!b)return 0;this.e=b;this.from=f;this.to=d;this.cb=h;this.nDur=g;this.nInt=50;this.nTime=0;var o=this;this.nID=setInterval(function(){o._fade()},this.nInt)};
_b.Fader.prototype._fade=function(){this.nTime=this.nTime+this.nInt;var b=Math.round(this._tween(this.nTime,this.from,this.to,this.nDur)*100),f=b/100;if(this.e.filters)try{this.e.filters.item("DXImageTransform.Microsoft.Alpha").opacity=b}catch(d){this.e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"}else this.e.style.opacity=f;if(this.nTime==this.nDur){clearInterval(this.nID);this.cb!=void 0&&this.cb()}};_b.Fader.prototype._tween=function(b,f,d,g){return f+(d-f)*(b/g)};
function storeEntryMessageHide(b){document.getElementById(b)&&document.getElementById(b).parentNode.removeChild(document.getElementById(b))}
function storeEntryProcessAjax(b,f,d,g,h,o){(new _b.Ajax).makeRequest("../gulliver/genericAjax?request=storeInTmp&cnn="+f+"&table="+d+"&pk="+g+"&pkt="+h+"&fld="+o+"&value="+b.value,"POST",function(b){b=eval("("+b.responseText+")");switch(b.status){case 1:var d=document.documentElement.clientWidth,f=document.documentElement.scrollLeft,b=document.documentElement.scrollTop,g=document.body.clientWidth,h=document.body.scrollLeft,o=document.body.scrollTop,d=d>0?d:g,f=f>0?f:h,b=b>0?b:o;storeEntryMessageHide("myIframe");
o=document.createElement("iframe");o.setAttribute("id","myIframe");o.style.position="absolute";o.style.left=parseInt(d/2)-200+f+"px";o.style.top=b+5+"px";o.src="about:blank";o.frameBorder=0;o.scrolling="no";o.style.width="400px";o.style.height="45px";leimnud.event.add(o,"load",function(){document.getElementById("myIframe").contentWindow.document.body.style.margin=0;document.getElementById("myIframe").contentWindow.document.body.style.padding=0;document.getElementById("myIframe").contentWindow.document.body.innerHTML=
'<div style="border: 1px solid #808080; width: 398px; height: 43px; background: #ADDCC7; font:0.9em arial, verdana, helvetica, sans-serif;"><div style="margin: 0.5em 0 0 0.5em;"><img src="/images/documents/_accept.png" alt="" style="margin-right: 0.8em; vertical-align: middle;" />'+_("ID_FIELD_DYNAFORM_SUGGEST_MESSAGE_TEMPORAL")+"</div></div>"});document.body.appendChild(o);setTimeout('storeEntryMessageHide("myIframe")',1750);swStoreEntry=0;break;default:alert(b.message)}},function(){})}
function html_entity_decode(b,f){var d={},g="",h="",o="",h=b.toString();if(false===(d=get_html_translation_table("HTML_ENTITIES",f)))return false;delete d["&"];d["&"]="&amp;";for(g in d){o=d[g];h=h.split(o).join(g)}return h}var pmtooltip=!1,pmtooltipShadow=!1,pmshadowSize=4,pmtooltipMaxWidth=400,pmtooltipMinWidth=100,pmiframe=!1,tooltip_is_msie=0<=navigator.userAgent.indexOf("MSIE")&&-1==navigator.userAgent.indexOf("opera")&&document.all?!0:!1;
function showTooltip(b,f){var d=Math.max(document.body.clientWidth,document.documentElement.clientWidth)-20;if(!pmtooltip){pmtooltip=document.createElement("DIV");pmtooltip.id="pmtooltip";pmtooltipShadow=document.createElement("DIV");pmtooltipShadow.id="pmtooltipShadow";document.body.appendChild(pmtooltip);document.body.appendChild(pmtooltipShadow);if(tooltip_is_msie){pmiframe=document.createElement("IFRAME");pmiframe.frameborder="5";pmiframe.style.backgroundColor="#FFFFFF";pmiframe.src="#";pmiframe.style.zIndex=
100;pmiframe.style.position="absolute";document.body.appendChild(pmiframe)}}pmtooltip.style.display="block";pmtooltipShadow.style.display="block";if(tooltip_is_msie)pmiframe.style.display="block";var g=Math.max(document.body.scrollTop,document.documentElement.scrollTop);navigator.userAgent.toLowerCase().indexOf("safari")>=0&&(g=0);var h=b.clientX+10;pmtooltip.style.width=null;pmtooltip.innerHTML=f;pmtooltip.style.left=h+5+"px";pmtooltip.style.top=b.clientY+g+"px";pmtooltipShadow.style.left=h+pmshadowSize+
"px";pmtooltipShadow.style.top=b.clientY+g+pmshadowSize+"px";if(pmtooltip.offsetWidth>pmtooltipMaxWidth)pmtooltip.style.width=pmtooltipMaxWidth+"px";g=pmtooltip.offsetWidth;g<pmtooltipMinWidth&&(g=pmtooltipMinWidth);pmtooltip.style.width=g+"px";pmtooltipShadow.style.width=pmtooltip.offsetWidth+"px";pmtooltipShadow.style.height=pmtooltip.offsetHeight+"px";if(h+g>d){pmtooltip.style.left=pmtooltipShadow.style.left.replace("px","")-(h+g-d)+"px";pmtooltipShadow.style.left=pmtooltipShadow.style.left.replace("px",
"")-(h+g-d)+pmshadowSize+"px"}if(tooltip_is_msie){pmiframe.style.left=pmtooltip.style.left;pmiframe.style.top=pmtooltip.style.top;pmiframe.style.width=pmtooltip.offsetWidth+"px";pmiframe.style.height=pmtooltip.offsetHeight+"px"}}function hideTooltip(){pmtooltip.style.display="none";pmtooltipShadow.style.display="none";if(tooltip_is_msie)pmiframe.style.display="none"};
